(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();function b1(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ud={exports:{}},La={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function _1(){if(Hv)return La;Hv=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:o,type:i,key:c,ref:r!==void 0?r:null,props:a}}return La.Fragment=t,La.jsx=e,La.jsxs=e,La}var Yv;function x1(){return Yv||(Yv=1,ud.exports=_1()),ud.exports}var At=x1(),hd={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function S1(){if(Vv)return gt;Vv=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function C(O,q,tt){this.props=O,this.context=q,this.refs=w,this.updater=tt||_}C.prototype.isReactComponent={},C.prototype.setState=function(O,q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,q,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function k(){}k.prototype=C.prototype;function z(O,q,tt){this.props=O,this.context=q,this.refs=w,this.updater=tt||_}var Y=z.prototype=new k;Y.constructor=z,S(Y,C.prototype),Y.isPureReactComponent=!0;var U=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function J(O,q,tt,K,nt,_t){return tt=_t.ref,{$$typeof:o,type:O,key:q,ref:tt!==void 0?tt:null,props:_t}}function Z(O,q){return J(O.type,q,void 0,void 0,void 0,O.props)}function ct(O){return typeof O=="object"&&O!==null&&O.$$typeof===o}function wt(O){var q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(tt){return q[tt]})}var Mt=/\/+/g;function ht(O,q){return typeof O=="object"&&O!==null&&O.key!=null?wt(""+O.key):q.toString(36)}function bt(){}function dt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(bt,bt):(O.status="pending",O.then(function(q){O.status==="pending"&&(O.status="fulfilled",O.value=q)},function(q){O.status==="pending"&&(O.status="rejected",O.reason=q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Tt(O,q,tt,K,nt){var _t=typeof O;(_t==="undefined"||_t==="boolean")&&(O=null);var ot=!1;if(O===null)ot=!0;else switch(_t){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(O.$$typeof){case o:case t:ot=!0;break;case m:return ot=O._init,Tt(ot(O._payload),q,tt,K,nt)}}if(ot)return nt=nt(O),ot=K===""?"."+ht(O,0):K,U(nt)?(tt="",ot!=null&&(tt=ot.replace(Mt,"$&/")+"/"),Tt(nt,q,tt,"",function(gi){return gi})):nt!=null&&(ct(nt)&&(nt=Z(nt,tt+(nt.key==null||O&&O.key===nt.key?"":(""+nt.key).replace(Mt,"$&/")+"/")+ot)),q.push(nt)),1;ot=0;var fe=K===""?".":K+":";if(U(O))for(var Ht=0;Ht<O.length;Ht++)K=O[Ht],_t=fe+ht(K,Ht),ot+=Tt(K,q,tt,_t,nt);else if(Ht=v(O),typeof Ht=="function")for(O=Ht.call(O),Ht=0;!(K=O.next()).done;)K=K.value,_t=fe+ht(K,Ht++),ot+=Tt(K,q,tt,_t,nt);else if(_t==="object"){if(typeof O.then=="function")return Tt(dt(O),q,tt,K,nt);throw q=String(O),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return ot}function H(O,q,tt){if(O==null)return O;var K=[],nt=0;return Tt(O,K,"","",function(_t){return q.call(tt,_t,nt++)}),K}function W(O){if(O._status===-1){var q=O._result;q=q(),q.then(function(tt){(O._status===0||O._status===-1)&&(O._status=1,O._result=tt)},function(tt){(O._status===0||O._status===-1)&&(O._status=2,O._result=tt)}),O._status===-1&&(O._status=0,O._result=q)}if(O._status===1)return O._result.default;throw O._result}var $=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function yt(){}return gt.Children={map:H,forEach:function(O,q,tt){H(O,function(){q.apply(this,arguments)},tt)},count:function(O){var q=0;return H(O,function(){q++}),q},toArray:function(O){return H(O,function(q){return q})||[]},only:function(O){if(!ct(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},gt.Component=C,gt.Fragment=e,gt.Profiler=r,gt.PureComponent=z,gt.StrictMode=i,gt.Suspense=f,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,gt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return F.H.useMemoCache(O)}},gt.cache=function(O){return function(){return O.apply(null,arguments)}},gt.cloneElement=function(O,q,tt){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var K=S({},O.props),nt=O.key,_t=void 0;if(q!=null)for(ot in q.ref!==void 0&&(_t=void 0),q.key!==void 0&&(nt=""+q.key),q)!I.call(q,ot)||ot==="key"||ot==="__self"||ot==="__source"||ot==="ref"&&q.ref===void 0||(K[ot]=q[ot]);var ot=arguments.length-2;if(ot===1)K.children=tt;else if(1<ot){for(var fe=Array(ot),Ht=0;Ht<ot;Ht++)fe[Ht]=arguments[Ht+2];K.children=fe}return J(O.type,nt,void 0,void 0,_t,K)},gt.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},gt.createElement=function(O,q,tt){var K,nt={},_t=null;if(q!=null)for(K in q.key!==void 0&&(_t=""+q.key),q)I.call(q,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(nt[K]=q[K]);var ot=arguments.length-2;if(ot===1)nt.children=tt;else if(1<ot){for(var fe=Array(ot),Ht=0;Ht<ot;Ht++)fe[Ht]=arguments[Ht+2];nt.children=fe}if(O&&O.defaultProps)for(K in ot=O.defaultProps,ot)nt[K]===void 0&&(nt[K]=ot[K]);return J(O,_t,void 0,void 0,null,nt)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(O){return{$$typeof:h,render:O}},gt.isValidElement=ct,gt.lazy=function(O){return{$$typeof:m,_payload:{_status:-1,_result:O},_init:W}},gt.memo=function(O,q){return{$$typeof:g,type:O,compare:q===void 0?null:q}},gt.startTransition=function(O){var q=F.T,tt={};F.T=tt;try{var K=O(),nt=F.S;nt!==null&&nt(tt,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(yt,$)}catch(_t){$(_t)}finally{F.T=q}},gt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},gt.use=function(O){return F.H.use(O)},gt.useActionState=function(O,q,tt){return F.H.useActionState(O,q,tt)},gt.useCallback=function(O,q){return F.H.useCallback(O,q)},gt.useContext=function(O){return F.H.useContext(O)},gt.useDebugValue=function(){},gt.useDeferredValue=function(O,q){return F.H.useDeferredValue(O,q)},gt.useEffect=function(O,q,tt){var K=F.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(O,q)},gt.useId=function(){return F.H.useId()},gt.useImperativeHandle=function(O,q,tt){return F.H.useImperativeHandle(O,q,tt)},gt.useInsertionEffect=function(O,q){return F.H.useInsertionEffect(O,q)},gt.useLayoutEffect=function(O,q){return F.H.useLayoutEffect(O,q)},gt.useMemo=function(O,q){return F.H.useMemo(O,q)},gt.useOptimistic=function(O,q){return F.H.useOptimistic(O,q)},gt.useReducer=function(O,q,tt){return F.H.useReducer(O,q,tt)},gt.useRef=function(O){return F.H.useRef(O)},gt.useState=function(O){return F.H.useState(O)},gt.useSyncExternalStore=function(O,q,tt){return F.H.useSyncExternalStore(O,q,tt)},gt.useTransition=function(){return F.H.useTransition()},gt.version="19.1.0",gt}var Nv;function bg(){return Nv||(Nv=1,hd.exports=S1()),hd.exports}var Mi=bg();const Ln=b1(Mi);var fd={exports:{}},Pa={},dd={exports:{}},gd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function w1(){return Xv||(Xv=1,function(o){function t(H,W){var $=H.length;H.push(W);t:for(;0<$;){var yt=$-1>>>1,O=H[yt];if(0<r(O,W))H[yt]=W,H[$]=O,$=yt;else break t}}function e(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var W=H[0],$=H.pop();if($!==W){H[0]=$;t:for(var yt=0,O=H.length,q=O>>>1;yt<q;){var tt=2*(yt+1)-1,K=H[tt],nt=tt+1,_t=H[nt];if(0>r(K,$))nt<O&&0>r(_t,K)?(H[yt]=_t,H[nt]=$,yt=nt):(H[yt]=K,H[tt]=$,yt=tt);else if(nt<O&&0>r(_t,$))H[yt]=_t,H[nt]=$,yt=nt;else break t}}return W}function r(H,W){var $=H.sortIndex-W.sortIndex;return $!==0?$:H.id-W.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;o.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();o.unstable_now=function(){return c.now()-h}}var f=[],g=[],m=1,y=null,v=3,_=!1,S=!1,w=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function U(H){for(var W=e(g);W!==null;){if(W.callback===null)i(g);else if(W.startTime<=H)i(g),W.sortIndex=W.expirationTime,t(f,W);else break;W=e(g)}}function F(H){if(w=!1,U(H),!S)if(e(f)!==null)S=!0,I||(I=!0,ht());else{var W=e(g);W!==null&&Tt(F,W.startTime-H)}}var I=!1,J=-1,Z=5,ct=-1;function wt(){return C?!0:!(o.unstable_now()-ct<Z)}function Mt(){if(C=!1,I){var H=o.unstable_now();ct=H;var W=!0;try{t:{S=!1,w&&(w=!1,z(J),J=-1),_=!0;var $=v;try{e:{for(U(H),y=e(f);y!==null&&!(y.expirationTime>H&&wt());){var yt=y.callback;if(typeof yt=="function"){y.callback=null,v=y.priorityLevel;var O=yt(y.expirationTime<=H);if(H=o.unstable_now(),typeof O=="function"){y.callback=O,U(H),W=!0;break e}y===e(f)&&i(f),U(H)}else i(f);y=e(f)}if(y!==null)W=!0;else{var q=e(g);q!==null&&Tt(F,q.startTime-H),W=!1}}break t}finally{y=null,v=$,_=!1}W=void 0}}finally{W?ht():I=!1}}}var ht;if(typeof Y=="function")ht=function(){Y(Mt)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,dt=bt.port2;bt.port1.onmessage=Mt,ht=function(){dt.postMessage(null)}}else ht=function(){k(Mt,0)};function Tt(H,W){J=k(function(){H(o.unstable_now())},W)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(H){H.callback=null},o.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<H?Math.floor(1e3/H):5},o.unstable_getCurrentPriorityLevel=function(){return v},o.unstable_next=function(H){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var $=v;v=W;try{return H()}finally{v=$}},o.unstable_requestPaint=function(){C=!0},o.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var $=v;v=H;try{return W()}finally{v=$}},o.unstable_scheduleCallback=function(H,W,$){var yt=o.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?yt+$:yt):$=yt,H){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=$+O,H={id:m++,callback:W,priorityLevel:H,startTime:$,expirationTime:O,sortIndex:-1},$>yt?(H.sortIndex=$,t(g,H),e(f)===null&&H===e(g)&&(w?(z(J),J=-1):w=!0,Tt(F,$-yt))):(H.sortIndex=O,t(f,H),S||_||(S=!0,I||(I=!0,ht()))),H},o.unstable_shouldYield=wt,o.unstable_wrapCallback=function(H){var W=v;return function(){var $=v;v=W;try{return H.apply(this,arguments)}finally{v=$}}}}(gd)),gd}var qv;function C1(){return qv||(qv=1,dd.exports=w1()),dd.exports}var pd={exports:{}},Re={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function T1(){if(Gv)return Re;Gv=1;var o=bg();function t(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)g+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(f,g,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:g,implementation:m}}var c=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Re.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Re.createPortal=function(f,g){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return a(f,g,null,m)},Re.flushSync=function(f){var g=c.T,m=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=g,i.p=m,i.d.f()}},Re.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(f,g))},Re.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Re.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var m=g.as,y=h(m,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,_=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;m==="style"?i.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:_}):m==="script"&&i.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:_,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Re.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var m=h(g.as,g.crossOrigin);i.d.M(f,{crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(f)},Re.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var m=g.as,y=h(m,g.crossOrigin);i.d.L(f,m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Re.preloadModule=function(f,g){if(typeof f=="string")if(g){var m=h(g.as,g.crossOrigin);i.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(f)},Re.requestFormReset=function(f){i.d.r(f)},Re.unstable_batchedUpdates=function(f,g){return f(g)},Re.useFormState=function(f,g,m){return c.H.useFormState(f,g,m)},Re.useFormStatus=function(){return c.H.useHostTransitionStatus()},Re.version="19.1.0",Re}var Iv;function O1(){if(Iv)return pd.exports;Iv=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),pd.exports=T1(),pd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function D1(){if(Wv)return Pa;Wv=1;var o=C1(),t=bg(),e=O1();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function a(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(a(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=a(n),s===null)throw Error(i(188));return s!==n?null:n}for(var l=n,u=s;;){var d=l.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){l=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===l)return h(d),n;if(p===u)return h(d),s;p=p.sibling}throw Error(i(188))}if(l.return!==u.return)l=d,u=p;else{for(var b=!1,x=d.child;x;){if(x===l){b=!0,l=d,u=p;break}if(x===u){b=!0,u=d,l=p;break}x=x.sibling}if(!b){for(x=p.child;x;){if(x===l){b=!0,l=p,u=d;break}if(x===u){b=!0,u=p,l=d;break}x=x.sibling}if(!b)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),ct=Symbol.for("react.activity"),wt=Symbol.for("react.memo_cache_sentinel"),Mt=Symbol.iterator;function ht(n){return n===null||typeof n!="object"?null:(n=Mt&&n[Mt]||n["@@iterator"],typeof n=="function"?n:null)}var bt=Symbol.for("react.client.reference");function dt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===bt?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case C:return"Profiler";case w:return"StrictMode";case F:return"Suspense";case I:return"SuspenseList";case ct:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case _:return"Portal";case Y:return(n.displayName||"Context")+".Provider";case z:return(n._context.displayName||"Context")+".Consumer";case U:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case J:return s=n.displayName||null,s!==null?s:dt(n.type)||"Memo";case Z:s=n._payload,n=n._init;try{return dt(n(s))}catch{}}return null}var Tt=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},yt=[],O=-1;function q(n){return{current:n}}function tt(n){0>O||(n.current=yt[O],yt[O]=null,O--)}function K(n,s){O++,yt[O]=n.current,n.current=s}var nt=q(null),_t=q(null),ot=q(null),fe=q(null);function Ht(n,s){switch(K(ot,s),K(_t,n),K(nt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?gv(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=gv(s),n=pv(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}tt(nt),K(nt,n)}function gi(){tt(nt),tt(_t),tt(ot)}function pi(n){n.memoizedState!==null&&K(fe,n);var s=nt.current,l=pv(s,n.type);s!==l&&(K(_t,n),K(nt,l))}function ll(n){_t.current===n&&(tt(nt),tt(_t)),fe.current===n&&(tt(fe),ka._currentValue=$)}var Qu=Object.prototype.hasOwnProperty,Zu=o.unstable_scheduleCallback,Ku=o.unstable_cancelCallback,Kx=o.unstable_shouldYield,Jx=o.unstable_requestPaint,Ji=o.unstable_now,$x=o.unstable_getCurrentPriorityLevel,Wg=o.unstable_ImmediatePriority,Qg=o.unstable_UserBlockingPriority,cl=o.unstable_NormalPriority,tS=o.unstable_LowPriority,Zg=o.unstable_IdlePriority,eS=o.log,iS=o.unstable_setDisableYieldValue,Uo=null,ii=null;function qn(n){if(typeof eS=="function"&&iS(n),ii&&typeof ii.setStrictMode=="function")try{ii.setStrictMode(Uo,n)}catch{}}var ni=Math.clz32?Math.clz32:rS,nS=Math.log,sS=Math.LN2;function rS(n){return n>>>=0,n===0?32:31-(nS(n)/sS|0)|0}var ul=256,hl=4194304;function Es(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function fl(n,s,l){var u=n.pendingLanes;if(u===0)return 0;var d=0,p=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var x=u&134217727;return x!==0?(u=x&~p,u!==0?d=Es(u):(b&=x,b!==0?d=Es(b):l||(l=x&~n,l!==0&&(d=Es(l))))):(x=u&~p,x!==0?d=Es(x):b!==0?d=Es(b):l||(l=u&~n,l!==0&&(d=Es(l)))),d===0?0:s!==0&&s!==d&&(s&p)===0&&(p=d&-d,l=s&-s,p>=l||p===32&&(l&4194048)!==0)?s:d}function Fo(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function oS(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kg(){var n=ul;return ul<<=1,(ul&4194048)===0&&(ul=256),n}function Jg(){var n=hl;return hl<<=1,(hl&62914560)===0&&(hl=4194304),n}function Ju(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Ho(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function aS(n,s,l,u,d,p){var b=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var x=n.entanglements,T=n.expirationTimes,j=n.hiddenUpdates;for(l=b&~l;0<l;){var V=31-ni(l),X=1<<V;x[V]=0,T[V]=-1;var L=j[V];if(L!==null)for(j[V]=null,V=0;V<L.length;V++){var P=L[V];P!==null&&(P.lane&=-536870913)}l&=~X}u!==0&&$g(n,u,0),p!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=p&~(b&~s))}function $g(n,s,l){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-ni(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|l&4194090}function tp(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var u=31-ni(l),d=1<<u;d&s|n[u]&s&&(n[u]|=s),l&=~d}}function $u(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function th(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ep(){var n=W.p;return n!==0?n:(n=window.event,n===void 0?32:jv(n.type))}function lS(n,s){var l=W.p;try{return W.p=n,s()}finally{W.p=l}}var Gn=Math.random().toString(36).slice(2),Ae="__reactFiber$"+Gn,qe="__reactProps$"+Gn,mr="__reactContainer$"+Gn,eh="__reactEvents$"+Gn,cS="__reactListeners$"+Gn,uS="__reactHandles$"+Gn,ip="__reactResources$"+Gn,Yo="__reactMarker$"+Gn;function ih(n){delete n[Ae],delete n[qe],delete n[eh],delete n[cS],delete n[uS]}function yr(n){var s=n[Ae];if(s)return s;for(var l=n.parentNode;l;){if(s=l[mr]||l[Ae]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=bv(n);n!==null;){if(l=n[Ae])return l;n=bv(n)}return s}n=l,l=n.parentNode}return null}function vr(n){if(n=n[Ae]||n[mr]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Vo(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function br(n){var s=n[ip];return s||(s=n[ip]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ye(n){n[Yo]=!0}var np=new Set,sp={};function ks(n,s){_r(n,s),_r(n+"Capture",s)}function _r(n,s){for(sp[n]=s,n=0;n<s.length;n++)np.add(s[n])}var hS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rp={},op={};function fS(n){return Qu.call(op,n)?!0:Qu.call(rp,n)?!1:hS.test(n)?op[n]=!0:(rp[n]=!0,!1)}function dl(n,s,l){if(fS(s))if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+l)}}function gl(n,s,l){if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+l)}}function pn(n,s,l,u){if(u===null)n.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(s,l,""+u)}}var nh,ap;function xr(n){if(nh===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);nh=s&&s[1]||"",ap=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nh+n+ap}var sh=!1;function rh(n,s){if(!n||sh)return"";sh=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(P){var L=P}Reflect.construct(n,[],X)}else{try{X.call()}catch(P){L=P}n.call(X.prototype)}}else{try{throw Error()}catch(P){L=P}(X=n())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(P){if(P&&L&&typeof P.stack=="string")return[P.stack,L.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),b=p[0],x=p[1];if(b&&x){var T=b.split(`
`),j=x.split(`
`);for(d=u=0;u<T.length&&!T[u].includes("DetermineComponentFrameRoot");)u++;for(;d<j.length&&!j[d].includes("DetermineComponentFrameRoot");)d++;if(u===T.length||d===j.length)for(u=T.length-1,d=j.length-1;1<=u&&0<=d&&T[u]!==j[d];)d--;for(;1<=u&&0<=d;u--,d--)if(T[u]!==j[d]){if(u!==1||d!==1)do if(u--,d--,0>d||T[u]!==j[d]){var V=`
`+T[u].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=u&&0<=d);break}}}finally{sh=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?xr(l):""}function dS(n){switch(n.tag){case 26:case 27:case 5:return xr(n.type);case 16:return xr("Lazy");case 13:return xr("Suspense");case 19:return xr("SuspenseList");case 0:case 15:return rh(n.type,!1);case 11:return rh(n.type.render,!1);case 1:return rh(n.type,!0);case 31:return xr("Activity");default:return""}}function lp(n){try{var s="";do s+=dS(n),n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function mi(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function cp(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gS(n){var s=cp(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),u=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,p=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(b){u=""+b,p.call(this,b)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function pl(n){n._valueTracker||(n._valueTracker=gS(n))}function up(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return n&&(u=cp(n)?n.checked?"true":"false":n.value),n=u,n!==l?(s.setValue(n),!0):!1}function ml(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var pS=/[\n"\\]/g;function yi(n){return n.replace(pS,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function oh(n,s,l,u,d,p,b,x){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),s!=null?b==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+mi(s)):n.value!==""+mi(s)&&(n.value=""+mi(s)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),s!=null?ah(n,b,mi(s)):l!=null?ah(n,b,mi(l)):u!=null&&n.removeAttribute("value"),d==null&&p!=null&&(n.defaultChecked=!!p),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+mi(x):n.removeAttribute("name")}function hp(n,s,l,u,d,p,b,x){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;l=l!=null?""+mi(l):"",s=s!=null?""+mi(s):l,x||s===n.value||(n.value=s),n.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=x?n.checked:!!u,n.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b)}function ah(n,s,l){s==="number"&&ml(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Sr(n,s,l,u){if(n=n.options,s){s={};for(var d=0;d<l.length;d++)s["$"+l[d]]=!0;for(l=0;l<n.length;l++)d=s.hasOwnProperty("$"+n[l].value),n[l].selected!==d&&(n[l].selected=d),d&&u&&(n[l].defaultSelected=!0)}else{for(l=""+mi(l),s=null,d=0;d<n.length;d++){if(n[d].value===l){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function fp(n,s,l){if(s!=null&&(s=""+mi(s),s!==n.value&&(n.value=s),l==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=l!=null?""+mi(l):""}function dp(n,s,l,u){if(s==null){if(u!=null){if(l!=null)throw Error(i(92));if(Tt(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),s=l}l=mi(s),n.defaultValue=l,u=n.textContent,u===l&&u!==""&&u!==null&&(n.value=u)}function wr(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var mS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gp(n,s,l){var u=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,l):typeof l!="number"||l===0||mS.has(s)?s==="float"?n.cssFloat=l:n[s]=(""+l).trim():n[s]=l+"px"}function pp(n,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&l[d]!==u&&gp(n,d,u)}else for(var p in s)s.hasOwnProperty(p)&&gp(n,p,s[p])}function lh(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yl(n){return vS.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ch=null;function uh(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Cr=null,Tr=null;function mp(n){var s=vr(n);if(s&&(n=s.stateNode)){var l=n[qe]||null;t:switch(n=s.stateNode,s.type){case"input":if(oh(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+yi(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==n&&u.form===n.form){var d=u[qe]||null;if(!d)throw Error(i(90));oh(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<l.length;s++)u=l[s],u.form===n.form&&up(u)}break t;case"textarea":fp(n,l.value,l.defaultValue);break t;case"select":s=l.value,s!=null&&Sr(n,!!l.multiple,s,!1)}}}var hh=!1;function yp(n,s,l){if(hh)return n(s,l);hh=!0;try{var u=n(s);return u}finally{if(hh=!1,(Cr!==null||Tr!==null)&&(ic(),Cr&&(s=Cr,n=Tr,Tr=Cr=null,mp(s),n)))for(s=0;s<n.length;s++)mp(n[s])}}function No(n,s){var l=n.stateNode;if(l===null)return null;var u=l[qe]||null;if(u===null)return null;l=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fh=!1;if(mn)try{var Xo={};Object.defineProperty(Xo,"passive",{get:function(){fh=!0}}),window.addEventListener("test",Xo,Xo),window.removeEventListener("test",Xo,Xo)}catch{fh=!1}var In=null,dh=null,vl=null;function vp(){if(vl)return vl;var n,s=dh,l=s.length,u,d="value"in In?In.value:In.textContent,p=d.length;for(n=0;n<l&&s[n]===d[n];n++);var b=l-n;for(u=1;u<=b&&s[l-u]===d[p-u];u++);return vl=d.slice(n,1<u?1-u:void 0)}function bl(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function _l(){return!0}function bp(){return!1}function Ge(n){function s(l,u,d,p,b){this._reactName=l,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(l=n[x],this[x]=l?l(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?_l:bp,this.isPropagationStopped=bp,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=_l)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=_l)},persist:function(){},isPersistent:_l}),s}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=Ge(As),qo=m({},As,{view:0,detail:0}),bS=Ge(qo),gh,ph,Go,Sl=m({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yh,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Go&&(Go&&n.type==="mousemove"?(gh=n.screenX-Go.screenX,ph=n.screenY-Go.screenY):ph=gh=0,Go=n),gh)},movementY:function(n){return"movementY"in n?n.movementY:ph}}),_p=Ge(Sl),_S=m({},Sl,{dataTransfer:0}),xS=Ge(_S),SS=m({},qo,{relatedTarget:0}),mh=Ge(SS),wS=m({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),CS=Ge(wS),TS=m({},As,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),OS=Ge(TS),DS=m({},As,{data:0}),xp=Ge(DS),MS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ES={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AS(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=kS[n])?!!s[n]:!1}function yh(){return AS}var zS=m({},qo,{key:function(n){if(n.key){var s=MS[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=bl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ES[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yh,charCode:function(n){return n.type==="keypress"?bl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?bl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),RS=Ge(zS),jS=m({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sp=Ge(jS),LS=m({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yh}),PS=Ge(LS),BS=m({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),US=Ge(BS),FS=m({},Sl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),HS=Ge(FS),YS=m({},As,{newState:0,oldState:0}),VS=Ge(YS),NS=[9,13,27,32],vh=mn&&"CompositionEvent"in window,Io=null;mn&&"documentMode"in document&&(Io=document.documentMode);var XS=mn&&"TextEvent"in window&&!Io,wp=mn&&(!vh||Io&&8<Io&&11>=Io),Cp=" ",Tp=!1;function Op(n,s){switch(n){case"keyup":return NS.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Or=!1;function qS(n,s){switch(n){case"compositionend":return Dp(s);case"keypress":return s.which!==32?null:(Tp=!0,Cp);case"textInput":return n=s.data,n===Cp&&Tp?null:n;default:return null}}function GS(n,s){if(Or)return n==="compositionend"||!vh&&Op(n,s)?(n=vp(),vl=dh=In=null,Or=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return wp&&s.locale!=="ko"?null:s.data;default:return null}}var IS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!IS[n.type]:s==="textarea"}function Ep(n,s,l,u){Cr?Tr?Tr.push(u):Tr=[u]:Cr=u,s=lc(s,"onChange"),0<s.length&&(l=new xl("onChange","change",null,l,u),n.push({event:l,listeners:s}))}var Wo=null,Qo=null;function WS(n){cv(n,0)}function wl(n){var s=Vo(n);if(up(s))return n}function kp(n,s){if(n==="change")return s}var Ap=!1;if(mn){var bh;if(mn){var _h="oninput"in document;if(!_h){var zp=document.createElement("div");zp.setAttribute("oninput","return;"),_h=typeof zp.oninput=="function"}bh=_h}else bh=!1;Ap=bh&&(!document.documentMode||9<document.documentMode)}function Rp(){Wo&&(Wo.detachEvent("onpropertychange",jp),Qo=Wo=null)}function jp(n){if(n.propertyName==="value"&&wl(Qo)){var s=[];Ep(s,Qo,n,uh(n)),yp(WS,s)}}function QS(n,s,l){n==="focusin"?(Rp(),Wo=s,Qo=l,Wo.attachEvent("onpropertychange",jp)):n==="focusout"&&Rp()}function ZS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return wl(Qo)}function KS(n,s){if(n==="click")return wl(s)}function JS(n,s){if(n==="input"||n==="change")return wl(s)}function $S(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var si=typeof Object.is=="function"?Object.is:$S;function Zo(n,s){if(si(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var d=l[u];if(!Qu.call(s,d)||!si(n[d],s[d]))return!1}return!0}function Lp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Pp(n,s){var l=Lp(n);n=0;for(var u;l;){if(l.nodeType===3){if(u=n+l.textContent.length,n<=s&&u>=s)return{node:l,offset:s-n};n=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Lp(l)}}function Bp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Bp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Up(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ml(n.document);s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=ml(n.document)}return s}function xh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var tw=mn&&"documentMode"in document&&11>=document.documentMode,Dr=null,Sh=null,Ko=null,wh=!1;function Fp(n,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;wh||Dr==null||Dr!==ml(u)||(u=Dr,"selectionStart"in u&&xh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ko&&Zo(Ko,u)||(Ko=u,u=lc(Sh,"onSelect"),0<u.length&&(s=new xl("onSelect","select",null,s,l),n.push({event:s,listeners:u}),s.target=Dr)))}function zs(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Mr={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionrun:zs("Transition","TransitionRun"),transitionstart:zs("Transition","TransitionStart"),transitioncancel:zs("Transition","TransitionCancel"),transitionend:zs("Transition","TransitionEnd")},Ch={},Hp={};mn&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function Rs(n){if(Ch[n])return Ch[n];if(!Mr[n])return n;var s=Mr[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Hp)return Ch[n]=s[l];return n}var Yp=Rs("animationend"),Vp=Rs("animationiteration"),Np=Rs("animationstart"),ew=Rs("transitionrun"),iw=Rs("transitionstart"),nw=Rs("transitioncancel"),Xp=Rs("transitionend"),qp=new Map,Th="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Th.push("scrollEnd");function Li(n,s){qp.set(n,s),ks(s,[n])}var Gp=new WeakMap;function vi(n,s){if(typeof n=="object"&&n!==null){var l=Gp.get(n);return l!==void 0?l:(s={value:n,source:s,stack:lp(s)},Gp.set(n,s),s)}return{value:n,source:s,stack:lp(s)}}var bi=[],Er=0,Oh=0;function Cl(){for(var n=Er,s=Oh=Er=0;s<n;){var l=bi[s];bi[s++]=null;var u=bi[s];bi[s++]=null;var d=bi[s];bi[s++]=null;var p=bi[s];if(bi[s++]=null,u!==null&&d!==null){var b=u.pending;b===null?d.next=d:(d.next=b.next,b.next=d),u.pending=d}p!==0&&Ip(l,d,p)}}function Tl(n,s,l,u){bi[Er++]=n,bi[Er++]=s,bi[Er++]=l,bi[Er++]=u,Oh|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Dh(n,s,l,u){return Tl(n,s,l,u),Ol(n)}function kr(n,s){return Tl(n,null,null,s),Ol(n)}function Ip(n,s,l){n.lanes|=l;var u=n.alternate;u!==null&&(u.lanes|=l);for(var d=!1,p=n.return;p!==null;)p.childLanes|=l,u=p.alternate,u!==null&&(u.childLanes|=l),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(d=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,d&&s!==null&&(d=31-ni(l),n=p.hiddenUpdates,u=n[d],u===null?n[d]=[s]:u.push(s),s.lane=l|536870912),p):null}function Ol(n){if(50<Sa)throw Sa=0,jf=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ar={};function sw(n,s,l,u){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(n,s,l,u){return new sw(n,s,l,u)}function Mh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function yn(n,s){var l=n.alternate;return l===null?(l=ri(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Wp(n,s){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,s=l.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Dl(n,s,l,u,d,p){var b=0;if(u=n,typeof n=="function")Mh(n)&&(b=1);else if(typeof n=="string")b=o1(n,l,nt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case ct:return n=ri(31,l,s,d),n.elementType=ct,n.lanes=p,n;case S:return js(l.children,d,p,s);case w:b=8,d|=24;break;case C:return n=ri(12,l,s,d|2),n.elementType=C,n.lanes=p,n;case F:return n=ri(13,l,s,d),n.elementType=F,n.lanes=p,n;case I:return n=ri(19,l,s,d),n.elementType=I,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:case Y:b=10;break t;case z:b=9;break t;case U:b=11;break t;case J:b=14;break t;case Z:b=16,u=null;break t}b=29,l=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=ri(b,l,s,d),s.elementType=n,s.type=u,s.lanes=p,s}function js(n,s,l,u){return n=ri(7,n,u,s),n.lanes=l,n}function Eh(n,s,l){return n=ri(6,n,null,s),n.lanes=l,n}function kh(n,s,l){return s=ri(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var zr=[],Rr=0,Ml=null,El=0,_i=[],xi=0,Ls=null,vn=1,bn="";function Ps(n,s){zr[Rr++]=El,zr[Rr++]=Ml,Ml=n,El=s}function Qp(n,s,l){_i[xi++]=vn,_i[xi++]=bn,_i[xi++]=Ls,Ls=n;var u=vn;n=bn;var d=32-ni(u)-1;u&=~(1<<d),l+=1;var p=32-ni(s)+d;if(30<p){var b=d-d%5;p=(u&(1<<b)-1).toString(32),u>>=b,d-=b,vn=1<<32-ni(s)+d|l<<d|u,bn=p+n}else vn=1<<p|l<<d|u,bn=n}function Ah(n){n.return!==null&&(Ps(n,1),Qp(n,1,0))}function zh(n){for(;n===Ml;)Ml=zr[--Rr],zr[Rr]=null,El=zr[--Rr],zr[Rr]=null;for(;n===Ls;)Ls=_i[--xi],_i[xi]=null,bn=_i[--xi],_i[xi]=null,vn=_i[--xi],_i[xi]=null}var Ue=null,Kt=null,kt=!1,Bs=null,$i=!1,Rh=Error(i(519));function Us(n){var s=Error(i(418,""));throw ta(vi(s,n)),Rh}function Zp(n){var s=n.stateNode,l=n.type,u=n.memoizedProps;switch(s[Ae]=n,s[qe]=u,l){case"dialog":St("cancel",s),St("close",s);break;case"iframe":case"object":case"embed":St("load",s);break;case"video":case"audio":for(l=0;l<Ca.length;l++)St(Ca[l],s);break;case"source":St("error",s);break;case"img":case"image":case"link":St("error",s),St("load",s);break;case"details":St("toggle",s);break;case"input":St("invalid",s),hp(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),pl(s);break;case"select":St("invalid",s);break;case"textarea":St("invalid",s),dp(s,u.value,u.defaultValue,u.children),pl(s)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||u.suppressHydrationWarning===!0||dv(s.textContent,l)?(u.popover!=null&&(St("beforetoggle",s),St("toggle",s)),u.onScroll!=null&&St("scroll",s),u.onScrollEnd!=null&&St("scrollend",s),u.onClick!=null&&(s.onclick=cc),s=!0):s=!1,s||Us(n)}function Kp(n){for(Ue=n.return;Ue;)switch(Ue.tag){case 5:case 13:$i=!1;return;case 27:case 3:$i=!0;return;default:Ue=Ue.return}}function Jo(n){if(n!==Ue)return!1;if(!kt)return Kp(n),kt=!0,!1;var s=n.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Zf(n.type,n.memoizedProps)),l=!l),l&&Kt&&Us(n),Kp(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(l=n.data,l==="/$"){if(s===0){Kt=Bi(n.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;n=n.nextSibling}Kt=null}}else s===27?(s=Kt,cs(n.type)?(n=td,td=null,Kt=n):Kt=s):Kt=Ue?Bi(n.stateNode.nextSibling):null;return!0}function $o(){Kt=Ue=null,kt=!1}function Jp(){var n=Bs;return n!==null&&(Qe===null?Qe=n:Qe.push.apply(Qe,n),Bs=null),n}function ta(n){Bs===null?Bs=[n]:Bs.push(n)}var jh=q(null),Fs=null,_n=null;function Wn(n,s,l){K(jh,s._currentValue),s._currentValue=l}function xn(n){n._currentValue=jh.current,tt(jh)}function Lh(n,s,l){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===l)break;n=n.return}}function Ph(n,s,l,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var p=d.dependencies;if(p!==null){var b=d.child;p=p.firstContext;t:for(;p!==null;){var x=p;p=d;for(var T=0;T<s.length;T++)if(x.context===s[T]){p.lanes|=l,x=p.alternate,x!==null&&(x.lanes|=l),Lh(p.return,l,n),u||(b=null);break t}p=x.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(i(341));b.lanes|=l,p=b.alternate,p!==null&&(p.lanes|=l),Lh(b,l,n),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===n){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function ea(n,s,l,u){n=null;for(var d=s,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var x=d.type;si(d.pendingProps.value,b.value)||(n!==null?n.push(x):n=[x])}}else if(d===fe.current){if(b=d.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(ka):n=[ka])}d=d.return}n!==null&&Ph(s,n,l,u),s.flags|=262144}function kl(n){for(n=n.firstContext;n!==null;){if(!si(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Hs(n){Fs=n,_n=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ze(n){return $p(Fs,n)}function Al(n,s){return Fs===null&&Hs(n),$p(n,s)}function $p(n,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},_n===null){if(n===null)throw Error(i(308));_n=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else _n=_n.next=s;return l}var rw=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(l,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(l){return l()})}},ow=o.unstable_scheduleCallback,aw=o.unstable_NormalPriority,de={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bh(){return{controller:new rw,data:new Map,refCount:0}}function ia(n){n.refCount--,n.refCount===0&&ow(aw,function(){n.controller.abort()})}var na=null,Uh=0,jr=0,Lr=null;function lw(n,s){if(na===null){var l=na=[];Uh=0,jr=Yf(),Lr={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Uh++,s.then(tm,tm),s}function tm(){if(--Uh===0&&na!==null){Lr!==null&&(Lr.status="fulfilled");var n=na;na=null,jr=0,Lr=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function cw(n,s){var l=[],u={status:"pending",value:null,reason:null,then:function(d){l.push(d)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<l.length;d++)(0,l[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<l.length;d++)(0,l[d])(void 0)}),u}var em=H.S;H.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&lw(n,s),em!==null&&em(n,s)};var Ys=q(null);function Fh(){var n=Ys.current;return n!==null?n:Yt.pooledCache}function zl(n,s){s===null?K(Ys,Ys.current):K(Ys,s.pool)}function im(){var n=Fh();return n===null?null:{parent:de._currentValue,pool:n}}var sa=Error(i(460)),nm=Error(i(474)),Rl=Error(i(542)),Hh={then:function(){}};function sm(n){return n=n.status,n==="fulfilled"||n==="rejected"}function jl(){}function rm(n,s,l){switch(l=n[l],l===void 0?n.push(s):l!==s&&(s.then(jl,jl),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,am(n),n;default:if(typeof s.status=="string")s.then(jl,jl);else{if(n=Yt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,am(n),n}throw ra=s,sa}}var ra=null;function om(){if(ra===null)throw Error(i(459));var n=ra;return ra=null,n}function am(n){if(n===sa||n===Rl)throw Error(i(483))}var Qn=!1;function Yh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vh(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Zn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Kn(n,s,l){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Rt&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Ol(n),Ip(n,null,l),s}return Tl(n,u,s,l),Ol(n)}function oa(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,l|=u,s.lanes=l,tp(n,l)}}function Nh(n,s){var l=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var d=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?d=p=b:p=p.next=b,l=l.next}while(l!==null);p===null?d=p=s:p=p.next=s}else d=p=s;l={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}var Xh=!1;function aa(){if(Xh){var n=Lr;if(n!==null)throw n}}function la(n,s,l,u){Xh=!1;var d=n.updateQueue;Qn=!1;var p=d.firstBaseUpdate,b=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var T=x,j=T.next;T.next=null,b===null?p=j:b.next=j,b=T;var V=n.alternate;V!==null&&(V=V.updateQueue,x=V.lastBaseUpdate,x!==b&&(x===null?V.firstBaseUpdate=j:x.next=j,V.lastBaseUpdate=T))}if(p!==null){var X=d.baseState;b=0,V=j=T=null,x=p;do{var L=x.lane&-536870913,P=L!==x.lane;if(P?(Ot&L)===L:(u&L)===L){L!==0&&L===jr&&(Xh=!0),V!==null&&(V=V.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var ut=n,at=x;L=s;var Ut=l;switch(at.tag){case 1:if(ut=at.payload,typeof ut=="function"){X=ut.call(Ut,X,L);break t}X=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=at.payload,L=typeof ut=="function"?ut.call(Ut,X,L):ut,L==null)break t;X=m({},X,L);break t;case 2:Qn=!0}}L=x.callback,L!==null&&(n.flags|=64,P&&(n.flags|=8192),P=d.callbacks,P===null?d.callbacks=[L]:P.push(L))}else P={lane:L,tag:x.tag,payload:x.payload,callback:x.callback,next:null},V===null?(j=V=P,T=X):V=V.next=P,b|=L;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;P=x,x=P.next,P.next=null,d.lastBaseUpdate=P,d.shared.pending=null}}while(!0);V===null&&(T=X),d.baseState=T,d.firstBaseUpdate=j,d.lastBaseUpdate=V,p===null&&(d.shared.lanes=0),rs|=b,n.lanes=b,n.memoizedState=X}}function lm(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function cm(n,s){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)lm(l[n],s)}var Pr=q(null),Ll=q(0);function um(n,s){n=Mn,K(Ll,n),K(Pr,s),Mn=n|s.baseLanes}function qh(){K(Ll,Mn),K(Pr,Pr.current)}function Gh(){Mn=Ll.current,tt(Pr),tt(Ll)}var Jn=0,pt=null,Pt=null,oe=null,Pl=!1,Br=!1,Vs=!1,Bl=0,ca=0,Ur=null,uw=0;function ee(){throw Error(i(321))}function Ih(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!si(n[l],s[l]))return!1;return!0}function Wh(n,s,l,u,d,p){return Jn=p,pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=n===null||n.memoizedState===null?Im:Wm,Vs=!1,p=l(u,d),Vs=!1,Br&&(p=fm(s,l,u,d)),hm(n),p}function hm(n){H.H=Nl;var s=Pt!==null&&Pt.next!==null;if(Jn=0,oe=Pt=pt=null,Pl=!1,ca=0,Ur=null,s)throw Error(i(300));n===null||ve||(n=n.dependencies,n!==null&&kl(n)&&(ve=!0))}function fm(n,s,l,u){pt=n;var d=0;do{if(Br&&(Ur=null),ca=0,Br=!1,25<=d)throw Error(i(301));if(d+=1,oe=Pt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}H.H=yw,p=s(l,u)}while(Br);return p}function hw(){var n=H.H,s=n.useState()[0];return s=typeof s.then=="function"?ua(s):s,n=n.useState()[0],(Pt!==null?Pt.memoizedState:null)!==n&&(pt.flags|=1024),s}function Qh(){var n=Bl!==0;return Bl=0,n}function Zh(n,s,l){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~l}function Kh(n){if(Pl){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Pl=!1}Jn=0,oe=Pt=pt=null,Br=!1,ca=Bl=0,Ur=null}function Ie(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?pt.memoizedState=oe=n:oe=oe.next=n,oe}function ae(){if(Pt===null){var n=pt.alternate;n=n!==null?n.memoizedState:null}else n=Pt.next;var s=oe===null?pt.memoizedState:oe.next;if(s!==null)oe=s,Pt=n;else{if(n===null)throw pt.alternate===null?Error(i(467)):Error(i(310));Pt=n,n={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},oe===null?pt.memoizedState=oe=n:oe=oe.next=n}return oe}function Jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ua(n){var s=ca;return ca+=1,Ur===null&&(Ur=[]),n=rm(Ur,n,s),s=pt,(oe===null?s.memoizedState:oe.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?Im:Wm),n}function Ul(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ua(n);if(n.$$typeof===Y)return ze(n)}throw Error(i(438,String(n)))}function $h(n){var s=null,l=pt.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var u=pt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Jh(),pt.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(n),u=0;u<n;u++)l[u]=wt;return s.index++,l}function Sn(n,s){return typeof s=="function"?s(n):s}function Fl(n){var s=ae();return tf(s,Pt,n)}function tf(n,s,l){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var d=n.baseQueue,p=u.pending;if(p!==null){if(d!==null){var b=d.next;d.next=p.next,p.next=b}s.baseQueue=d=p,u.pending=null}if(p=n.baseState,d===null)n.memoizedState=p;else{s=d.next;var x=b=null,T=null,j=s,V=!1;do{var X=j.lane&-536870913;if(X!==j.lane?(Ot&X)===X:(Jn&X)===X){var L=j.revertLane;if(L===0)T!==null&&(T=T.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),X===jr&&(V=!0);else if((Jn&L)===L){j=j.next,L===jr&&(V=!0);continue}else X={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},T===null?(x=T=X,b=p):T=T.next=X,pt.lanes|=L,rs|=L;X=j.action,Vs&&l(p,X),p=j.hasEagerState?j.eagerState:l(p,X)}else L={lane:X,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},T===null?(x=T=L,b=p):T=T.next=L,pt.lanes|=X,rs|=X;j=j.next}while(j!==null&&j!==s);if(T===null?b=p:T.next=x,!si(p,n.memoizedState)&&(ve=!0,V&&(l=Lr,l!==null)))throw l;n.memoizedState=p,n.baseState=b,n.baseQueue=T,u.lastRenderedState=p}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function ef(n){var s=ae(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=n;var u=l.dispatch,d=l.pending,p=s.memoizedState;if(d!==null){l.pending=null;var b=d=d.next;do p=n(p,b.action),b=b.next;while(b!==d);si(p,s.memoizedState)||(ve=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),l.lastRenderedState=p}return[p,u]}function dm(n,s,l){var u=pt,d=ae(),p=kt;if(p){if(l===void 0)throw Error(i(407));l=l()}else l=s();var b=!si((Pt||d).memoizedState,l);b&&(d.memoizedState=l,ve=!0),d=d.queue;var x=mm.bind(null,u,d,n);if(ha(2048,8,x,[n]),d.getSnapshot!==s||b||oe!==null&&oe.memoizedState.tag&1){if(u.flags|=2048,Fr(9,Hl(),pm.bind(null,u,d,l,s),null),Yt===null)throw Error(i(349));p||(Jn&124)!==0||gm(u,s,l)}return l}function gm(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=pt.updateQueue,s===null?(s=Jh(),pt.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function pm(n,s,l,u){s.value=l,s.getSnapshot=u,ym(s)&&vm(n)}function mm(n,s,l){return l(function(){ym(s)&&vm(n)})}function ym(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!si(n,l)}catch{return!0}}function vm(n){var s=kr(n,2);s!==null&&ui(s,n,2)}function nf(n){var s=Ie();if(typeof n=="function"){var l=n;if(n=l(),Vs){qn(!0);try{l()}finally{qn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:n},s}function bm(n,s,l,u){return n.baseState=l,tf(n,Pt,typeof u=="function"?u:Sn)}function fw(n,s,l,u,d){if(Vl(n))throw Error(i(485));if(n=s.action,n!==null){var p={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};H.T!==null?l(!0):p.isTransition=!1,u(p),l=s.pending,l===null?(p.next=s.pending=p,_m(s,p)):(p.next=l.next,s.pending=l.next=p)}}function _m(n,s){var l=s.action,u=s.payload,d=n.state;if(s.isTransition){var p=H.T,b={};H.T=b;try{var x=l(d,u),T=H.S;T!==null&&T(b,x),xm(n,s,x)}catch(j){sf(n,s,j)}finally{H.T=p}}else try{p=l(d,u),xm(n,s,p)}catch(j){sf(n,s,j)}}function xm(n,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Sm(n,s,u)},function(u){return sf(n,s,u)}):Sm(n,s,l)}function Sm(n,s,l){s.status="fulfilled",s.value=l,wm(s),n.state=l,s=n.pending,s!==null&&(l=s.next,l===s?n.pending=null:(l=l.next,s.next=l,_m(n,l)))}function sf(n,s,l){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=l,wm(s),s=s.next;while(s!==u)}n.action=null}function wm(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Cm(n,s){return s}function Tm(n,s){if(kt){var l=Yt.formState;if(l!==null){t:{var u=pt;if(kt){if(Kt){e:{for(var d=Kt,p=$i;d.nodeType!==8;){if(!p){d=null;break e}if(d=Bi(d.nextSibling),d===null){d=null;break e}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){Kt=Bi(d.nextSibling),u=d.data==="F!";break t}}Us(u)}u=!1}u&&(s=l[0])}}return l=Ie(),l.memoizedState=l.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cm,lastRenderedState:s},l.queue=u,l=Xm.bind(null,pt,u),u.dispatch=l,u=nf(!1),p=cf.bind(null,pt,!1,u.queue),u=Ie(),d={state:s,dispatch:null,action:n,pending:null},u.queue=d,l=fw.bind(null,pt,d,p,l),d.dispatch=l,u.memoizedState=n,[s,l,!1]}function Om(n){var s=ae();return Dm(s,Pt,n)}function Dm(n,s,l){if(s=tf(n,s,Cm)[0],n=Fl(Sn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=ua(s)}catch(b){throw b===sa?Rl:b}else u=s;s=ae();var d=s.queue,p=d.dispatch;return l!==s.memoizedState&&(pt.flags|=2048,Fr(9,Hl(),dw.bind(null,d,l),null)),[u,p,n]}function dw(n,s){n.action=s}function Mm(n){var s=ae(),l=Pt;if(l!==null)return Dm(s,l,n);ae(),s=s.memoizedState,l=ae();var u=l.queue.dispatch;return l.memoizedState=n,[s,u,!1]}function Fr(n,s,l,u){return n={tag:n,create:l,deps:u,inst:s,next:null},s=pt.updateQueue,s===null&&(s=Jh(),pt.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=n.next=n:(u=l.next,l.next=n,n.next=u,s.lastEffect=n),n}function Hl(){return{destroy:void 0,resource:void 0}}function Em(){return ae().memoizedState}function Yl(n,s,l,u){var d=Ie();u=u===void 0?null:u,pt.flags|=n,d.memoizedState=Fr(1|s,Hl(),l,u)}function ha(n,s,l,u){var d=ae();u=u===void 0?null:u;var p=d.memoizedState.inst;Pt!==null&&u!==null&&Ih(u,Pt.memoizedState.deps)?d.memoizedState=Fr(s,p,l,u):(pt.flags|=n,d.memoizedState=Fr(1|s,p,l,u))}function km(n,s){Yl(8390656,8,n,s)}function Am(n,s){ha(2048,8,n,s)}function zm(n,s){return ha(4,2,n,s)}function Rm(n,s){return ha(4,4,n,s)}function jm(n,s){if(typeof s=="function"){n=n();var l=s(n);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Lm(n,s,l){l=l!=null?l.concat([n]):null,ha(4,4,jm.bind(null,s,n),l)}function rf(){}function Pm(n,s){var l=ae();s=s===void 0?null:s;var u=l.memoizedState;return s!==null&&Ih(s,u[1])?u[0]:(l.memoizedState=[n,s],n)}function Bm(n,s){var l=ae();s=s===void 0?null:s;var u=l.memoizedState;if(s!==null&&Ih(s,u[1]))return u[0];if(u=n(),Vs){qn(!0);try{n()}finally{qn(!1)}}return l.memoizedState=[u,s],u}function of(n,s,l){return l===void 0||(Jn&1073741824)!==0?n.memoizedState=s:(n.memoizedState=l,n=Hy(),pt.lanes|=n,rs|=n,l)}function Um(n,s,l,u){return si(l,s)?l:Pr.current!==null?(n=of(n,l,u),si(n,s)||(ve=!0),n):(Jn&42)===0?(ve=!0,n.memoizedState=l):(n=Hy(),pt.lanes|=n,rs|=n,s)}function Fm(n,s,l,u,d){var p=W.p;W.p=p!==0&&8>p?p:8;var b=H.T,x={};H.T=x,cf(n,!1,s,l);try{var T=d(),j=H.S;if(j!==null&&j(x,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var V=cw(T,u);fa(n,s,V,ci(n))}else fa(n,s,u,ci(n))}catch(X){fa(n,s,{then:function(){},status:"rejected",reason:X},ci())}finally{W.p=p,H.T=b}}function gw(){}function af(n,s,l,u){if(n.tag!==5)throw Error(i(476));var d=Hm(n).queue;Fm(n,d,s,$,l===null?gw:function(){return Ym(n),l(u)})}function Hm(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:$},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:l},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Ym(n){var s=Hm(n).next.queue;fa(n,s,{},ci())}function lf(){return ze(ka)}function Vm(){return ae().memoizedState}function Nm(){return ae().memoizedState}function pw(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var l=ci();n=Zn(l);var u=Kn(s,n,l);u!==null&&(ui(u,s,l),oa(u,s,l)),s={cache:Bh()},n.payload=s;return}s=s.return}}function mw(n,s,l){var u=ci();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Vl(n)?qm(s,l):(l=Dh(n,s,l,u),l!==null&&(ui(l,n,u),Gm(l,s,u)))}function Xm(n,s,l){var u=ci();fa(n,s,l,u)}function fa(n,s,l,u){var d={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Vl(n))qm(s,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var b=s.lastRenderedState,x=p(b,l);if(d.hasEagerState=!0,d.eagerState=x,si(x,b))return Tl(n,s,d,0),Yt===null&&Cl(),!1}catch{}finally{}if(l=Dh(n,s,d,u),l!==null)return ui(l,n,u),Gm(l,s,u),!0}return!1}function cf(n,s,l,u){if(u={lane:2,revertLane:Yf(),action:u,hasEagerState:!1,eagerState:null,next:null},Vl(n)){if(s)throw Error(i(479))}else s=Dh(n,l,u,2),s!==null&&ui(s,n,2)}function Vl(n){var s=n.alternate;return n===pt||s!==null&&s===pt}function qm(n,s){Br=Pl=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Gm(n,s,l){if((l&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,l|=u,s.lanes=l,tp(n,l)}}var Nl={readContext:ze,use:Ul,useCallback:ee,useContext:ee,useEffect:ee,useImperativeHandle:ee,useLayoutEffect:ee,useInsertionEffect:ee,useMemo:ee,useReducer:ee,useRef:ee,useState:ee,useDebugValue:ee,useDeferredValue:ee,useTransition:ee,useSyncExternalStore:ee,useId:ee,useHostTransitionStatus:ee,useFormState:ee,useActionState:ee,useOptimistic:ee,useMemoCache:ee,useCacheRefresh:ee},Im={readContext:ze,use:Ul,useCallback:function(n,s){return Ie().memoizedState=[n,s===void 0?null:s],n},useContext:ze,useEffect:km,useImperativeHandle:function(n,s,l){l=l!=null?l.concat([n]):null,Yl(4194308,4,jm.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Yl(4194308,4,n,s)},useInsertionEffect:function(n,s){Yl(4,2,n,s)},useMemo:function(n,s){var l=Ie();s=s===void 0?null:s;var u=n();if(Vs){qn(!0);try{n()}finally{qn(!1)}}return l.memoizedState=[u,s],u},useReducer:function(n,s,l){var u=Ie();if(l!==void 0){var d=l(s);if(Vs){qn(!0);try{l(s)}finally{qn(!1)}}}else d=s;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=mw.bind(null,pt,n),[u.memoizedState,n]},useRef:function(n){var s=Ie();return n={current:n},s.memoizedState=n},useState:function(n){n=nf(n);var s=n.queue,l=Xm.bind(null,pt,s);return s.dispatch=l,[n.memoizedState,l]},useDebugValue:rf,useDeferredValue:function(n,s){var l=Ie();return of(l,n,s)},useTransition:function(){var n=nf(!1);return n=Fm.bind(null,pt,n.queue,!0,!1),Ie().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,l){var u=pt,d=Ie();if(kt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),Yt===null)throw Error(i(349));(Ot&124)!==0||gm(u,s,l)}d.memoizedState=l;var p={value:l,getSnapshot:s};return d.queue=p,km(mm.bind(null,u,p,n),[n]),u.flags|=2048,Fr(9,Hl(),pm.bind(null,u,p,l,s),null),l},useId:function(){var n=Ie(),s=Yt.identifierPrefix;if(kt){var l=bn,u=vn;l=(u&~(1<<32-ni(u)-1)).toString(32)+l,s="«"+s+"R"+l,l=Bl++,0<l&&(s+="H"+l.toString(32)),s+="»"}else l=uw++,s="«"+s+"r"+l.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:lf,useFormState:Tm,useActionState:Tm,useOptimistic:function(n){var s=Ie();s.memoizedState=s.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=cf.bind(null,pt,!0,l),l.dispatch=s,[n,s]},useMemoCache:$h,useCacheRefresh:function(){return Ie().memoizedState=pw.bind(null,pt)}},Wm={readContext:ze,use:Ul,useCallback:Pm,useContext:ze,useEffect:Am,useImperativeHandle:Lm,useInsertionEffect:zm,useLayoutEffect:Rm,useMemo:Bm,useReducer:Fl,useRef:Em,useState:function(){return Fl(Sn)},useDebugValue:rf,useDeferredValue:function(n,s){var l=ae();return Um(l,Pt.memoizedState,n,s)},useTransition:function(){var n=Fl(Sn)[0],s=ae().memoizedState;return[typeof n=="boolean"?n:ua(n),s]},useSyncExternalStore:dm,useId:Vm,useHostTransitionStatus:lf,useFormState:Om,useActionState:Om,useOptimistic:function(n,s){var l=ae();return bm(l,Pt,n,s)},useMemoCache:$h,useCacheRefresh:Nm},yw={readContext:ze,use:Ul,useCallback:Pm,useContext:ze,useEffect:Am,useImperativeHandle:Lm,useInsertionEffect:zm,useLayoutEffect:Rm,useMemo:Bm,useReducer:ef,useRef:Em,useState:function(){return ef(Sn)},useDebugValue:rf,useDeferredValue:function(n,s){var l=ae();return Pt===null?of(l,n,s):Um(l,Pt.memoizedState,n,s)},useTransition:function(){var n=ef(Sn)[0],s=ae().memoizedState;return[typeof n=="boolean"?n:ua(n),s]},useSyncExternalStore:dm,useId:Vm,useHostTransitionStatus:lf,useFormState:Mm,useActionState:Mm,useOptimistic:function(n,s){var l=ae();return Pt!==null?bm(l,Pt,n,s):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:$h,useCacheRefresh:Nm},Hr=null,da=0;function Xl(n){var s=da;return da+=1,Hr===null&&(Hr=[]),rm(Hr,n,s)}function ga(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function ql(n,s){throw s.$$typeof===y?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Qm(n){var s=n._init;return s(n._payload)}function Zm(n){function s(A,D){if(n){var R=A.deletions;R===null?(A.deletions=[D],A.flags|=16):R.push(D)}}function l(A,D){if(!n)return null;for(;D!==null;)s(A,D),D=D.sibling;return null}function u(A){for(var D=new Map;A!==null;)A.key!==null?D.set(A.key,A):D.set(A.index,A),A=A.sibling;return D}function d(A,D){return A=yn(A,D),A.index=0,A.sibling=null,A}function p(A,D,R){return A.index=R,n?(R=A.alternate,R!==null?(R=R.index,R<D?(A.flags|=67108866,D):R):(A.flags|=67108866,D)):(A.flags|=1048576,D)}function b(A){return n&&A.alternate===null&&(A.flags|=67108866),A}function x(A,D,R,N){return D===null||D.tag!==6?(D=Eh(R,A.mode,N),D.return=A,D):(D=d(D,R),D.return=A,D)}function T(A,D,R,N){var it=R.type;return it===S?V(A,D,R.props.children,N,R.key):D!==null&&(D.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===Z&&Qm(it)===D.type)?(D=d(D,R.props),ga(D,R),D.return=A,D):(D=Dl(R.type,R.key,R.props,null,A.mode,N),ga(D,R),D.return=A,D)}function j(A,D,R,N){return D===null||D.tag!==4||D.stateNode.containerInfo!==R.containerInfo||D.stateNode.implementation!==R.implementation?(D=kh(R,A.mode,N),D.return=A,D):(D=d(D,R.children||[]),D.return=A,D)}function V(A,D,R,N,it){return D===null||D.tag!==7?(D=js(R,A.mode,N,it),D.return=A,D):(D=d(D,R),D.return=A,D)}function X(A,D,R){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Eh(""+D,A.mode,R),D.return=A,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case v:return R=Dl(D.type,D.key,D.props,null,A.mode,R),ga(R,D),R.return=A,R;case _:return D=kh(D,A.mode,R),D.return=A,D;case Z:var N=D._init;return D=N(D._payload),X(A,D,R)}if(Tt(D)||ht(D))return D=js(D,A.mode,R,null),D.return=A,D;if(typeof D.then=="function")return X(A,Xl(D),R);if(D.$$typeof===Y)return X(A,Al(A,D),R);ql(A,D)}return null}function L(A,D,R,N){var it=D!==null?D.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return it!==null?null:x(A,D,""+R,N);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case v:return R.key===it?T(A,D,R,N):null;case _:return R.key===it?j(A,D,R,N):null;case Z:return it=R._init,R=it(R._payload),L(A,D,R,N)}if(Tt(R)||ht(R))return it!==null?null:V(A,D,R,N,null);if(typeof R.then=="function")return L(A,D,Xl(R),N);if(R.$$typeof===Y)return L(A,D,Al(A,R),N);ql(A,R)}return null}function P(A,D,R,N,it){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return A=A.get(R)||null,x(D,A,""+N,it);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case v:return A=A.get(N.key===null?R:N.key)||null,T(D,A,N,it);case _:return A=A.get(N.key===null?R:N.key)||null,j(D,A,N,it);case Z:var vt=N._init;return N=vt(N._payload),P(A,D,R,N,it)}if(Tt(N)||ht(N))return A=A.get(R)||null,V(D,A,N,it,null);if(typeof N.then=="function")return P(A,D,R,Xl(N),it);if(N.$$typeof===Y)return P(A,D,R,Al(D,N),it);ql(D,N)}return null}function ut(A,D,R,N){for(var it=null,vt=null,st=D,lt=D=0,_e=null;st!==null&&lt<R.length;lt++){st.index>lt?(_e=st,st=null):_e=st.sibling;var Et=L(A,st,R[lt],N);if(Et===null){st===null&&(st=_e);break}n&&st&&Et.alternate===null&&s(A,st),D=p(Et,D,lt),vt===null?it=Et:vt.sibling=Et,vt=Et,st=_e}if(lt===R.length)return l(A,st),kt&&Ps(A,lt),it;if(st===null){for(;lt<R.length;lt++)st=X(A,R[lt],N),st!==null&&(D=p(st,D,lt),vt===null?it=st:vt.sibling=st,vt=st);return kt&&Ps(A,lt),it}for(st=u(st);lt<R.length;lt++)_e=P(st,A,lt,R[lt],N),_e!==null&&(n&&_e.alternate!==null&&st.delete(_e.key===null?lt:_e.key),D=p(_e,D,lt),vt===null?it=_e:vt.sibling=_e,vt=_e);return n&&st.forEach(function(gs){return s(A,gs)}),kt&&Ps(A,lt),it}function at(A,D,R,N){if(R==null)throw Error(i(151));for(var it=null,vt=null,st=D,lt=D=0,_e=null,Et=R.next();st!==null&&!Et.done;lt++,Et=R.next()){st.index>lt?(_e=st,st=null):_e=st.sibling;var gs=L(A,st,Et.value,N);if(gs===null){st===null&&(st=_e);break}n&&st&&gs.alternate===null&&s(A,st),D=p(gs,D,lt),vt===null?it=gs:vt.sibling=gs,vt=gs,st=_e}if(Et.done)return l(A,st),kt&&Ps(A,lt),it;if(st===null){for(;!Et.done;lt++,Et=R.next())Et=X(A,Et.value,N),Et!==null&&(D=p(Et,D,lt),vt===null?it=Et:vt.sibling=Et,vt=Et);return kt&&Ps(A,lt),it}for(st=u(st);!Et.done;lt++,Et=R.next())Et=P(st,A,lt,Et.value,N),Et!==null&&(n&&Et.alternate!==null&&st.delete(Et.key===null?lt:Et.key),D=p(Et,D,lt),vt===null?it=Et:vt.sibling=Et,vt=Et);return n&&st.forEach(function(v1){return s(A,v1)}),kt&&Ps(A,lt),it}function Ut(A,D,R,N){if(typeof R=="object"&&R!==null&&R.type===S&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case v:t:{for(var it=R.key;D!==null;){if(D.key===it){if(it=R.type,it===S){if(D.tag===7){l(A,D.sibling),N=d(D,R.props.children),N.return=A,A=N;break t}}else if(D.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===Z&&Qm(it)===D.type){l(A,D.sibling),N=d(D,R.props),ga(N,R),N.return=A,A=N;break t}l(A,D);break}else s(A,D);D=D.sibling}R.type===S?(N=js(R.props.children,A.mode,N,R.key),N.return=A,A=N):(N=Dl(R.type,R.key,R.props,null,A.mode,N),ga(N,R),N.return=A,A=N)}return b(A);case _:t:{for(it=R.key;D!==null;){if(D.key===it)if(D.tag===4&&D.stateNode.containerInfo===R.containerInfo&&D.stateNode.implementation===R.implementation){l(A,D.sibling),N=d(D,R.children||[]),N.return=A,A=N;break t}else{l(A,D);break}else s(A,D);D=D.sibling}N=kh(R,A.mode,N),N.return=A,A=N}return b(A);case Z:return it=R._init,R=it(R._payload),Ut(A,D,R,N)}if(Tt(R))return ut(A,D,R,N);if(ht(R)){if(it=ht(R),typeof it!="function")throw Error(i(150));return R=it.call(R),at(A,D,R,N)}if(typeof R.then=="function")return Ut(A,D,Xl(R),N);if(R.$$typeof===Y)return Ut(A,D,Al(A,R),N);ql(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,D!==null&&D.tag===6?(l(A,D.sibling),N=d(D,R),N.return=A,A=N):(l(A,D),N=Eh(R,A.mode,N),N.return=A,A=N),b(A)):l(A,D)}return function(A,D,R,N){try{da=0;var it=Ut(A,D,R,N);return Hr=null,it}catch(st){if(st===sa||st===Rl)throw st;var vt=ri(29,st,null,A.mode);return vt.lanes=N,vt.return=A,vt}finally{}}}var Yr=Zm(!0),Km=Zm(!1),Si=q(null),tn=null;function $n(n){var s=n.alternate;K(ge,ge.current&1),K(Si,n),tn===null&&(s===null||Pr.current!==null||s.memoizedState!==null)&&(tn=n)}function Jm(n){if(n.tag===22){if(K(ge,ge.current),K(Si,n),tn===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(tn=n)}}else ts()}function ts(){K(ge,ge.current),K(Si,Si.current)}function wn(n){tt(Si),tn===n&&(tn=null),tt(ge)}var ge=q(0);function Gl(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||$f(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function uf(n,s,l,u){s=n.memoizedState,l=l(u,s),l=l==null?s:m({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var hf={enqueueSetState:function(n,s,l){n=n._reactInternals;var u=ci(),d=Zn(u);d.payload=s,l!=null&&(d.callback=l),s=Kn(n,d,u),s!==null&&(ui(s,n,u),oa(s,n,u))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var u=ci(),d=Zn(u);d.tag=1,d.payload=s,l!=null&&(d.callback=l),s=Kn(n,d,u),s!==null&&(ui(s,n,u),oa(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=ci(),u=Zn(l);u.tag=2,s!=null&&(u.callback=s),s=Kn(n,u,l),s!==null&&(ui(s,n,l),oa(s,n,l))}};function $m(n,s,l,u,d,p,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,b):s.prototype&&s.prototype.isPureReactComponent?!Zo(l,u)||!Zo(d,p):!0}function ty(n,s,l,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==n&&hf.enqueueReplaceState(s,s.state,null)}function Ns(n,s){var l=s;if("ref"in s){l={};for(var u in s)u!=="ref"&&(l[u]=s[u])}if(n=n.defaultProps){l===s&&(l=m({},l));for(var d in n)l[d]===void 0&&(l[d]=n[d])}return l}var Il=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function ey(n){Il(n)}function iy(n){console.error(n)}function ny(n){Il(n)}function Wl(n,s){try{var l=n.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function sy(n,s,l){try{var u=n.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function ff(n,s,l){return l=Zn(l),l.tag=3,l.payload={element:null},l.callback=function(){Wl(n,s)},l}function ry(n){return n=Zn(n),n.tag=3,n}function oy(n,s,l,u){var d=l.type.getDerivedStateFromError;if(typeof d=="function"){var p=u.value;n.payload=function(){return d(p)},n.callback=function(){sy(s,l,u)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){sy(s,l,u),typeof d!="function"&&(os===null?os=new Set([this]):os.add(this));var x=u.stack;this.componentDidCatch(u.value,{componentStack:x!==null?x:""})})}function vw(n,s,l,u,d){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=l.alternate,s!==null&&ea(s,l,d,!0),l=Si.current,l!==null){switch(l.tag){case 13:return tn===null?Pf():l.alternate===null&&Jt===0&&(Jt=3),l.flags&=-257,l.flags|=65536,l.lanes=d,u===Hh?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([u]):s.add(u),Uf(n,u,d)),!1;case 22:return l.flags|=65536,u===Hh?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([u]):l.add(u)),Uf(n,u,d)),!1}throw Error(i(435,l.tag))}return Uf(n,u,d),Pf(),!1}if(kt)return s=Si.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Rh&&(n=Error(i(422),{cause:u}),ta(vi(n,l)))):(u!==Rh&&(s=Error(i(423),{cause:u}),ta(vi(s,l))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=vi(u,l),d=ff(n.stateNode,u,d),Nh(n,d),Jt!==4&&(Jt=2)),!1;var p=Error(i(520),{cause:u});if(p=vi(p,l),xa===null?xa=[p]:xa.push(p),Jt!==4&&(Jt=2),s===null)return!0;u=vi(u,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,n=d&-d,l.lanes|=n,n=ff(l.stateNode,u,n),Nh(l,n),!1;case 1:if(s=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(os===null||!os.has(p))))return l.flags|=65536,d&=-d,l.lanes|=d,d=ry(d),oy(d,n,l,u),Nh(l,d),!1}l=l.return}while(l!==null);return!1}var ay=Error(i(461)),ve=!1;function Se(n,s,l,u){s.child=n===null?Km(s,null,l,u):Yr(s,n.child,l,u)}function ly(n,s,l,u,d){l=l.render;var p=s.ref;if("ref"in u){var b={};for(var x in u)x!=="ref"&&(b[x]=u[x])}else b=u;return Hs(s),u=Wh(n,s,l,b,p,d),x=Qh(),n!==null&&!ve?(Zh(n,s,d),Cn(n,s,d)):(kt&&x&&Ah(s),s.flags|=1,Se(n,s,u,d),s.child)}function cy(n,s,l,u,d){if(n===null){var p=l.type;return typeof p=="function"&&!Mh(p)&&p.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=p,uy(n,s,p,u,d)):(n=Dl(l.type,null,u,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!_f(n,d)){var b=p.memoizedProps;if(l=l.compare,l=l!==null?l:Zo,l(b,u)&&n.ref===s.ref)return Cn(n,s,d)}return s.flags|=1,n=yn(p,u),n.ref=s.ref,n.return=s,s.child=n}function uy(n,s,l,u,d){if(n!==null){var p=n.memoizedProps;if(Zo(p,u)&&n.ref===s.ref)if(ve=!1,s.pendingProps=u=p,_f(n,d))(n.flags&131072)!==0&&(ve=!0);else return s.lanes=n.lanes,Cn(n,s,d)}return df(n,s,l,u,d)}function hy(n,s,l){var u=s.pendingProps,d=u.children,p=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|l:l,n!==null){for(d=s.child=n.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return fy(n,s,u,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&zl(s,p!==null?p.cachePool:null),p!==null?um(s,p):qh(),Jm(s);else return s.lanes=s.childLanes=536870912,fy(n,s,p!==null?p.baseLanes|l:l,l)}else p!==null?(zl(s,p.cachePool),um(s,p),ts(),s.memoizedState=null):(n!==null&&zl(s,null),qh(),ts());return Se(n,s,d,l),s.child}function fy(n,s,l,u){var d=Fh();return d=d===null?null:{parent:de._currentValue,pool:d},s.memoizedState={baseLanes:l,cachePool:d},n!==null&&zl(s,null),qh(),Jm(s),n!==null&&ea(n,s,u,!0),null}function Ql(n,s){var l=s.ref;if(l===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(n===null||n.ref!==l)&&(s.flags|=4194816)}}function df(n,s,l,u,d){return Hs(s),l=Wh(n,s,l,u,void 0,d),u=Qh(),n!==null&&!ve?(Zh(n,s,d),Cn(n,s,d)):(kt&&u&&Ah(s),s.flags|=1,Se(n,s,l,d),s.child)}function dy(n,s,l,u,d,p){return Hs(s),s.updateQueue=null,l=fm(s,u,l,d),hm(n),u=Qh(),n!==null&&!ve?(Zh(n,s,p),Cn(n,s,p)):(kt&&u&&Ah(s),s.flags|=1,Se(n,s,l,p),s.child)}function gy(n,s,l,u,d){if(Hs(s),s.stateNode===null){var p=Ar,b=l.contextType;typeof b=="object"&&b!==null&&(p=ze(b)),p=new l(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=hf,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Yh(s),b=l.contextType,p.context=typeof b=="object"&&b!==null?ze(b):Ar,p.state=s.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(uf(s,l,b,u),p.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&hf.enqueueReplaceState(p,p.state,null),la(s,u,p,d),aa(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){p=s.stateNode;var x=s.memoizedProps,T=Ns(l,x);p.props=T;var j=p.context,V=l.contextType;b=Ar,typeof V=="object"&&V!==null&&(b=ze(V));var X=l.getDerivedStateFromProps;V=typeof X=="function"||typeof p.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,V||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x||j!==b)&&ty(s,p,u,b),Qn=!1;var L=s.memoizedState;p.state=L,la(s,u,p,d),aa(),j=s.memoizedState,x||L!==j||Qn?(typeof X=="function"&&(uf(s,l,X,u),j=s.memoizedState),(T=Qn||$m(s,l,T,u,L,j,b))?(V||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=j),p.props=u,p.state=j,p.context=b,u=T):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Vh(n,s),b=s.memoizedProps,V=Ns(l,b),p.props=V,X=s.pendingProps,L=p.context,j=l.contextType,T=Ar,typeof j=="object"&&j!==null&&(T=ze(j)),x=l.getDerivedStateFromProps,(j=typeof x=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==X||L!==T)&&ty(s,p,u,T),Qn=!1,L=s.memoizedState,p.state=L,la(s,u,p,d),aa();var P=s.memoizedState;b!==X||L!==P||Qn||n!==null&&n.dependencies!==null&&kl(n.dependencies)?(typeof x=="function"&&(uf(s,l,x,u),P=s.memoizedState),(V=Qn||$m(s,l,V,u,L,P,T)||n!==null&&n.dependencies!==null&&kl(n.dependencies))?(j||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,P,T),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,P,T)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&L===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&L===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=P),p.props=u,p.state=P,p.context=T,u=V):(typeof p.componentDidUpdate!="function"||b===n.memoizedProps&&L===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&L===n.memoizedState||(s.flags|=1024),u=!1)}return p=u,Ql(n,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&u?(s.child=Yr(s,n.child,null,d),s.child=Yr(s,null,l,d)):Se(n,s,l,d),s.memoizedState=p.state,n=s.child):n=Cn(n,s,d),n}function py(n,s,l,u){return $o(),s.flags|=256,Se(n,s,l,u),s.child}var gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pf(n){return{baseLanes:n,cachePool:im()}}function mf(n,s,l){return n=n!==null?n.childLanes&~l:0,s&&(n|=wi),n}function my(n,s,l){var u=s.pendingProps,d=!1,p=(s.flags&128)!==0,b;if((b=p)||(b=n!==null&&n.memoizedState===null?!1:(ge.current&2)!==0),b&&(d=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,n===null){if(kt){if(d?$n(s):ts(),kt){var x=Kt,T;if(T=x){t:{for(T=x,x=$i;T.nodeType!==8;){if(!x){x=null;break t}if(T=Bi(T.nextSibling),T===null){x=null;break t}}x=T}x!==null?(s.memoizedState={dehydrated:x,treeContext:Ls!==null?{id:vn,overflow:bn}:null,retryLane:536870912,hydrationErrors:null},T=ri(18,null,null,0),T.stateNode=x,T.return=s,s.child=T,Ue=s,Kt=null,T=!0):T=!1}T||Us(s)}if(x=s.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return $f(x)?s.lanes=32:s.lanes=536870912,null;wn(s)}return x=u.children,u=u.fallback,d?(ts(),d=s.mode,x=Zl({mode:"hidden",children:x},d),u=js(u,d,l,null),x.return=s,u.return=s,x.sibling=u,s.child=x,d=s.child,d.memoizedState=pf(l),d.childLanes=mf(n,b,l),s.memoizedState=gf,u):($n(s),yf(s,x))}if(T=n.memoizedState,T!==null&&(x=T.dehydrated,x!==null)){if(p)s.flags&256?($n(s),s.flags&=-257,s=vf(n,s,l)):s.memoizedState!==null?(ts(),s.child=n.child,s.flags|=128,s=null):(ts(),d=u.fallback,x=s.mode,u=Zl({mode:"visible",children:u.children},x),d=js(d,x,l,null),d.flags|=2,u.return=s,d.return=s,u.sibling=d,s.child=u,Yr(s,n.child,null,l),u=s.child,u.memoizedState=pf(l),u.childLanes=mf(n,b,l),s.memoizedState=gf,s=d);else if($n(s),$f(x)){if(b=x.nextSibling&&x.nextSibling.dataset,b)var j=b.dgst;b=j,u=Error(i(419)),u.stack="",u.digest=b,ta({value:u,source:null,stack:null}),s=vf(n,s,l)}else if(ve||ea(n,s,l,!1),b=(l&n.childLanes)!==0,ve||b){if(b=Yt,b!==null&&(u=l&-l,u=(u&42)!==0?1:$u(u),u=(u&(b.suspendedLanes|l))!==0?0:u,u!==0&&u!==T.retryLane))throw T.retryLane=u,kr(n,u),ui(b,n,u),ay;x.data==="$?"||Pf(),s=vf(n,s,l)}else x.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=T.treeContext,Kt=Bi(x.nextSibling),Ue=s,kt=!0,Bs=null,$i=!1,n!==null&&(_i[xi++]=vn,_i[xi++]=bn,_i[xi++]=Ls,vn=n.id,bn=n.overflow,Ls=s),s=yf(s,u.children),s.flags|=4096);return s}return d?(ts(),d=u.fallback,x=s.mode,T=n.child,j=T.sibling,u=yn(T,{mode:"hidden",children:u.children}),u.subtreeFlags=T.subtreeFlags&65011712,j!==null?d=yn(j,d):(d=js(d,x,l,null),d.flags|=2),d.return=s,u.return=s,u.sibling=d,s.child=u,u=d,d=s.child,x=n.child.memoizedState,x===null?x=pf(l):(T=x.cachePool,T!==null?(j=de._currentValue,T=T.parent!==j?{parent:j,pool:j}:T):T=im(),x={baseLanes:x.baseLanes|l,cachePool:T}),d.memoizedState=x,d.childLanes=mf(n,b,l),s.memoizedState=gf,u):($n(s),l=n.child,n=l.sibling,l=yn(l,{mode:"visible",children:u.children}),l.return=s,l.sibling=null,n!==null&&(b=s.deletions,b===null?(s.deletions=[n],s.flags|=16):b.push(n)),s.child=l,s.memoizedState=null,l)}function yf(n,s){return s=Zl({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Zl(n,s){return n=ri(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function vf(n,s,l){return Yr(s,n.child,null,l),n=yf(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function yy(n,s,l){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Lh(n.return,s,l)}function bf(n,s,l,u,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:d}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=l,p.tailMode=d)}function vy(n,s,l){var u=s.pendingProps,d=u.revealOrder,p=u.tail;if(Se(n,s,u.children,l),u=ge.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&yy(n,l,s);else if(n.tag===19)yy(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(K(ge,u),d){case"forwards":for(l=s.child,d=null;l!==null;)n=l.alternate,n!==null&&Gl(n)===null&&(d=l),l=l.sibling;l=d,l===null?(d=s.child,s.child=null):(d=l.sibling,l.sibling=null),bf(s,!1,d,l,p);break;case"backwards":for(l=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Gl(n)===null){s.child=d;break}n=d.sibling,d.sibling=l,l=d,d=n}bf(s,!0,l,null,p);break;case"together":bf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Cn(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),rs|=s.lanes,(l&s.childLanes)===0)if(n!==null){if(ea(n,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,l=yn(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=yn(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function _f(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&kl(n)))}function bw(n,s,l){switch(s.tag){case 3:Ht(s,s.stateNode.containerInfo),Wn(s,de,n.memoizedState.cache),$o();break;case 27:case 5:pi(s);break;case 4:Ht(s,s.stateNode.containerInfo);break;case 10:Wn(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?($n(s),s.flags|=128,null):(l&s.child.childLanes)!==0?my(n,s,l):($n(s),n=Cn(n,s,l),n!==null?n.sibling:null);$n(s);break;case 19:var d=(n.flags&128)!==0;if(u=(l&s.childLanes)!==0,u||(ea(n,s,l,!1),u=(l&s.childLanes)!==0),d){if(u)return vy(n,s,l);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),K(ge,ge.current),u)break;return null;case 22:case 23:return s.lanes=0,hy(n,s,l);case 24:Wn(s,de,n.memoizedState.cache)}return Cn(n,s,l)}function by(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps)ve=!0;else{if(!_f(n,l)&&(s.flags&128)===0)return ve=!1,bw(n,s,l);ve=(n.flags&131072)!==0}else ve=!1,kt&&(s.flags&1048576)!==0&&Qp(s,El,s.index);switch(s.lanes=0,s.tag){case 16:t:{n=s.pendingProps;var u=s.elementType,d=u._init;if(u=d(u._payload),s.type=u,typeof u=="function")Mh(u)?(n=Ns(u,n),s.tag=1,s=gy(null,s,u,n,l)):(s.tag=0,s=df(null,s,u,n,l));else{if(u!=null){if(d=u.$$typeof,d===U){s.tag=11,s=ly(null,s,u,n,l);break t}else if(d===J){s.tag=14,s=cy(null,s,u,n,l);break t}}throw s=dt(u)||u,Error(i(306,s,""))}}return s;case 0:return df(n,s,s.type,s.pendingProps,l);case 1:return u=s.type,d=Ns(u,s.pendingProps),gy(n,s,u,d,l);case 3:t:{if(Ht(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var p=s.memoizedState;d=p.element,Vh(n,s),la(s,u,null,l);var b=s.memoizedState;if(u=b.cache,Wn(s,de,u),u!==p.cache&&Ph(s,[de],l,!0),aa(),u=b.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=py(n,s,u,l);break t}else if(u!==d){d=vi(Error(i(424)),s),ta(d),s=py(n,s,u,l);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Kt=Bi(n.firstChild),Ue=s,kt=!0,Bs=null,$i=!0,l=Km(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if($o(),u===d){s=Cn(n,s,l);break t}Se(n,s,u,l)}s=s.child}return s;case 26:return Ql(n,s),n===null?(l=wv(s.type,null,s.pendingProps,null))?s.memoizedState=l:kt||(l=s.type,n=s.pendingProps,u=uc(ot.current).createElement(l),u[Ae]=s,u[qe]=n,Ce(u,l,n),ye(u),s.stateNode=u):s.memoizedState=wv(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return pi(s),n===null&&kt&&(u=s.stateNode=_v(s.type,s.pendingProps,ot.current),Ue=s,$i=!0,d=Kt,cs(s.type)?(td=d,Kt=Bi(u.firstChild)):Kt=d),Se(n,s,s.pendingProps.children,l),Ql(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&kt&&((d=u=Kt)&&(u=Iw(u,s.type,s.pendingProps,$i),u!==null?(s.stateNode=u,Ue=s,Kt=Bi(u.firstChild),$i=!1,d=!0):d=!1),d||Us(s)),pi(s),d=s.type,p=s.pendingProps,b=n!==null?n.memoizedProps:null,u=p.children,Zf(d,p)?u=null:b!==null&&Zf(d,b)&&(s.flags|=32),s.memoizedState!==null&&(d=Wh(n,s,hw,null,null,l),ka._currentValue=d),Ql(n,s),Se(n,s,u,l),s.child;case 6:return n===null&&kt&&((n=l=Kt)&&(l=Ww(l,s.pendingProps,$i),l!==null?(s.stateNode=l,Ue=s,Kt=null,n=!0):n=!1),n||Us(s)),null;case 13:return my(n,s,l);case 4:return Ht(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Yr(s,null,u,l):Se(n,s,u,l),s.child;case 11:return ly(n,s,s.type,s.pendingProps,l);case 7:return Se(n,s,s.pendingProps,l),s.child;case 8:return Se(n,s,s.pendingProps.children,l),s.child;case 12:return Se(n,s,s.pendingProps.children,l),s.child;case 10:return u=s.pendingProps,Wn(s,s.type,u.value),Se(n,s,u.children,l),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Hs(s),d=ze(d),u=u(d),s.flags|=1,Se(n,s,u,l),s.child;case 14:return cy(n,s,s.type,s.pendingProps,l);case 15:return uy(n,s,s.type,s.pendingProps,l);case 19:return vy(n,s,l);case 31:return u=s.pendingProps,l=s.mode,u={mode:u.mode,children:u.children},n===null?(l=Zl(u,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=yn(n.child,u),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return hy(n,s,l);case 24:return Hs(s),u=ze(de),n===null?(d=Fh(),d===null&&(d=Yt,p=Bh(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=l),d=p),s.memoizedState={parent:u,cache:d},Yh(s),Wn(s,de,d)):((n.lanes&l)!==0&&(Vh(n,s),la(s,null,null,l),aa()),d=n.memoizedState,p=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Wn(s,de,u)):(u=p.cache,Wn(s,de,u),u!==d.cache&&Ph(s,[de],l,!0))),Se(n,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Tn(n){n.flags|=4}function _y(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Mv(s)){if(s=Si.current,s!==null&&((Ot&4194048)===Ot?tn!==null:(Ot&62914560)!==Ot&&(Ot&536870912)===0||s!==tn))throw ra=Hh,nm;n.flags|=8192}}function Kl(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Jg():536870912,n.lanes|=s,qr|=s)}function pa(n,s){if(!kt)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Wt(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,u=0;if(s)for(var d=n.child;d!==null;)l|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)l|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=l,s}function _w(n,s,l){var u=s.pendingProps;switch(zh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(s),null;case 1:return Wt(s),null;case 3:return l=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),xn(de),gi(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Jo(s)?Tn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jp())),Wt(s),null;case 26:return l=s.memoizedState,n===null?(Tn(s),l!==null?(Wt(s),_y(s,l)):(Wt(s),s.flags&=-16777217)):l?l!==n.memoizedState?(Tn(s),Wt(s),_y(s,l)):(Wt(s),s.flags&=-16777217):(n.memoizedProps!==u&&Tn(s),Wt(s),s.flags&=-16777217),null;case 27:ll(s),l=ot.current;var d=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Tn(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Wt(s),null}n=nt.current,Jo(s)?Zp(s):(n=_v(d,u,l),s.stateNode=n,Tn(s))}return Wt(s),null;case 5:if(ll(s),l=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Tn(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Wt(s),null}if(n=nt.current,Jo(s))Zp(s);else{switch(d=uc(ot.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?d.createElement("select",{is:u.is}):d.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?d.createElement(l,{is:u.is}):d.createElement(l)}}n[Ae]=s,n[qe]=u;t:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break t;for(;d.sibling===null;){if(d.return===null||d.return===s)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=n;t:switch(Ce(n,l,u),l){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Tn(s)}}return Wt(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Tn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=ot.current,Jo(s)){if(n=s.stateNode,l=s.memoizedProps,u=null,d=Ue,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[Ae]=s,n=!!(n.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||dv(n.nodeValue,l)),n||Us(s)}else n=uc(n).createTextNode(u),n[Ae]=s,s.stateNode=n}return Wt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Jo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Ae]=s}else $o(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Wt(s),d=!1}else d=Jp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(wn(s),s):(wn(s),null)}if(wn(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=u!==null,n=n!==null&&n.memoizedState!==null,l){u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==d&&(u.flags|=2048)}return l!==n&&l&&(s.child.flags|=8192),Kl(s,s.updateQueue),Wt(s),null;case 4:return gi(),n===null&&qf(s.stateNode.containerInfo),Wt(s),null;case 10:return xn(s.type),Wt(s),null;case 19:if(tt(ge),d=s.memoizedState,d===null)return Wt(s),null;if(u=(s.flags&128)!==0,p=d.rendering,p===null)if(u)pa(d,!1);else{if(Jt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=Gl(n),p!==null){for(s.flags|=128,pa(d,!1),n=p.updateQueue,s.updateQueue=n,Kl(s,n),s.subtreeFlags=0,n=l,l=s.child;l!==null;)Wp(l,n),l=l.sibling;return K(ge,ge.current&1|2),s.child}n=n.sibling}d.tail!==null&&Ji()>tc&&(s.flags|=128,u=!0,pa(d,!1),s.lanes=4194304)}else{if(!u)if(n=Gl(p),n!==null){if(s.flags|=128,u=!0,n=n.updateQueue,s.updateQueue=n,Kl(s,n),pa(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!kt)return Wt(s),null}else 2*Ji()-d.renderingStartTime>tc&&l!==536870912&&(s.flags|=128,u=!0,pa(d,!1),s.lanes=4194304);d.isBackwards?(p.sibling=s.child,s.child=p):(n=d.last,n!==null?n.sibling=p:s.child=p,d.last=p)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Ji(),s.sibling=null,n=ge.current,K(ge,u?n&1|2:n&1),s):(Wt(s),null);case 22:case 23:return wn(s),Gh(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(l&536870912)!==0&&(s.flags&128)===0&&(Wt(s),s.subtreeFlags&6&&(s.flags|=8192)):Wt(s),l=s.updateQueue,l!==null&&Kl(s,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048),n!==null&&tt(Ys),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),xn(de),Wt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function xw(n,s){switch(zh(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return xn(de),gi(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return ll(s),null;case 13:if(wn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));$o()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(ge),null;case 4:return gi(),null;case 10:return xn(s.type),null;case 22:case 23:return wn(s),Gh(),n!==null&&tt(Ys),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return xn(de),null;case 25:return null;default:return null}}function xy(n,s){switch(zh(s),s.tag){case 3:xn(de),gi();break;case 26:case 27:case 5:ll(s);break;case 4:gi();break;case 13:wn(s);break;case 19:tt(ge);break;case 10:xn(s.type);break;case 22:case 23:wn(s),Gh(),n!==null&&tt(Ys);break;case 24:xn(de)}}function ma(n,s){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var d=u.next;l=d;do{if((l.tag&n)===n){u=void 0;var p=l.create,b=l.inst;u=p(),b.destroy=u}l=l.next}while(l!==d)}}catch(x){Ft(s,s.return,x)}}function es(n,s,l){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&n)===n){var b=u.inst,x=b.destroy;if(x!==void 0){b.destroy=void 0,d=s;var T=l,j=x;try{j()}catch(V){Ft(d,T,V)}}}u=u.next}while(u!==p)}}catch(V){Ft(s,s.return,V)}}function Sy(n){var s=n.updateQueue;if(s!==null){var l=n.stateNode;try{cm(s,l)}catch(u){Ft(n,n.return,u)}}}function wy(n,s,l){l.props=Ns(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(u){Ft(n,s,u)}}function ya(n,s){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof l=="function"?n.refCleanup=l(u):l.current=u}}catch(d){Ft(n,s,d)}}function en(n,s){var l=n.ref,u=n.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(d){Ft(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(d){Ft(n,s,d)}else l.current=null}function Cy(n){var s=n.type,l=n.memoizedProps,u=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(d){Ft(n,n.return,d)}}function xf(n,s,l){try{var u=n.stateNode;Vw(u,n.type,l,s),u[qe]=s}catch(d){Ft(n,n.return,d)}}function Ty(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&cs(n.type)||n.tag===4}function Sf(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Ty(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&cs(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wf(n,s,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(n),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=cc));else if(u!==4&&(u===27&&cs(n.type)&&(l=n.stateNode,s=null),n=n.child,n!==null))for(wf(n,s,l),n=n.sibling;n!==null;)wf(n,s,l),n=n.sibling}function Jl(n,s,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(u!==4&&(u===27&&cs(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Jl(n,s,l),n=n.sibling;n!==null;)Jl(n,s,l),n=n.sibling}function Oy(n){var s=n.stateNode,l=n.memoizedProps;try{for(var u=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Ce(s,u,l),s[Ae]=n,s[qe]=l}catch(p){Ft(n,n.return,p)}}var On=!1,ie=!1,Cf=!1,Dy=typeof WeakSet=="function"?WeakSet:Set,be=null;function Sw(n,s){if(n=n.containerInfo,Wf=mc,n=Up(n),xh(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else t:{l=(l=n.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var b=0,x=-1,T=-1,j=0,V=0,X=n,L=null;e:for(;;){for(var P;X!==l||d!==0&&X.nodeType!==3||(x=b+d),X!==p||u!==0&&X.nodeType!==3||(T=b+u),X.nodeType===3&&(b+=X.nodeValue.length),(P=X.firstChild)!==null;)L=X,X=P;for(;;){if(X===n)break e;if(L===l&&++j===d&&(x=b),L===p&&++V===u&&(T=b),(P=X.nextSibling)!==null)break;X=L,L=X.parentNode}X=P}l=x===-1||T===-1?null:{start:x,end:T}}else l=null}l=l||{start:0,end:0}}else l=null;for(Qf={focusedElem:n,selectionRange:l},mc=!1,be=s;be!==null;)if(s=be,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,be=n;else for(;be!==null;){switch(s=be,p=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,l=s,d=p.memoizedProps,p=p.memoizedState,u=l.stateNode;try{var ut=Ns(l.type,d,l.elementType===l.type);n=u.getSnapshotBeforeUpdate(ut,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(at){Ft(l,l.return,at)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,l=n.nodeType,l===9)Jf(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Jf(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,be=n;break}be=s.return}}function My(n,s,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:is(n,l),u&4&&ma(5,l);break;case 1:if(is(n,l),u&4)if(n=l.stateNode,s===null)try{n.componentDidMount()}catch(b){Ft(l,l.return,b)}else{var d=Ns(l.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(b){Ft(l,l.return,b)}}u&64&&Sy(l),u&512&&ya(l,l.return);break;case 3:if(is(n,l),u&64&&(n=l.updateQueue,n!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{cm(n,s)}catch(b){Ft(l,l.return,b)}}break;case 27:s===null&&u&4&&Oy(l);case 26:case 5:is(n,l),s===null&&u&4&&Cy(l),u&512&&ya(l,l.return);break;case 12:is(n,l);break;case 13:is(n,l),u&4&&Ay(n,l),u&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=Aw.bind(null,l),Qw(n,l))));break;case 22:if(u=l.memoizedState!==null||On,!u){s=s!==null&&s.memoizedState!==null||ie,d=On;var p=ie;On=u,(ie=s)&&!p?ns(n,l,(l.subtreeFlags&8772)!==0):is(n,l),On=d,ie=p}break;case 30:break;default:is(n,l)}}function Ey(n){var s=n.alternate;s!==null&&(n.alternate=null,Ey(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ih(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Gt=null,We=!1;function Dn(n,s,l){for(l=l.child;l!==null;)ky(n,s,l),l=l.sibling}function ky(n,s,l){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(Uo,l)}catch{}switch(l.tag){case 26:ie||en(l,s),Dn(n,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ie||en(l,s);var u=Gt,d=We;cs(l.type)&&(Gt=l.stateNode,We=!1),Dn(n,s,l),Oa(l.stateNode),Gt=u,We=d;break;case 5:ie||en(l,s);case 6:if(u=Gt,d=We,Gt=null,Dn(n,s,l),Gt=u,We=d,Gt!==null)if(We)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(l.stateNode)}catch(p){Ft(l,s,p)}else try{Gt.removeChild(l.stateNode)}catch(p){Ft(l,s,p)}break;case 18:Gt!==null&&(We?(n=Gt,vv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),ja(n)):vv(Gt,l.stateNode));break;case 4:u=Gt,d=We,Gt=l.stateNode.containerInfo,We=!0,Dn(n,s,l),Gt=u,We=d;break;case 0:case 11:case 14:case 15:ie||es(2,l,s),ie||es(4,l,s),Dn(n,s,l);break;case 1:ie||(en(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"&&wy(l,s,u)),Dn(n,s,l);break;case 21:Dn(n,s,l);break;case 22:ie=(u=ie)||l.memoizedState!==null,Dn(n,s,l),ie=u;break;default:Dn(n,s,l)}}function Ay(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ja(n)}catch(l){Ft(s,s.return,l)}}function ww(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Dy),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Dy),s;default:throw Error(i(435,n.tag))}}function Tf(n,s){var l=ww(n);s.forEach(function(u){var d=zw.bind(null,n,u);l.has(u)||(l.add(u),u.then(d,d))})}function oi(n,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var d=l[u],p=n,b=s,x=b;t:for(;x!==null;){switch(x.tag){case 27:if(cs(x.type)){Gt=x.stateNode,We=!1;break t}break;case 5:Gt=x.stateNode,We=!1;break t;case 3:case 4:Gt=x.stateNode.containerInfo,We=!0;break t}x=x.return}if(Gt===null)throw Error(i(160));ky(p,b,d),Gt=null,We=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)zy(s,n),s=s.sibling}var Pi=null;function zy(n,s){var l=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:oi(s,n),ai(n),u&4&&(es(3,n,n.return),ma(3,n),es(5,n,n.return));break;case 1:oi(s,n),ai(n),u&512&&(ie||l===null||en(l,l.return)),u&64&&On&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var d=Pi;if(oi(s,n),ai(n),u&512&&(ie||l===null||en(l,l.return)),u&4){var p=l!==null?l.memoizedState:null;if(u=n.memoizedState,l===null)if(u===null)if(n.stateNode===null){t:{u=n.type,l=n.memoizedProps,d=d.ownerDocument||d;e:switch(u){case"title":p=d.getElementsByTagName("title")[0],(!p||p[Yo]||p[Ae]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(u),d.head.insertBefore(p,d.querySelector("head > title"))),Ce(p,u,l),p[Ae]=n,ye(p),u=p;break t;case"link":var b=Ov("link","href",d).get(u+(l.href||""));if(b){for(var x=0;x<b.length;x++)if(p=b[x],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(x,1);break e}}p=d.createElement(u),Ce(p,u,l),d.head.appendChild(p);break;case"meta":if(b=Ov("meta","content",d).get(u+(l.content||""))){for(x=0;x<b.length;x++)if(p=b[x],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(x,1);break e}}p=d.createElement(u),Ce(p,u,l),d.head.appendChild(p);break;default:throw Error(i(468,u))}p[Ae]=n,ye(p),u=p}n.stateNode=u}else Dv(d,n.type,n.stateNode);else n.stateNode=Tv(d,u,n.memoizedProps);else p!==u?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,u===null?Dv(d,n.type,n.stateNode):Tv(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&xf(n,n.memoizedProps,l.memoizedProps)}break;case 27:oi(s,n),ai(n),u&512&&(ie||l===null||en(l,l.return)),l!==null&&u&4&&xf(n,n.memoizedProps,l.memoizedProps);break;case 5:if(oi(s,n),ai(n),u&512&&(ie||l===null||en(l,l.return)),n.flags&32){d=n.stateNode;try{wr(d,"")}catch(P){Ft(n,n.return,P)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,xf(n,d,l!==null?l.memoizedProps:d)),u&1024&&(Cf=!0);break;case 6:if(oi(s,n),ai(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,l=n.stateNode;try{l.nodeValue=u}catch(P){Ft(n,n.return,P)}}break;case 3:if(dc=null,d=Pi,Pi=hc(s.containerInfo),oi(s,n),Pi=d,ai(n),u&4&&l!==null&&l.memoizedState.isDehydrated)try{ja(s.containerInfo)}catch(P){Ft(n,n.return,P)}Cf&&(Cf=!1,Ry(n));break;case 4:u=Pi,Pi=hc(n.stateNode.containerInfo),oi(s,n),ai(n),Pi=u;break;case 12:oi(s,n),ai(n);break;case 13:oi(s,n),ai(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Af=Ji()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Tf(n,u)));break;case 22:d=n.memoizedState!==null;var T=l!==null&&l.memoizedState!==null,j=On,V=ie;if(On=j||d,ie=V||T,oi(s,n),ie=V,On=j,ai(n),u&8192)t:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(l===null||T||On||ie||Xs(n)),l=null,s=n;;){if(s.tag===5||s.tag===26){if(l===null){T=l=s;try{if(p=T.stateNode,d)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{x=T.stateNode;var X=T.memoizedProps.style,L=X!=null&&X.hasOwnProperty("display")?X.display:null;x.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(P){Ft(T,T.return,P)}}}else if(s.tag===6){if(l===null){T=s;try{T.stateNode.nodeValue=d?"":T.memoizedProps}catch(P){Ft(T,T.return,P)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Tf(n,l))));break;case 19:oi(s,n),ai(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Tf(n,u)));break;case 30:break;case 21:break;default:oi(s,n),ai(n)}}function ai(n){var s=n.flags;if(s&2){try{for(var l,u=n.return;u!==null;){if(Ty(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var d=l.stateNode,p=Sf(n);Jl(n,p,d);break;case 5:var b=l.stateNode;l.flags&32&&(wr(b,""),l.flags&=-33);var x=Sf(n);Jl(n,x,b);break;case 3:case 4:var T=l.stateNode.containerInfo,j=Sf(n);wf(n,j,T);break;default:throw Error(i(161))}}catch(V){Ft(n,n.return,V)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Ry(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Ry(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function is(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)My(n,s.alternate,s),s=s.sibling}function Xs(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:es(4,s,s.return),Xs(s);break;case 1:en(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&wy(s,s.return,l),Xs(s);break;case 27:Oa(s.stateNode);case 26:case 5:en(s,s.return),Xs(s);break;case 22:s.memoizedState===null&&Xs(s);break;case 30:Xs(s);break;default:Xs(s)}n=n.sibling}}function ns(n,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=n,p=s,b=p.flags;switch(p.tag){case 0:case 11:case 15:ns(d,p,l),ma(4,p);break;case 1:if(ns(d,p,l),u=p,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(j){Ft(u,u.return,j)}if(u=p,d=u.updateQueue,d!==null){var x=u.stateNode;try{var T=d.shared.hiddenCallbacks;if(T!==null)for(d.shared.hiddenCallbacks=null,d=0;d<T.length;d++)lm(T[d],x)}catch(j){Ft(u,u.return,j)}}l&&b&64&&Sy(p),ya(p,p.return);break;case 27:Oy(p);case 26:case 5:ns(d,p,l),l&&u===null&&b&4&&Cy(p),ya(p,p.return);break;case 12:ns(d,p,l);break;case 13:ns(d,p,l),l&&b&4&&Ay(d,p);break;case 22:p.memoizedState===null&&ns(d,p,l),ya(p,p.return);break;case 30:break;default:ns(d,p,l)}s=s.sibling}}function Of(n,s){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&ia(l))}function Df(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&ia(n))}function nn(n,s,l,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)jy(n,s,l,u),s=s.sibling}function jy(n,s,l,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:nn(n,s,l,u),d&2048&&ma(9,s);break;case 1:nn(n,s,l,u);break;case 3:nn(n,s,l,u),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&ia(n)));break;case 12:if(d&2048){nn(n,s,l,u),n=s.stateNode;try{var p=s.memoizedProps,b=p.id,x=p.onPostCommit;typeof x=="function"&&x(b,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(T){Ft(s,s.return,T)}}else nn(n,s,l,u);break;case 13:nn(n,s,l,u);break;case 23:break;case 22:p=s.stateNode,b=s.alternate,s.memoizedState!==null?p._visibility&2?nn(n,s,l,u):va(n,s):p._visibility&2?nn(n,s,l,u):(p._visibility|=2,Vr(n,s,l,u,(s.subtreeFlags&10256)!==0)),d&2048&&Of(b,s);break;case 24:nn(n,s,l,u),d&2048&&Df(s.alternate,s);break;default:nn(n,s,l,u)}}function Vr(n,s,l,u,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=n,b=s,x=l,T=u,j=b.flags;switch(b.tag){case 0:case 11:case 15:Vr(p,b,x,T,d),ma(8,b);break;case 23:break;case 22:var V=b.stateNode;b.memoizedState!==null?V._visibility&2?Vr(p,b,x,T,d):va(p,b):(V._visibility|=2,Vr(p,b,x,T,d)),d&&j&2048&&Of(b.alternate,b);break;case 24:Vr(p,b,x,T,d),d&&j&2048&&Df(b.alternate,b);break;default:Vr(p,b,x,T,d)}s=s.sibling}}function va(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=n,u=s,d=u.flags;switch(u.tag){case 22:va(l,u),d&2048&&Of(u.alternate,u);break;case 24:va(l,u),d&2048&&Df(u.alternate,u);break;default:va(l,u)}s=s.sibling}}var ba=8192;function Nr(n){if(n.subtreeFlags&ba)for(n=n.child;n!==null;)Ly(n),n=n.sibling}function Ly(n){switch(n.tag){case 26:Nr(n),n.flags&ba&&n.memoizedState!==null&&l1(Pi,n.memoizedState,n.memoizedProps);break;case 5:Nr(n);break;case 3:case 4:var s=Pi;Pi=hc(n.stateNode.containerInfo),Nr(n),Pi=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=ba,ba=16777216,Nr(n),ba=s):Nr(n));break;default:Nr(n)}}function Py(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function _a(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];be=u,Uy(u,n)}Py(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)By(n),n=n.sibling}function By(n){switch(n.tag){case 0:case 11:case 15:_a(n),n.flags&2048&&es(9,n,n.return);break;case 3:_a(n);break;case 12:_a(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,$l(n)):_a(n);break;default:_a(n)}}function $l(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];be=u,Uy(u,n)}Py(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:es(8,s,s.return),$l(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,$l(s));break;default:$l(s)}n=n.sibling}}function Uy(n,s){for(;be!==null;){var l=be;switch(l.tag){case 0:case 11:case 15:es(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ia(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,be=u;else t:for(l=n;be!==null;){u=be;var d=u.sibling,p=u.return;if(Ey(u),u===l){be=null;break t}if(d!==null){d.return=p,be=d;break t}be=p}}}var Cw={getCacheForType:function(n){var s=ze(de),l=s.data.get(n);return l===void 0&&(l=n(),s.data.set(n,l)),l}},Tw=typeof WeakMap=="function"?WeakMap:Map,Rt=0,Yt=null,xt=null,Ot=0,jt=0,li=null,ss=!1,Xr=!1,Mf=!1,Mn=0,Jt=0,rs=0,qs=0,Ef=0,wi=0,qr=0,xa=null,Qe=null,kf=!1,Af=0,tc=1/0,ec=null,os=null,we=0,as=null,Gr=null,Ir=0,zf=0,Rf=null,Fy=null,Sa=0,jf=null;function ci(){if((Rt&2)!==0&&Ot!==0)return Ot&-Ot;if(H.T!==null){var n=jr;return n!==0?n:Yf()}return ep()}function Hy(){wi===0&&(wi=(Ot&536870912)===0||kt?Kg():536870912);var n=Si.current;return n!==null&&(n.flags|=32),wi}function ui(n,s,l){(n===Yt&&(jt===2||jt===9)||n.cancelPendingCommit!==null)&&(Wr(n,0),ls(n,Ot,wi,!1)),Ho(n,l),((Rt&2)===0||n!==Yt)&&(n===Yt&&((Rt&2)===0&&(qs|=l),Jt===4&&ls(n,Ot,wi,!1)),sn(n))}function Yy(n,s,l){if((Rt&6)!==0)throw Error(i(327));var u=!l&&(s&124)===0&&(s&n.expiredLanes)===0||Fo(n,s),d=u?Mw(n,s):Bf(n,s,!0),p=u;do{if(d===0){Xr&&!u&&ls(n,s,0,!1);break}else{if(l=n.current.alternate,p&&!Ow(l)){d=Bf(n,s,!1),p=!1;continue}if(d===2){if(p=s,n.errorRecoveryDisabledLanes&p)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;t:{var x=n;d=xa;var T=x.current.memoizedState.isDehydrated;if(T&&(Wr(x,b).flags|=256),b=Bf(x,b,!1),b!==2){if(Mf&&!T){x.errorRecoveryDisabledLanes|=p,qs|=p,d=4;break t}p=Qe,Qe=d,p!==null&&(Qe===null?Qe=p:Qe.push.apply(Qe,p))}d=b}if(p=!1,d!==2)continue}}if(d===1){Wr(n,0),ls(n,s,0,!0);break}t:{switch(u=n,p=d,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ls(u,s,wi,!ss);break t;case 2:Qe=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=Af+300-Ji(),10<d)){if(ls(u,s,wi,!ss),fl(u,0,!0)!==0)break t;u.timeoutHandle=mv(Vy.bind(null,u,l,Qe,ec,kf,s,wi,qs,qr,ss,p,2,-0,0),d);break t}Vy(u,l,Qe,ec,kf,s,wi,qs,qr,ss,p,0,-0,0)}}break}while(!0);sn(n)}function Vy(n,s,l,u,d,p,b,x,T,j,V,X,L,P){if(n.timeoutHandle=-1,X=s.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(Ea={stylesheets:null,count:0,unsuspend:a1},Ly(s),X=c1(),X!==null)){n.cancelPendingCommit=X(Qy.bind(null,n,s,p,l,u,d,b,x,T,V,1,L,P)),ls(n,p,b,!j);return}Qy(n,s,p,l,u,d,b,x,T)}function Ow(n){for(var s=n;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var d=l[u],p=d.getSnapshot;d=d.value;try{if(!si(p(),d))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ls(n,s,l,u){s&=~Ef,s&=~qs,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var d=s;0<d;){var p=31-ni(d),b=1<<p;u[p]=-1,d&=~b}l!==0&&$g(n,l,s)}function ic(){return(Rt&6)===0?(wa(0),!1):!0}function Lf(){if(xt!==null){if(jt===0)var n=xt.return;else n=xt,_n=Fs=null,Kh(n),Hr=null,da=0,n=xt;for(;n!==null;)xy(n.alternate,n),n=n.return;xt=null}}function Wr(n,s){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,Xw(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Lf(),Yt=n,xt=l=yn(n.current,null),Ot=s,jt=0,li=null,ss=!1,Xr=Fo(n,s),Mf=!1,qr=wi=Ef=qs=rs=Jt=0,Qe=xa=null,kf=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var d=31-ni(u),p=1<<d;s|=n[d],u&=~p}return Mn=s,Cl(),l}function Ny(n,s){pt=null,H.H=Nl,s===sa||s===Rl?(s=om(),jt=3):s===nm?(s=om(),jt=4):jt=s===ay?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,li=s,xt===null&&(Jt=1,Wl(n,vi(s,n.current)))}function Xy(){var n=H.H;return H.H=Nl,n===null?Nl:n}function qy(){var n=H.A;return H.A=Cw,n}function Pf(){Jt=4,ss||(Ot&4194048)!==Ot&&Si.current!==null||(Xr=!0),(rs&134217727)===0&&(qs&134217727)===0||Yt===null||ls(Yt,Ot,wi,!1)}function Bf(n,s,l){var u=Rt;Rt|=2;var d=Xy(),p=qy();(Yt!==n||Ot!==s)&&(ec=null,Wr(n,s)),s=!1;var b=Jt;t:do try{if(jt!==0&&xt!==null){var x=xt,T=li;switch(jt){case 8:Lf(),b=6;break t;case 3:case 2:case 9:case 6:Si.current===null&&(s=!0);var j=jt;if(jt=0,li=null,Qr(n,x,T,j),l&&Xr){b=0;break t}break;default:j=jt,jt=0,li=null,Qr(n,x,T,j)}}Dw(),b=Jt;break}catch(V){Ny(n,V)}while(!0);return s&&n.shellSuspendCounter++,_n=Fs=null,Rt=u,H.H=d,H.A=p,xt===null&&(Yt=null,Ot=0,Cl()),b}function Dw(){for(;xt!==null;)Gy(xt)}function Mw(n,s){var l=Rt;Rt|=2;var u=Xy(),d=qy();Yt!==n||Ot!==s?(ec=null,tc=Ji()+500,Wr(n,s)):Xr=Fo(n,s);t:do try{if(jt!==0&&xt!==null){s=xt;var p=li;e:switch(jt){case 1:jt=0,li=null,Qr(n,s,p,1);break;case 2:case 9:if(sm(p)){jt=0,li=null,Iy(s);break}s=function(){jt!==2&&jt!==9||Yt!==n||(jt=7),sn(n)},p.then(s,s);break t;case 3:jt=7;break t;case 4:jt=5;break t;case 7:sm(p)?(jt=0,li=null,Iy(s)):(jt=0,li=null,Qr(n,s,p,7));break;case 5:var b=null;switch(xt.tag){case 26:b=xt.memoizedState;case 5:case 27:var x=xt;if(!b||Mv(b)){jt=0,li=null;var T=x.sibling;if(T!==null)xt=T;else{var j=x.return;j!==null?(xt=j,nc(j)):xt=null}break e}}jt=0,li=null,Qr(n,s,p,5);break;case 6:jt=0,li=null,Qr(n,s,p,6);break;case 8:Lf(),Jt=6;break t;default:throw Error(i(462))}}Ew();break}catch(V){Ny(n,V)}while(!0);return _n=Fs=null,H.H=u,H.A=d,Rt=l,xt!==null?0:(Yt=null,Ot=0,Cl(),Jt)}function Ew(){for(;xt!==null&&!Kx();)Gy(xt)}function Gy(n){var s=by(n.alternate,n,Mn);n.memoizedProps=n.pendingProps,s===null?nc(n):xt=s}function Iy(n){var s=n,l=s.alternate;switch(s.tag){case 15:case 0:s=dy(l,s,s.pendingProps,s.type,void 0,Ot);break;case 11:s=dy(l,s,s.pendingProps,s.type.render,s.ref,Ot);break;case 5:Kh(s);default:xy(l,s),s=xt=Wp(s,Mn),s=by(l,s,Mn)}n.memoizedProps=n.pendingProps,s===null?nc(n):xt=s}function Qr(n,s,l,u){_n=Fs=null,Kh(s),Hr=null,da=0;var d=s.return;try{if(vw(n,d,s,l,Ot)){Jt=1,Wl(n,vi(l,n.current)),xt=null;return}}catch(p){if(d!==null)throw xt=d,p;Jt=1,Wl(n,vi(l,n.current)),xt=null;return}s.flags&32768?(kt||u===1?n=!0:Xr||(Ot&536870912)!==0?n=!1:(ss=n=!0,(u===2||u===9||u===3||u===6)&&(u=Si.current,u!==null&&u.tag===13&&(u.flags|=16384))),Wy(s,n)):nc(s)}function nc(n){var s=n;do{if((s.flags&32768)!==0){Wy(s,ss);return}n=s.return;var l=_w(s.alternate,s,Mn);if(l!==null){xt=l;return}if(s=s.sibling,s!==null){xt=s;return}xt=s=n}while(s!==null);Jt===0&&(Jt=5)}function Wy(n,s){do{var l=xw(n.alternate,n);if(l!==null){l.flags&=32767,xt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(n=n.sibling,n!==null)){xt=n;return}xt=n=l}while(n!==null);Jt=6,xt=null}function Qy(n,s,l,u,d,p,b,x,T){n.cancelPendingCommit=null;do sc();while(we!==0);if((Rt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=Oh,aS(n,l,p,b,x,T),n===Yt&&(xt=Yt=null,Ot=0),Gr=s,as=n,Ir=l,zf=p,Rf=d,Fy=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Rw(cl,function(){return tv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,d=W.p,W.p=2,b=Rt,Rt|=4;try{Sw(n,s,l)}finally{Rt=b,W.p=d,H.T=u}}we=1,Zy(),Ky(),Jy()}}function Zy(){if(we===1){we=0;var n=as,s=Gr,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var u=W.p;W.p=2;var d=Rt;Rt|=4;try{zy(s,n);var p=Qf,b=Up(n.containerInfo),x=p.focusedElem,T=p.selectionRange;if(b!==x&&x&&x.ownerDocument&&Bp(x.ownerDocument.documentElement,x)){if(T!==null&&xh(x)){var j=T.start,V=T.end;if(V===void 0&&(V=j),"selectionStart"in x)x.selectionStart=j,x.selectionEnd=Math.min(V,x.value.length);else{var X=x.ownerDocument||document,L=X&&X.defaultView||window;if(L.getSelection){var P=L.getSelection(),ut=x.textContent.length,at=Math.min(T.start,ut),Ut=T.end===void 0?at:Math.min(T.end,ut);!P.extend&&at>Ut&&(b=Ut,Ut=at,at=b);var A=Pp(x,at),D=Pp(x,Ut);if(A&&D&&(P.rangeCount!==1||P.anchorNode!==A.node||P.anchorOffset!==A.offset||P.focusNode!==D.node||P.focusOffset!==D.offset)){var R=X.createRange();R.setStart(A.node,A.offset),P.removeAllRanges(),at>Ut?(P.addRange(R),P.extend(D.node,D.offset)):(R.setEnd(D.node,D.offset),P.addRange(R))}}}}for(X=[],P=x;P=P.parentNode;)P.nodeType===1&&X.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<X.length;x++){var N=X[x];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}mc=!!Wf,Qf=Wf=null}finally{Rt=d,W.p=u,H.T=l}}n.current=s,we=2}}function Ky(){if(we===2){we=0;var n=as,s=Gr,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var u=W.p;W.p=2;var d=Rt;Rt|=4;try{My(n,s.alternate,s)}finally{Rt=d,W.p=u,H.T=l}}we=3}}function Jy(){if(we===4||we===3){we=0,Jx();var n=as,s=Gr,l=Ir,u=Fy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?we=5:(we=0,Gr=as=null,$y(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(os=null),th(l),s=s.stateNode,ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(Uo,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=H.T,d=W.p,W.p=2,H.T=null;try{for(var p=n.onRecoverableError,b=0;b<u.length;b++){var x=u[b];p(x.value,{componentStack:x.stack})}}finally{H.T=s,W.p=d}}(Ir&3)!==0&&sc(),sn(n),d=n.pendingLanes,(l&4194090)!==0&&(d&42)!==0?n===jf?Sa++:(Sa=0,jf=n):Sa=0,wa(0)}}function $y(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,ia(s)))}function sc(n){return Zy(),Ky(),Jy(),tv()}function tv(){if(we!==5)return!1;var n=as,s=zf;zf=0;var l=th(Ir),u=H.T,d=W.p;try{W.p=32>l?32:l,H.T=null,l=Rf,Rf=null;var p=as,b=Ir;if(we=0,Gr=as=null,Ir=0,(Rt&6)!==0)throw Error(i(331));var x=Rt;if(Rt|=4,By(p.current),jy(p,p.current,b,l),Rt=x,wa(0,!1),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(Uo,p)}catch{}return!0}finally{W.p=d,H.T=u,$y(n,s)}}function ev(n,s,l){s=vi(l,s),s=ff(n.stateNode,s,2),n=Kn(n,s,2),n!==null&&(Ho(n,2),sn(n))}function Ft(n,s,l){if(n.tag===3)ev(n,n,l);else for(;s!==null;){if(s.tag===3){ev(s,n,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(os===null||!os.has(u))){n=vi(l,n),l=ry(2),u=Kn(s,l,2),u!==null&&(oy(l,u,s,n),Ho(u,2),sn(u));break}}s=s.return}}function Uf(n,s,l){var u=n.pingCache;if(u===null){u=n.pingCache=new Tw;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(l)||(Mf=!0,d.add(l),n=kw.bind(null,n,s,l),s.then(n,n))}function kw(n,s,l){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Yt===n&&(Ot&l)===l&&(Jt===4||Jt===3&&(Ot&62914560)===Ot&&300>Ji()-Af?(Rt&2)===0&&Wr(n,0):Ef|=l,qr===Ot&&(qr=0)),sn(n)}function iv(n,s){s===0&&(s=Jg()),n=kr(n,s),n!==null&&(Ho(n,s),sn(n))}function Aw(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),iv(n,l)}function zw(n,s){var l=0;switch(n.tag){case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(l=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),iv(n,l)}function Rw(n,s){return Zu(n,s)}var rc=null,Zr=null,Ff=!1,oc=!1,Hf=!1,Gs=0;function sn(n){n!==Zr&&n.next===null&&(Zr===null?rc=Zr=n:Zr=Zr.next=n),oc=!0,Ff||(Ff=!0,Lw())}function wa(n,s){if(!Hf&&oc){Hf=!0;do for(var l=!1,u=rc;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var p=0;else{var b=u.suspendedLanes,x=u.pingedLanes;p=(1<<31-ni(42|n)+1)-1,p&=d&~(b&~x),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,ov(u,p))}else p=Ot,p=fl(u,u===Yt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Fo(u,p)||(l=!0,ov(u,p));u=u.next}while(l);Hf=!1}}function jw(){nv()}function nv(){oc=Ff=!1;var n=0;Gs!==0&&(Nw()&&(n=Gs),Gs=0);for(var s=Ji(),l=null,u=rc;u!==null;){var d=u.next,p=sv(u,s);p===0?(u.next=null,l===null?rc=d:l.next=d,d===null&&(Zr=l)):(l=u,(n!==0||(p&3)!==0)&&(oc=!0)),u=d}wa(n)}function sv(n,s){for(var l=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var b=31-ni(p),x=1<<b,T=d[b];T===-1?((x&l)===0||(x&u)!==0)&&(d[b]=oS(x,s)):T<=s&&(n.expiredLanes|=x),p&=~x}if(s=Yt,l=Ot,l=fl(n,n===s?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,l===0||n===s&&(jt===2||jt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ku(u),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Fo(n,l)){if(s=l&-l,s===n.callbackPriority)return s;switch(u!==null&&Ku(u),th(l)){case 2:case 8:l=Qg;break;case 32:l=cl;break;case 268435456:l=Zg;break;default:l=cl}return u=rv.bind(null,n),l=Zu(l,u),n.callbackPriority=s,n.callbackNode=l,s}return u!==null&&u!==null&&Ku(u),n.callbackPriority=2,n.callbackNode=null,2}function rv(n,s){if(we!==0&&we!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(sc()&&n.callbackNode!==l)return null;var u=Ot;return u=fl(n,n===Yt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Yy(n,u,s),sv(n,Ji()),n.callbackNode!=null&&n.callbackNode===l?rv.bind(null,n):null)}function ov(n,s){if(sc())return null;Yy(n,s,!0)}function Lw(){qw(function(){(Rt&6)!==0?Zu(Wg,jw):nv()})}function Yf(){return Gs===0&&(Gs=Kg()),Gs}function av(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:yl(""+n)}function lv(n,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,n.id&&l.setAttribute("form",n.id),s.parentNode.insertBefore(l,s),n=new FormData(n),l.parentNode.removeChild(l),n}function Pw(n,s,l,u,d){if(s==="submit"&&l&&l.stateNode===d){var p=av((d[qe]||null).action),b=u.submitter;b&&(s=(s=b[qe]||null)?av(s.formAction):b.getAttribute("formAction"),s!==null&&(p=s,b=null));var x=new xl("action","action",null,u,d);n.push({event:x,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Gs!==0){var T=b?lv(d,b):new FormData(d);af(l,{pending:!0,data:T,method:d.method,action:p},null,T)}}else typeof p=="function"&&(x.preventDefault(),T=b?lv(d,b):new FormData(d),af(l,{pending:!0,data:T,method:d.method,action:p},p,T))},currentTarget:d}]})}}for(var Vf=0;Vf<Th.length;Vf++){var Nf=Th[Vf],Bw=Nf.toLowerCase(),Uw=Nf[0].toUpperCase()+Nf.slice(1);Li(Bw,"on"+Uw)}Li(Yp,"onAnimationEnd"),Li(Vp,"onAnimationIteration"),Li(Np,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(ew,"onTransitionRun"),Li(iw,"onTransitionStart"),Li(nw,"onTransitionCancel"),Li(Xp,"onTransitionEnd"),_r("onMouseEnter",["mouseout","mouseover"]),_r("onMouseLeave",["mouseout","mouseover"]),_r("onPointerEnter",["pointerout","pointerover"]),_r("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ca));function cv(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var u=n[l],d=u.event;u=u.listeners;t:{var p=void 0;if(s)for(var b=u.length-1;0<=b;b--){var x=u[b],T=x.instance,j=x.currentTarget;if(x=x.listener,T!==p&&d.isPropagationStopped())break t;p=x,d.currentTarget=j;try{p(d)}catch(V){Il(V)}d.currentTarget=null,p=T}else for(b=0;b<u.length;b++){if(x=u[b],T=x.instance,j=x.currentTarget,x=x.listener,T!==p&&d.isPropagationStopped())break t;p=x,d.currentTarget=j;try{p(d)}catch(V){Il(V)}d.currentTarget=null,p=T}}}}function St(n,s){var l=s[eh];l===void 0&&(l=s[eh]=new Set);var u=n+"__bubble";l.has(u)||(uv(s,n,2,!1),l.add(u))}function Xf(n,s,l){var u=0;s&&(u|=4),uv(l,n,u,s)}var ac="_reactListening"+Math.random().toString(36).slice(2);function qf(n){if(!n[ac]){n[ac]=!0,np.forEach(function(l){l!=="selectionchange"&&(Fw.has(l)||Xf(l,!1,n),Xf(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ac]||(s[ac]=!0,Xf("selectionchange",!1,s))}}function uv(n,s,l,u){switch(jv(s)){case 2:var d=f1;break;case 8:d=d1;break;default:d=rd}l=d.bind(null,s,l,n),d=void 0,!fh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(s,l,{capture:!0,passive:d}):n.addEventListener(s,l,!0):d!==void 0?n.addEventListener(s,l,{passive:d}):n.addEventListener(s,l,!1)}function Gf(n,s,l,u,d){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var x=u.stateNode.containerInfo;if(x===d)break;if(b===4)for(b=u.return;b!==null;){var T=b.tag;if((T===3||T===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;x!==null;){if(b=yr(x),b===null)return;if(T=b.tag,T===5||T===6||T===26||T===27){u=p=b;continue t}x=x.parentNode}}u=u.return}yp(function(){var j=p,V=uh(l),X=[];t:{var L=qp.get(n);if(L!==void 0){var P=xl,ut=n;switch(n){case"keypress":if(bl(l)===0)break t;case"keydown":case"keyup":P=RS;break;case"focusin":ut="focus",P=mh;break;case"focusout":ut="blur",P=mh;break;case"beforeblur":case"afterblur":P=mh;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=_p;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=xS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=PS;break;case Yp:case Vp:case Np:P=CS;break;case Xp:P=US;break;case"scroll":case"scrollend":P=bS;break;case"wheel":P=HS;break;case"copy":case"cut":case"paste":P=OS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Sp;break;case"toggle":case"beforetoggle":P=VS}var at=(s&4)!==0,Ut=!at&&(n==="scroll"||n==="scrollend"),A=at?L!==null?L+"Capture":null:L;at=[];for(var D=j,R;D!==null;){var N=D;if(R=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||R===null||A===null||(N=No(D,A),N!=null&&at.push(Ta(D,N,R))),Ut)break;D=D.return}0<at.length&&(L=new P(L,ut,null,l,V),X.push({event:L,listeners:at}))}}if((s&7)===0){t:{if(L=n==="mouseover"||n==="pointerover",P=n==="mouseout"||n==="pointerout",L&&l!==ch&&(ut=l.relatedTarget||l.fromElement)&&(yr(ut)||ut[mr]))break t;if((P||L)&&(L=V.window===V?V:(L=V.ownerDocument)?L.defaultView||L.parentWindow:window,P?(ut=l.relatedTarget||l.toElement,P=j,ut=ut?yr(ut):null,ut!==null&&(Ut=a(ut),at=ut.tag,ut!==Ut||at!==5&&at!==27&&at!==6)&&(ut=null)):(P=null,ut=j),P!==ut)){if(at=_p,N="onMouseLeave",A="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(at=Sp,N="onPointerLeave",A="onPointerEnter",D="pointer"),Ut=P==null?L:Vo(P),R=ut==null?L:Vo(ut),L=new at(N,D+"leave",P,l,V),L.target=Ut,L.relatedTarget=R,N=null,yr(V)===j&&(at=new at(A,D+"enter",ut,l,V),at.target=R,at.relatedTarget=Ut,N=at),Ut=N,P&&ut)e:{for(at=P,A=ut,D=0,R=at;R;R=Kr(R))D++;for(R=0,N=A;N;N=Kr(N))R++;for(;0<D-R;)at=Kr(at),D--;for(;0<R-D;)A=Kr(A),R--;for(;D--;){if(at===A||A!==null&&at===A.alternate)break e;at=Kr(at),A=Kr(A)}at=null}else at=null;P!==null&&hv(X,L,P,at,!1),ut!==null&&Ut!==null&&hv(X,Ut,ut,at,!0)}}t:{if(L=j?Vo(j):window,P=L.nodeName&&L.nodeName.toLowerCase(),P==="select"||P==="input"&&L.type==="file")var it=kp;else if(Mp(L))if(Ap)it=JS;else{it=ZS;var vt=QS}else P=L.nodeName,!P||P.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?j&&lh(j.elementType)&&(it=kp):it=KS;if(it&&(it=it(n,j))){Ep(X,it,l,V);break t}vt&&vt(n,L,j),n==="focusout"&&j&&L.type==="number"&&j.memoizedProps.value!=null&&ah(L,"number",L.value)}switch(vt=j?Vo(j):window,n){case"focusin":(Mp(vt)||vt.contentEditable==="true")&&(Dr=vt,Sh=j,Ko=null);break;case"focusout":Ko=Sh=Dr=null;break;case"mousedown":wh=!0;break;case"contextmenu":case"mouseup":case"dragend":wh=!1,Fp(X,l,V);break;case"selectionchange":if(tw)break;case"keydown":case"keyup":Fp(X,l,V)}var st;if(vh)t:{switch(n){case"compositionstart":var lt="onCompositionStart";break t;case"compositionend":lt="onCompositionEnd";break t;case"compositionupdate":lt="onCompositionUpdate";break t}lt=void 0}else Or?Op(n,l)&&(lt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(lt="onCompositionStart");lt&&(wp&&l.locale!=="ko"&&(Or||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Or&&(st=vp()):(In=V,dh="value"in In?In.value:In.textContent,Or=!0)),vt=lc(j,lt),0<vt.length&&(lt=new xp(lt,n,null,l,V),X.push({event:lt,listeners:vt}),st?lt.data=st:(st=Dp(l),st!==null&&(lt.data=st)))),(st=XS?qS(n,l):GS(n,l))&&(lt=lc(j,"onBeforeInput"),0<lt.length&&(vt=new xp("onBeforeInput","beforeinput",null,l,V),X.push({event:vt,listeners:lt}),vt.data=st)),Pw(X,n,j,l,V)}cv(X,s)})}function Ta(n,s,l){return{instance:n,listener:s,currentTarget:l}}function lc(n,s){for(var l=s+"Capture",u=[];n!==null;){var d=n,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=No(n,l),d!=null&&u.unshift(Ta(n,d,p)),d=No(n,s),d!=null&&u.push(Ta(n,d,p))),n.tag===3)return u;n=n.return}return[]}function Kr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function hv(n,s,l,u,d){for(var p=s._reactName,b=[];l!==null&&l!==u;){var x=l,T=x.alternate,j=x.stateNode;if(x=x.tag,T!==null&&T===u)break;x!==5&&x!==26&&x!==27||j===null||(T=j,d?(j=No(l,p),j!=null&&b.unshift(Ta(l,j,T))):d||(j=No(l,p),j!=null&&b.push(Ta(l,j,T)))),l=l.return}b.length!==0&&n.push({event:s,listeners:b})}var Hw=/\r\n?/g,Yw=/\u0000|\uFFFD/g;function fv(n){return(typeof n=="string"?n:""+n).replace(Hw,`
`).replace(Yw,"")}function dv(n,s){return s=fv(s),fv(n)===s}function cc(){}function Bt(n,s,l,u,d,p){switch(l){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||wr(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&wr(n,""+u);break;case"className":gl(n,"class",u);break;case"tabIndex":gl(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":gl(n,l,u);break;case"style":pp(n,u,p);break;case"data":if(s!=="object"){gl(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||l!=="href")){n.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=yl(""+u),n.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(s!=="input"&&Bt(n,s,"name",d.name,d,null),Bt(n,s,"formEncType",d.formEncType,d,null),Bt(n,s,"formMethod",d.formMethod,d,null),Bt(n,s,"formTarget",d.formTarget,d,null)):(Bt(n,s,"encType",d.encType,d,null),Bt(n,s,"method",d.method,d,null),Bt(n,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=yl(""+u),n.setAttribute(l,u);break;case"onClick":u!=null&&(n.onclick=cc);break;case"onScroll":u!=null&&St("scroll",n);break;case"onScrollEnd":u!=null&&St("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}l=yl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""+u):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":u===!0?n.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,u):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(l,u):n.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(l):n.setAttribute(l,u);break;case"popover":St("beforetoggle",n),St("toggle",n),dl(n,"popover",u);break;case"xlinkActuate":pn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":pn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":pn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":pn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":pn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":pn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":pn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":pn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":pn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":dl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=yS.get(l)||l,dl(n,l,u))}}function If(n,s,l,u,d,p){switch(l){case"style":pp(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"children":typeof u=="string"?wr(n,u):(typeof u=="number"||typeof u=="bigint")&&wr(n,""+u);break;case"onScroll":u!=null&&St("scroll",n);break;case"onScrollEnd":u!=null&&St("scrollend",n);break;case"onClick":u!=null&&(n.onclick=cc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sp.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(d=l.endsWith("Capture"),s=l.slice(2,d?l.length-7:void 0),p=n[qe]||null,p=p!=null?p[l]:null,typeof p=="function"&&n.removeEventListener(s,p,d),typeof u=="function")){typeof p!="function"&&p!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(s,u,d);break t}l in n?n[l]=u:u===!0?n.setAttribute(l,""):dl(n,l,u)}}}function Ce(n,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",n),St("load",n);var u=!1,d=!1,p;for(p in l)if(l.hasOwnProperty(p)){var b=l[p];if(b!=null)switch(p){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Bt(n,s,p,b,l,null)}}d&&Bt(n,s,"srcSet",l.srcSet,l,null),u&&Bt(n,s,"src",l.src,l,null);return;case"input":St("invalid",n);var x=p=b=d=null,T=null,j=null;for(u in l)if(l.hasOwnProperty(u)){var V=l[u];if(V!=null)switch(u){case"name":d=V;break;case"type":b=V;break;case"checked":T=V;break;case"defaultChecked":j=V;break;case"value":p=V;break;case"defaultValue":x=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,s));break;default:Bt(n,s,u,V,l,null)}}hp(n,p,x,T,j,b,d,!1),pl(n);return;case"select":St("invalid",n),u=b=p=null;for(d in l)if(l.hasOwnProperty(d)&&(x=l[d],x!=null))switch(d){case"value":p=x;break;case"defaultValue":b=x;break;case"multiple":u=x;default:Bt(n,s,d,x,l,null)}s=p,l=b,n.multiple=!!u,s!=null?Sr(n,!!u,s,!1):l!=null&&Sr(n,!!u,l,!0);return;case"textarea":St("invalid",n),p=d=u=null;for(b in l)if(l.hasOwnProperty(b)&&(x=l[b],x!=null))switch(b){case"value":u=x;break;case"defaultValue":d=x;break;case"children":p=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:Bt(n,s,b,x,l,null)}dp(n,u,d,p),pl(n);return;case"option":for(T in l)if(l.hasOwnProperty(T)&&(u=l[T],u!=null))switch(T){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Bt(n,s,T,u,l,null)}return;case"dialog":St("beforetoggle",n),St("toggle",n),St("cancel",n),St("close",n);break;case"iframe":case"object":St("load",n);break;case"video":case"audio":for(u=0;u<Ca.length;u++)St(Ca[u],n);break;case"image":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"embed":case"source":case"link":St("error",n),St("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in l)if(l.hasOwnProperty(j)&&(u=l[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Bt(n,s,j,u,l,null)}return;default:if(lh(s)){for(V in l)l.hasOwnProperty(V)&&(u=l[V],u!==void 0&&If(n,s,V,u,l,void 0));return}}for(x in l)l.hasOwnProperty(x)&&(u=l[x],u!=null&&Bt(n,s,x,u,l,null))}function Vw(n,s,l,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,b=null,x=null,T=null,j=null,V=null;for(P in l){var X=l[P];if(l.hasOwnProperty(P)&&X!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":T=X;default:u.hasOwnProperty(P)||Bt(n,s,P,null,u,X)}}for(var L in u){var P=u[L];if(X=l[L],u.hasOwnProperty(L)&&(P!=null||X!=null))switch(L){case"type":p=P;break;case"name":d=P;break;case"checked":j=P;break;case"defaultChecked":V=P;break;case"value":b=P;break;case"defaultValue":x=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(137,s));break;default:P!==X&&Bt(n,s,L,P,u,X)}}oh(n,b,x,T,j,V,p,d);return;case"select":P=b=x=L=null;for(p in l)if(T=l[p],l.hasOwnProperty(p)&&T!=null)switch(p){case"value":break;case"multiple":P=T;default:u.hasOwnProperty(p)||Bt(n,s,p,null,u,T)}for(d in u)if(p=u[d],T=l[d],u.hasOwnProperty(d)&&(p!=null||T!=null))switch(d){case"value":L=p;break;case"defaultValue":x=p;break;case"multiple":b=p;default:p!==T&&Bt(n,s,d,p,u,T)}s=x,l=b,u=P,L!=null?Sr(n,!!l,L,!1):!!u!=!!l&&(s!=null?Sr(n,!!l,s,!0):Sr(n,!!l,l?[]:"",!1));return;case"textarea":P=L=null;for(x in l)if(d=l[x],l.hasOwnProperty(x)&&d!=null&&!u.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Bt(n,s,x,null,u,d)}for(b in u)if(d=u[b],p=l[b],u.hasOwnProperty(b)&&(d!=null||p!=null))switch(b){case"value":L=d;break;case"defaultValue":P=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==p&&Bt(n,s,b,d,u,p)}fp(n,L,P);return;case"option":for(var ut in l)if(L=l[ut],l.hasOwnProperty(ut)&&L!=null&&!u.hasOwnProperty(ut))switch(ut){case"selected":n.selected=!1;break;default:Bt(n,s,ut,null,u,L)}for(T in u)if(L=u[T],P=l[T],u.hasOwnProperty(T)&&L!==P&&(L!=null||P!=null))switch(T){case"selected":n.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Bt(n,s,T,L,u,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in l)L=l[at],l.hasOwnProperty(at)&&L!=null&&!u.hasOwnProperty(at)&&Bt(n,s,at,null,u,L);for(j in u)if(L=u[j],P=l[j],u.hasOwnProperty(j)&&L!==P&&(L!=null||P!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(137,s));break;default:Bt(n,s,j,L,u,P)}return;default:if(lh(s)){for(var Ut in l)L=l[Ut],l.hasOwnProperty(Ut)&&L!==void 0&&!u.hasOwnProperty(Ut)&&If(n,s,Ut,void 0,u,L);for(V in u)L=u[V],P=l[V],!u.hasOwnProperty(V)||L===P||L===void 0&&P===void 0||If(n,s,V,L,u,P);return}}for(var A in l)L=l[A],l.hasOwnProperty(A)&&L!=null&&!u.hasOwnProperty(A)&&Bt(n,s,A,null,u,L);for(X in u)L=u[X],P=l[X],!u.hasOwnProperty(X)||L===P||L==null&&P==null||Bt(n,s,X,L,u,P)}var Wf=null,Qf=null;function uc(n){return n.nodeType===9?n:n.ownerDocument}function gv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pv(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Zf(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kf=null;function Nw(){var n=window.event;return n&&n.type==="popstate"?n===Kf?!1:(Kf=n,!0):(Kf=null,!1)}var mv=typeof setTimeout=="function"?setTimeout:void 0,Xw=typeof clearTimeout=="function"?clearTimeout:void 0,yv=typeof Promise=="function"?Promise:void 0,qw=typeof queueMicrotask=="function"?queueMicrotask:typeof yv<"u"?function(n){return yv.resolve(null).then(n).catch(Gw)}:mv;function Gw(n){setTimeout(function(){throw n})}function cs(n){return n==="head"}function vv(n,s){var l=s,u=0,d=0;do{var p=l.nextSibling;if(n.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(0<u&&8>u){l=u;var b=n.ownerDocument;if(l&1&&Oa(b.documentElement),l&2&&Oa(b.body),l&4)for(l=b.head,Oa(l),b=l.firstChild;b;){var x=b.nextSibling,T=b.nodeName;b[Yo]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=x}}if(d===0){n.removeChild(p),ja(s);return}d--}else l==="$"||l==="$?"||l==="$!"?d++:u=l.charCodeAt(0)-48;else u=0;l=p}while(l);ja(s)}function Jf(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Jf(l),ih(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function Iw(n,s,l,u){for(;n.nodeType===1;){var d=l;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Yo])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Bi(n.nextSibling),n===null)break}return null}function Ww(n,s,l){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Bi(n.nextSibling),n===null))return null;return n}function $f(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function Qw(n,s){var l=n.ownerDocument;if(n.data!=="$?"||l.readyState==="complete")s();else{var u=function(){s(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Bi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var td=null;function bv(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}function _v(n,s,l){switch(s=uc(l),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Oa(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ih(n)}var Ci=new Map,xv=new Set;function hc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var En=W.d;W.d={f:Zw,r:Kw,D:Jw,C:$w,L:t1,m:e1,X:n1,S:i1,M:s1};function Zw(){var n=En.f(),s=ic();return n||s}function Kw(n){var s=vr(n);s!==null&&s.tag===5&&s.type==="form"?Ym(s):En.r(n)}var Jr=typeof document>"u"?null:document;function Sv(n,s,l){var u=Jr;if(u&&typeof s=="string"&&s){var d=yi(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof l=="string"&&(d+='[crossorigin="'+l+'"]'),xv.has(d)||(xv.add(d),n={rel:n,crossOrigin:l,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Ce(s,"link",n),ye(s),u.head.appendChild(s)))}}function Jw(n){En.D(n),Sv("dns-prefetch",n,null)}function $w(n,s){En.C(n,s),Sv("preconnect",n,s)}function t1(n,s,l){En.L(n,s,l);var u=Jr;if(u&&n&&s){var d='link[rel="preload"][as="'+yi(s)+'"]';s==="image"&&l&&l.imageSrcSet?(d+='[imagesrcset="'+yi(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(d+='[imagesizes="'+yi(l.imageSizes)+'"]')):d+='[href="'+yi(n)+'"]';var p=d;switch(s){case"style":p=$r(n);break;case"script":p=to(n)}Ci.has(p)||(n=m({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:n,as:s},l),Ci.set(p,n),u.querySelector(d)!==null||s==="style"&&u.querySelector(Da(p))||s==="script"&&u.querySelector(Ma(p))||(s=u.createElement("link"),Ce(s,"link",n),ye(s),u.head.appendChild(s)))}}function e1(n,s){En.m(n,s);var l=Jr;if(l&&n){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+yi(u)+'"][href="'+yi(n)+'"]',p=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=to(n)}if(!Ci.has(p)&&(n=m({rel:"modulepreload",href:n},s),Ci.set(p,n),l.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ma(p)))return}u=l.createElement("link"),Ce(u,"link",n),ye(u),l.head.appendChild(u)}}}function i1(n,s,l){En.S(n,s,l);var u=Jr;if(u&&n){var d=br(u).hoistableStyles,p=$r(n);s=s||"default";var b=d.get(p);if(!b){var x={loading:0,preload:null};if(b=u.querySelector(Da(p)))x.loading=5;else{n=m({rel:"stylesheet",href:n,"data-precedence":s},l),(l=Ci.get(p))&&ed(n,l);var T=b=u.createElement("link");ye(T),Ce(T,"link",n),T._p=new Promise(function(j,V){T.onload=j,T.onerror=V}),T.addEventListener("load",function(){x.loading|=1}),T.addEventListener("error",function(){x.loading|=2}),x.loading|=4,fc(b,s,u)}b={type:"stylesheet",instance:b,count:1,state:x},d.set(p,b)}}}function n1(n,s){En.X(n,s);var l=Jr;if(l&&n){var u=br(l).hoistableScripts,d=to(n),p=u.get(d);p||(p=l.querySelector(Ma(d)),p||(n=m({src:n,async:!0},s),(s=Ci.get(d))&&id(n,s),p=l.createElement("script"),ye(p),Ce(p,"link",n),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function s1(n,s){En.M(n,s);var l=Jr;if(l&&n){var u=br(l).hoistableScripts,d=to(n),p=u.get(d);p||(p=l.querySelector(Ma(d)),p||(n=m({src:n,async:!0,type:"module"},s),(s=Ci.get(d))&&id(n,s),p=l.createElement("script"),ye(p),Ce(p,"link",n),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function wv(n,s,l,u){var d=(d=ot.current)?hc(d):null;if(!d)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=$r(l.href),l=br(d).hoistableStyles,u=l.get(s),u||(u={type:"style",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=$r(l.href);var p=br(d).hoistableStyles,b=p.get(n);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,b),(p=d.querySelector(Da(n)))&&!p._p&&(b.instance=p,b.state.loading=5),Ci.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ci.set(n,l),p||r1(d,n,l,b.state))),s&&u===null)throw Error(i(528,""));return b}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=to(l),l=br(d).hoistableScripts,u=l.get(s),u||(u={type:"script",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function $r(n){return'href="'+yi(n)+'"'}function Da(n){return'link[rel="stylesheet"]['+n+"]"}function Cv(n){return m({},n,{"data-precedence":n.precedence,precedence:null})}function r1(n,s,l,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Ce(s,"link",l),ye(s),n.head.appendChild(s))}function to(n){return'[src="'+yi(n)+'"]'}function Ma(n){return"script[async]"+n}function Tv(n,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+yi(l.href)+'"]');if(u)return s.instance=u,ye(u),u;var d=m({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ye(u),Ce(u,"style",d),fc(u,l.precedence,n),s.instance=u;case"stylesheet":d=$r(l.href);var p=n.querySelector(Da(d));if(p)return s.state.loading|=4,s.instance=p,ye(p),p;u=Cv(l),(d=Ci.get(d))&&ed(u,d),p=(n.ownerDocument||n).createElement("link"),ye(p);var b=p;return b._p=new Promise(function(x,T){b.onload=x,b.onerror=T}),Ce(p,"link",u),s.state.loading|=4,fc(p,l.precedence,n),s.instance=p;case"script":return p=to(l.src),(d=n.querySelector(Ma(p)))?(s.instance=d,ye(d),d):(u=l,(d=Ci.get(p))&&(u=m({},l),id(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),ye(d),Ce(d,"link",u),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,fc(u,l.precedence,n));return s.instance}function fc(n,s,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,p=d,b=0;b<u.length;b++){var x=u[b];if(x.dataset.precedence===s)p=x;else if(p!==d)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(n,s.firstChild))}function ed(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function id(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var dc=null;function Ov(n,s,l){if(dc===null){var u=new Map,d=dc=new Map;d.set(l,u)}else d=dc,u=d.get(l),u||(u=new Map,d.set(l,u));if(u.has(n))return u;for(u.set(n,null),l=l.getElementsByTagName(n),d=0;d<l.length;d++){var p=l[d];if(!(p[Yo]||p[Ae]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(s)||"";b=n+b;var x=u.get(b);x?x.push(p):u.set(b,[p])}}return u}function Dv(n,s,l){n=n.ownerDocument||n,n.head.insertBefore(l,s==="title"?n.querySelector("head > title"):null)}function o1(n,s,l){if(l===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Mv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Ea=null;function a1(){}function l1(n,s,l){if(Ea===null)throw Error(i(475));var u=Ea;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=$r(l.href),p=n.querySelector(Da(d));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=gc.bind(u),n.then(u,u)),s.state.loading|=4,s.instance=p,ye(p);return}p=n.ownerDocument||n,l=Cv(l),(d=Ci.get(d))&&ed(l,d),p=p.createElement("link"),ye(p);var b=p;b._p=new Promise(function(x,T){b.onload=x,b.onerror=T}),Ce(p,"link",l),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=gc.bind(u),n.addEventListener("load",s),n.addEventListener("error",s))}}function c1(){if(Ea===null)throw Error(i(475));var n=Ea;return n.stylesheets&&n.count===0&&nd(n,n.stylesheets),0<n.count?function(s){var l=setTimeout(function(){if(n.stylesheets&&nd(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(l)}}:null}function gc(){if(this.count--,this.count===0){if(this.stylesheets)nd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var pc=null;function nd(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,pc=new Map,s.forEach(u1,n),pc=null,gc.call(n))}function u1(n,s){if(!(s.state.loading&4)){var l=pc.get(n);if(l)var u=l.get(null);else{l=new Map,pc.set(n,l);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var b=d[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),u=b)}u&&l.set(null,u)}d=s.instance,b=d.getAttribute("data-precedence"),p=l.get(b)||u,p===u&&l.set(null,d),l.set(b,d),this.count++,u=gc.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),p?p.parentNode.insertBefore(d,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var ka={$$typeof:Y,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function h1(n,s,l,u,d,p,b,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ju(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ju(0),this.hiddenUpdates=Ju(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function Ev(n,s,l,u,d,p,b,x,T,j,V,X){return n=new h1(n,s,l,b,x,T,j,X),s=1,p===!0&&(s|=24),p=ri(3,null,null,s),n.current=p,p.stateNode=n,s=Bh(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:l,cache:s},Yh(p),n}function kv(n){return n?(n=Ar,n):Ar}function Av(n,s,l,u,d,p){d=kv(d),u.context===null?u.context=d:u.pendingContext=d,u=Zn(s),u.payload={element:l},p=p===void 0?null:p,p!==null&&(u.callback=p),l=Kn(n,u,s),l!==null&&(ui(l,n,s),oa(l,n,s))}function zv(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function sd(n,s){zv(n,s),(n=n.alternate)&&zv(n,s)}function Rv(n){if(n.tag===13){var s=kr(n,67108864);s!==null&&ui(s,n,67108864),sd(n,67108864)}}var mc=!0;function f1(n,s,l,u){var d=H.T;H.T=null;var p=W.p;try{W.p=2,rd(n,s,l,u)}finally{W.p=p,H.T=d}}function d1(n,s,l,u){var d=H.T;H.T=null;var p=W.p;try{W.p=8,rd(n,s,l,u)}finally{W.p=p,H.T=d}}function rd(n,s,l,u){if(mc){var d=od(u);if(d===null)Gf(n,s,u,yc,l),Lv(n,u);else if(p1(d,n,s,l,u))u.stopPropagation();else if(Lv(n,u),s&4&&-1<g1.indexOf(n)){for(;d!==null;){var p=vr(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=Es(p.pendingLanes);if(b!==0){var x=p;for(x.pendingLanes|=2,x.entangledLanes|=2;b;){var T=1<<31-ni(b);x.entanglements[1]|=T,b&=~T}sn(p),(Rt&6)===0&&(tc=Ji()+500,wa(0))}}break;case 13:x=kr(p,2),x!==null&&ui(x,p,2),ic(),sd(p,2)}if(p=od(u),p===null&&Gf(n,s,u,yc,l),p===d)break;d=p}d!==null&&u.stopPropagation()}else Gf(n,s,u,null,l)}}function od(n){return n=uh(n),ad(n)}var yc=null;function ad(n){if(yc=null,n=yr(n),n!==null){var s=a(n);if(s===null)n=null;else{var l=s.tag;if(l===13){if(n=c(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return yc=n,null}function jv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($x()){case Wg:return 2;case Qg:return 8;case cl:case tS:return 32;case Zg:return 268435456;default:return 32}default:return 32}}var ld=!1,us=null,hs=null,fs=null,Aa=new Map,za=new Map,ds=[],g1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lv(n,s){switch(n){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":Aa.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":za.delete(s.pointerId)}}function Ra(n,s,l,u,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},s!==null&&(s=vr(s),s!==null&&Rv(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function p1(n,s,l,u,d){switch(s){case"focusin":return us=Ra(us,n,s,l,u,d),!0;case"dragenter":return hs=Ra(hs,n,s,l,u,d),!0;case"mouseover":return fs=Ra(fs,n,s,l,u,d),!0;case"pointerover":var p=d.pointerId;return Aa.set(p,Ra(Aa.get(p)||null,n,s,l,u,d)),!0;case"gotpointercapture":return p=d.pointerId,za.set(p,Ra(za.get(p)||null,n,s,l,u,d)),!0}return!1}function Pv(n){var s=yr(n.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){n.blockedOn=s,lS(n.priority,function(){if(l.tag===13){var u=ci();u=$u(u);var d=kr(l,u);d!==null&&ui(d,l,u),sd(l,u)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vc(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=od(n.nativeEvent);if(l===null){l=n.nativeEvent;var u=new l.constructor(l.type,l);ch=u,l.target.dispatchEvent(u),ch=null}else return s=vr(l),s!==null&&Rv(s),n.blockedOn=l,!1;s.shift()}return!0}function Bv(n,s,l){vc(n)&&l.delete(s)}function m1(){ld=!1,us!==null&&vc(us)&&(us=null),hs!==null&&vc(hs)&&(hs=null),fs!==null&&vc(fs)&&(fs=null),Aa.forEach(Bv),za.forEach(Bv)}function bc(n,s){n.blockedOn===s&&(n.blockedOn=null,ld||(ld=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,m1)))}var _c=null;function Uv(n){_c!==n&&(_c=n,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){_c===n&&(_c=null);for(var s=0;s<n.length;s+=3){var l=n[s],u=n[s+1],d=n[s+2];if(typeof u!="function"){if(ad(u||l)===null)continue;break}var p=vr(l);p!==null&&(n.splice(s,3),s-=3,af(p,{pending:!0,data:d,method:l.method,action:u},u,d))}}))}function ja(n){function s(T){return bc(T,n)}us!==null&&bc(us,n),hs!==null&&bc(hs,n),fs!==null&&bc(fs,n),Aa.forEach(s),za.forEach(s);for(var l=0;l<ds.length;l++){var u=ds[l];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ds.length&&(l=ds[0],l.blockedOn===null);)Pv(l),l.blockedOn===null&&ds.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var d=l[u],p=l[u+1],b=d[qe]||null;if(typeof p=="function")b||Uv(l);else if(b){var x=null;if(p&&p.hasAttribute("formAction")){if(d=p,b=p[qe]||null)x=b.formAction;else if(ad(d)!==null)continue}else x=b.action;typeof x=="function"?l[u+1]=x:(l.splice(u,3),u-=3),Uv(l)}}}function cd(n){this._internalRoot=n}xc.prototype.render=cd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,u=ci();Av(l,u,n,s,null,null)},xc.prototype.unmount=cd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Av(n.current,2,null,n,null,null),ic(),s[mr]=null}};function xc(n){this._internalRoot=n}xc.prototype.unstable_scheduleHydration=function(n){if(n){var s=ep();n={blockedOn:null,target:n,priority:s};for(var l=0;l<ds.length&&s!==0&&s<ds[l].priority;l++);ds.splice(l,0,n),l===0&&Pv(n)}};var Fv=t.version;if(Fv!=="19.1.0")throw Error(i(527,Fv,"19.1.0"));W.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var y1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sc.isDisabled&&Sc.supportsFiber)try{Uo=Sc.inject(y1),ii=Sc}catch{}}return Pa.createRoot=function(n,s){if(!r(n))throw Error(i(299));var l=!1,u="",d=ey,p=iy,b=ny,x=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(x=s.unstable_transitionCallbacks)),s=Ev(n,1,!1,null,null,l,u,d,p,b,x,null),n[mr]=s.current,qf(n),new cd(s)},Pa.hydrateRoot=function(n,s,l){if(!r(n))throw Error(i(299));var u=!1,d="",p=ey,b=iy,x=ny,T=null,j=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(x=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(T=l.unstable_transitionCallbacks),l.formState!==void 0&&(j=l.formState)),s=Ev(n,1,!0,s,l??null,u,d,p,b,x,T,j),s.context=kv(null),l=s.current,u=ci(),u=$u(u),d=Zn(u),d.callback=null,Kn(l,d,u),l=u,s.current.lanes=l,Ho(s,l),sn(s),n[mr]=s.current,qf(n),new xc(s)},Pa.version="19.1.0",Pa}var Qv;function M1(){if(Qv)return fd.exports;Qv=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),fd.exports=D1(),fd.exports}var E1=M1();function M(o,t,e){return(t=function(i){var r=function(a,c){if(typeof a!="object"||!a)return a;var h=a[Symbol.toPrimitive];if(h!==void 0){var f=h.call(a,c);if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}(i,"string");return typeof r=="symbol"?r:r+""}(t))in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}function Zv(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),e.push.apply(e,i)}return e}function E(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Zv(Object(e),!0).forEach(function(i){M(o,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):Zv(Object(e)).forEach(function(i){Object.defineProperty(o,i,Object.getOwnPropertyDescriptor(e,i))})}return o}function It(o,t){if(o==null)return{};var e,i,r=function(c,h){if(c==null)return{};var f={};for(var g in c)if({}.hasOwnProperty.call(c,g)){if(h.indexOf(g)>=0)continue;f[g]=c[g]}return f}(o,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(i=0;i<a.length;i++)e=a[i],t.indexOf(e)>=0||{}.propertyIsEnumerable.call(o,e)&&(r[e]=o[e])}return r}function gn(o,t){return t||(t=o.slice(0)),Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(t)}}))}let Kv=class{constructor(){M(this,"browserShadowBlurConstant",1),M(this,"DPI",96),M(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),M(this,"perfLimitSizeTotal",2097152),M(this,"maxCacheSideLimit",4096),M(this,"minCacheSideLimit",256),M(this,"disableStyleCopyPaste",!1),M(this,"enableGLFiltering",!0),M(this,"textureSize",4096),M(this,"forceGLPutImageData",!1),M(this,"cachesBoundsOfCurve",!1),M(this,"fontPaths",{}),M(this,"NUM_FRACTION_DIGITS",4)}};const Dt=new class extends Kv{constructor(o){super(),this.configure(o)}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,o)}addFonts(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=E(E({},this.fontPaths),o)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(o=>{delete this.fontPaths[o]})}clearFonts(){this.fontPaths={}}restoreDefaults(o){const t=new Kv,e=o?.reduce((i,r)=>(i[r]=t[r],i),{})||t;this.configure(e)}},ws=function(o){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return console[o]("fabric",...e)};class cn extends Error{constructor(t,e){super("fabric: ".concat(t),e)}}class k1 extends cn{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}class A1{}class z1 extends A1{testPrecision(t,e){const i="precision ".concat(e,` float;
void main(){}`),r=t.createShader(t.FRAGMENT_SHADER);return!!r&&(t.shaderSource(r,i),t.compileShader(r),!!t.getShaderParameter(r,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(i=>this.testPrecision(e,i)),e.getExtension("WEBGL_lose_context").loseContext(),ws("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const R1={};let Jv;const fn=()=>Jv||(Jv={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new z1,dispose(){},copyPasteData:R1}),ko=()=>fn().document,Lu=()=>fn().window,e_=()=>{var o;return Math.max((o=Dt.devicePixelRatio)!==null&&o!==void 0?o:Lu().devicePixelRatio,1)},Xa=new class{constructor(){M(this,"charWidthsCache",{}),M(this,"boundsOfCurveCache",{})}getFontCache(o){let{fontFamily:t,fontStyle:e,fontWeight:i}=o;t=t.toLowerCase(),this.charWidthsCache[t]||(this.charWidthsCache[t]={});const r=this.charWidthsCache[t],a="".concat(e.toLowerCase(),"_").concat((i+"").toLowerCase());return r[a]||(r[a]={}),r[a]}clearFontCache(o){(o=(o||"").toLowerCase())?this.charWidthsCache[o]&&delete this.charWidthsCache[o]:this.charWidthsCache={}}limitDimsByArea(o){const{perfLimitSizeTotal:t}=Dt,e=Math.sqrt(t*o);return[Math.floor(e),Math.floor(t/e)]}},Wd="6.7.1";function su(){}const il=Math.PI/2,fu=2*Math.PI,_g=Math.PI/180,Xe=Object.freeze([1,0,0,1,0,0]),xg=16,ps=.4477152502,mt="center",zt="left",Je="top",Qd="bottom",ne="right",$e="none",Sg=/\r?\n/,i_="moving",Pu="scaling",n_="rotating",wg="rotate",s_="skewing",Qa="resizing",j1="modifyPoly",L1="modifyPath",du="changed",Bu="scale",ei="scaleX",Ai="scaleY",Ao="skewX",zo="skewY",pe="fill",ti="stroke",gu="modified",eo="json",md="svg",et=new class{constructor(){this[eo]=new Map,this[md]=new Map}has(o){return this[eo].has(o)}getClass(o){const t=this[eo].get(o);if(!t)throw new cn("No class registered for ".concat(o));return t}setClass(o,t){t?this[eo].set(t,o):(this[eo].set(o.type,o),this[eo].set(o.type.toLowerCase(),o))}getSVGClass(o){return this[md].get(o)}setSVGClass(o,t){this[md].set(t??o.type.toLowerCase(),o)}},pu=new class extends Array{remove(o){const t=this.indexOf(o);t>-1&&this.splice(t,1)}cancelAll(){const o=this.splice(0);return o.forEach(t=>t.abort()),o}cancelByCanvas(o){if(!o)return[];const t=this.filter(e=>{var i;return e.target===o||typeof e.target=="object"&&((i=e.target)===null||i===void 0?void 0:i.canvas)===o});return t.forEach(e=>e.abort()),t}cancelByTarget(o){if(!o)return[];const t=this.filter(e=>e.target===o);return t.forEach(e=>e.abort()),t}};class P1{constructor(){M(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach(i=>{let[r,a]=i;this.on(r,a)}),()=>this.off(t);if(e){const i=t;return this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(e),()=>this.off(i,e)}return()=>!1}once(t,e){if(typeof t=="object"){const i=[];return Object.entries(t).forEach(r=>{let[a,c]=r;i.push(this.once(a,c))}),()=>i.forEach(r=>r())}if(e){const i=this.on(t,function(){for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];e.call(this,...a),i()});return i}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const i=this.__eventListeners[t],r=i.indexOf(e);r>-1&&i.splice(r,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(t===void 0)for(const i in this.__eventListeners)this._removeEventListener(i);else typeof t=="object"?Object.entries(t).forEach(i=>{let[r,a]=i;this._removeEventListener(r,a)}):this._removeEventListener(t,e)}fire(t,e){var i;if(!this.__eventListeners)return;const r=(i=this.__eventListeners[t])===null||i===void 0?void 0:i.concat();if(r)for(let a=0;a<r.length;a++)r[a].call(this,e||{})}}const oo=(o,t)=>{const e=o.indexOf(t);return e!==-1&&o.splice(e,1),o},Fn=o=>{if(o===0)return 1;switch(Math.abs(o)/il){case 1:case 3:return 0;case 2:return-1}return Math.cos(o)},Hn=o=>{if(o===0)return 0;const t=o/il,e=Math.sign(o);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(o)};class B{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new B(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new B(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new B(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new B(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new B(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new B(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new B(this.x/t.x,this.y/t.y)}scalarDivide(t){return new B(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new B(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}midPointFrom(t){return this.lerp(t)}min(t){return new B(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new B(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}clone(){return new B(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cg;const i=Hn(t),r=Fn(t),a=this.subtract(e);return new B(a.x*r-a.y*i,a.x*i+a.y*r).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new B(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const Cg=new B(0,0),ru=o=>!!o&&Array.isArray(o._objects);function r_(o){class t extends o{constructor(){super(...arguments),M(this,"_objects",[])}_onObjectAdded(i){}_onObjectRemoved(i){}_onStackOrderChanged(i){}add(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];const c=this._objects.push(...r);return r.forEach(h=>this._onObjectAdded(h)),c}insertAt(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];return this._objects.splice(i,0,...a),a.forEach(h=>this._onObjectAdded(h)),this._objects.length}remove(){const i=this._objects,r=[];for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return c.forEach(f=>{const g=i.indexOf(f);g!==-1&&(i.splice(g,1),r.push(f),this._onObjectRemoved(f))}),r}forEachObject(i){this.getObjects().forEach((r,a,c)=>i(r,a,c))}getObjects(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return r.length===0?[...this._objects]:this._objects.filter(c=>c.isType(...r))}item(i){return this._objects[i]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(i,r){return!!this._objects.includes(i)||!!r&&this._objects.some(a=>a instanceof t&&a.contains(i,!0))}complexity(){return this._objects.reduce((i,r)=>i+=r.complexity?r.complexity():0,0)}sendObjectToBack(i){return!(!i||i===this._objects[0])&&(oo(this._objects,i),this._objects.unshift(i),this._onStackOrderChanged(i),!0)}bringObjectToFront(i){return!(!i||i===this._objects[this._objects.length-1])&&(oo(this._objects,i),this._objects.push(i),this._onStackOrderChanged(i),!0)}sendObjectBackwards(i,r){if(!i)return!1;const a=this._objects.indexOf(i);if(a!==0){const c=this.findNewLowerIndex(i,a,r);return oo(this._objects,i),this._objects.splice(c,0,i),this._onStackOrderChanged(i),!0}return!1}bringObjectForward(i,r){if(!i)return!1;const a=this._objects.indexOf(i);if(a!==this._objects.length-1){const c=this.findNewUpperIndex(i,a,r);return oo(this._objects,i),this._objects.splice(c,0,i),this._onStackOrderChanged(i),!0}return!1}moveObjectTo(i,r){return i!==this._objects[r]&&(oo(this._objects,i),this._objects.splice(r,0,i),this._onStackOrderChanged(i),!0)}findNewLowerIndex(i,r,a){let c;if(a){c=r;for(let h=r-1;h>=0;--h)if(i.isOverlapping(this._objects[h])){c=h;break}}else c=r-1;return c}findNewUpperIndex(i,r,a){let c;if(a){c=r;for(let h=r+1;h<this._objects.length;++h)if(i.isOverlapping(this._objects[h])){c=h;break}}else c=r+1;return c}collectObjects(i){let{left:r,top:a,width:c,height:h}=i,{includeIntersecting:f=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const g=[],m=new B(r,a),y=m.add(new B(c,h));for(let v=this._objects.length-1;v>=0;v--){const _=this._objects[v];_.selectable&&_.visible&&(f&&_.intersectsWithRect(m,y)||_.isContainedWithinRect(m,y)||f&&_.containsPoint(m)||f&&_.containsPoint(y))&&g.push(_)}return g}}return t}class o_ extends P1{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}}function ou(o){return Lu().requestAnimationFrame(o)}function B1(o){return Lu().cancelAnimationFrame(o)}let U1=0;const Cs=()=>U1++,Yn=()=>{const o=ko().createElement("canvas");if(!o||o.getContext===void 0)throw new cn("Failed to create `canvas` element");return o},F1=()=>ko().createElement("img"),zi=o=>{const t=Yn();return t.width=o.width,t.height=o.height,t},a_=(o,t,e)=>o.toDataURL("image/".concat(t),e),l_=(o,t,e)=>new Promise((i,r)=>{o.toBlob(i,"image/".concat(t),e)}),se=o=>o*_g,Vn=o=>o/_g,H1=o=>o.every((t,e)=>t===Xe[e]),Ke=(o,t,e)=>new B(o).transform(t,e),Xi=o=>{const t=1/(o[0]*o[3]-o[1]*o[2]),e=[t*o[3],-t*o[1],-t*o[2],t*o[0],0,0],{x:i,y:r}=new B(o[4],o[5]).transform(e,!0);return e[4]=-i,e[5]=-r,e},Oe=(o,t,e)=>[o[0]*t[0]+o[2]*t[1],o[1]*t[0]+o[3]*t[1],o[0]*t[2]+o[2]*t[3],o[1]*t[2]+o[3]*t[3],e?0:o[0]*t[4]+o[2]*t[5]+o[4],e?0:o[1]*t[4]+o[3]*t[5]+o[5]],Tg=(o,t)=>o.reduceRight((e,i)=>i&&e?Oe(i,e,t):i||e,void 0)||Xe.concat(),c_=o=>{let[t,e]=o;return Math.atan2(e,t)},mu=o=>{const t=c_(o),e=Math.pow(o[0],2)+Math.pow(o[1],2),i=Math.sqrt(e),r=(o[0]*o[3]-o[2]*o[1])/i,a=Math.atan2(o[0]*o[2]+o[1]*o[3],e);return{angle:Vn(t),scaleX:i,scaleY:r,skewX:Vn(a),skewY:0,translateX:o[4]||0,translateY:o[5]||0}},nl=function(o){return[1,0,0,1,o,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Ro(){let{angle:o=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=se(o),r=Fn(i),a=Hn(i);return[r,a,-a,r,t?t-(r*t-a*e):0,e?e-(a*t+r*e):0]}const Og=function(o){return[o,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,0,0]},u_=o=>Math.tan(se(o)),h_=o=>[1,0,u_(o),1,0,0],f_=o=>[1,u_(o),0,1,0,0],Uu=o=>{let{scaleX:t=1,scaleY:e=1,flipX:i=!1,flipY:r=!1,skewX:a=0,skewY:c=0}=o,h=Og(i?-t:t,r?-e:e);return a&&(h=Oe(h,h_(a),!0)),c&&(h=Oe(h,f_(c),!0)),h},Y1=o=>{const{translateX:t=0,translateY:e=0,angle:i=0}=o;let r=nl(t,e);i&&(r=Oe(r,Ro({angle:i})));const a=Uu(o);return H1(a)||(r=Oe(r,a)),r},au=function(o){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(i,r){if(t&&t.aborted)return r(new k1("loadImage"));const a=F1();let c;t&&(c=function(f){a.src="",r(f)},t.addEventListener("abort",c,{once:!0}));const h=function(){a.onload=a.onerror=null,c&&t?.removeEventListener("abort",c),i(a)};o?(a.onload=h,a.onerror=function(){c&&t?.removeEventListener("abort",c),r(new cn("Error loading ".concat(a.src)))},e&&(a.crossOrigin=e),a.src=o):h()})},Za=function(o){let{signal:t,reviver:e=su}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((i,r)=>{const a=[];t&&t.addEventListener("abort",r,{once:!0}),Promise.all(o.map(c=>et.getClass(c.type).fromObject(c,{signal:t}).then(h=>(e(c,h),a.push(h),h)))).then(i).catch(c=>{a.forEach(h=>{h.dispose&&h.dispose()}),r(c)}).finally(()=>{t&&t.removeEventListener("abort",r)})})},Fu=function(o){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((e,i)=>{const r=[];t&&t.addEventListener("abort",i,{once:!0});const a=Object.values(o).map(h=>h&&h.type&&et.has(h.type)?Za([h],{signal:t}).then(f=>{let[g]=f;return r.push(g),g}):h),c=Object.keys(o);Promise.all(a).then(h=>h.reduce((f,g,m)=>(f[c[m]]=g,f),{})).then(e).catch(h=>{r.forEach(f=>{f.dispose&&f.dispose()}),i(h)}).finally(()=>{t&&t.removeEventListener("abort",i)})})},jo=function(o){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((t,e)=>(e in o&&(t[e]=o[e]),t),{})},Dg=(o,t)=>Object.keys(o).reduce((e,i)=>(t(o[i],i,o)&&(e[i]=o[i]),e),{}),Nt=(o,t)=>parseFloat(Number(o).toFixed(t)),Ka=o=>"matrix("+o.map(t=>Nt(t,Dt.NUM_FRACTION_DIGITS)).join(" ")+")",Ei=o=>!!o&&o.toLive!==void 0,$v=o=>!!o&&typeof o.toObject=="function",t0=o=>!!o&&o.offsetX!==void 0&&"source"in o,Js=o=>!!o&&"multiSelectionStacking"in o;function d_(o){const t=o&&Ni(o);let e=0,i=0;if(!o||!t)return{left:e,top:i};let r=o;const a=t.documentElement,c=t.body||{scrollLeft:0,scrollTop:0};for(;r&&(r.parentNode||r.host)&&(r=r.parentNode||r.host,r===t?(e=c.scrollLeft||a.scrollLeft||0,i=c.scrollTop||a.scrollTop||0):(e+=r.scrollLeft||0,i+=r.scrollTop||0),r.nodeType!==1||r.style.position!=="fixed"););return{left:e,top:i}}const Ni=o=>o.ownerDocument||null,g_=o=>{var t;return((t=o.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},p_=function(o,t,e){let{width:i,height:r}=e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;o.width=i,o.height=r,a>1&&(o.setAttribute("width",(i*a).toString()),o.setAttribute("height",(r*a).toString()),t.scale(a,a))},Zd=(o,t)=>{let{width:e,height:i}=t;e&&(o.style.width=typeof e=="number"?"".concat(e,"px"):e),i&&(o.style.height=typeof i=="number"?"".concat(i,"px"):i)};function e0(o){return o.onselectstart!==void 0&&(o.onselectstart=()=>!1),o.style.userSelect=$e,o}class m_{constructor(t){M(this,"_originalCanvasStyle",void 0),M(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=(i=t)&&i.getContext!==void 0?t:t&&ko().getElementById(t)||Yn();var i;if(e.hasAttribute("data-fabric"))throw new cn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:i}=t;const{el:r}=this.lower;r.classList.remove("lower-canvas"),r.removeAttribute("data-fabric"),r.setAttribute("width","".concat(e)),r.setAttribute("height","".concat(i)),r.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:i,ctx:r}=this.lower;p_(i,r,t,e)}setCSSDimensions(t){Zd(this.lower.el,t)}calcOffset(){return function(t){var e;const i=t&&Ni(t),r={left:0,top:0};if(!i)return r;const a=((e=g_(t))===null||e===void 0?void 0:e.getComputedStyle(t,null))||{};r.left+=parseInt(a.borderLeftWidth,10)||0,r.top+=parseInt(a.borderTopWidth,10)||0,r.left+=parseInt(a.paddingLeft,10)||0,r.top+=parseInt(a.paddingTop,10)||0;let c={left:0,top:0};const h=i.documentElement;t.getBoundingClientRect!==void 0&&(c=t.getBoundingClientRect());const f=d_(t);return{left:c.left+f.left-(h.clientLeft||0)+r.left,top:c.top+f.top-(h.clientTop||0)+r.top}}(this.lower.el)}dispose(){fn().dispose(this.lower.el),delete this.lower}}const V1={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Xe]};class sl extends r_(o_){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return sl.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new m_(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];const a=super.insertAt(t,...i);return i.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),a}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(ws("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?e_():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,e){return this.setDimensions({width:t},e)}setHeight(t,e){return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const r=E({width:this.width,height:this.height},t);this.elements.setDimensions(r,this.getRetinaScaling()),this.hasLostContext=!0,this.width=r.width,this.height=r.height}i||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,e){this._setDimensionsImpl(t,e),e&&e.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const i=t,r=[...this.viewportTransform],a=Ke(t,Xi(r));r[0]=e,r[3]=e;const c=Ke(a,r);r[4]+=i.x-c.x,r[5]+=i.y-c.y,this.setViewportTransform(r)}setZoom(t){this.zoomToPoint(new B(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new B(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ou(()=>this.renderAndReset()))}calcViewportBoundaries(){const t=this.width,e=this.height,i=Xi(this.viewportTransform),r=Ke({x:0,y:0},i),a=Ke({x:t,y:e},i),c=r.min(a),h=r.max(a);return this.vptCoords={tl:c,tr:new B(h.x,c.y),bl:new B(c.x,h.y),br:h}}cancelRequestedRender(){this.nextRenderHandle&&(B1(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const i=this.viewportTransform,r=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),r&&(r._set("canvas",this),r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,r)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const i=this.viewportTransform;t.save(),t.transform(...i),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let i=0,r=e.length;i<r;++i)e[i]&&e[i].render(t)}_renderBackgroundOrOverlay(t,e){const i=this["".concat(e,"Color")],r=this["".concat(e,"Image")],a=this.viewportTransform,c=this["".concat(e,"Vpt")];if(!i&&!r)return;const h=Ei(i);if(i){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=h?i.toLive(t):i,c&&t.transform(...a),h){t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);const f=i.gradientTransform||i.patternTransform;f&&t.transform(...f)}t.fill(),t.restore()}if(r){t.save();const{skipOffscreen:f}=this;this.skipOffscreen=c,c&&t.transform(...a),r.render(t),this.skipOffscreen=f,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new B(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new B(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new B(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new B(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new B(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Ke(this.getCenterPoint(),Xi(this.viewportTransform))}_centerObject(t,e){t.setXY(e,mt,mt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const i=this.clipPath,r=i&&!i.excludeFromExport?this._toObject(i,t,e):null;return E(E(E({version:Wd},jo(this,e)),{},{objects:this._objects.filter(a=>!a.excludeFromExport).map(a=>this._toObject(a,t,e))},this.__serializeBgOverlay(t,e)),r?{clipPath:r}:null)}_toObject(t,e,i){let r;this.includeDefaultValues||(r=t.includeDefaultValues,t.includeDefaultValues=!1);const a=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=!!r),a}__serializeBgOverlay(t,e){const i={},r=this.backgroundImage,a=this.overlayImage,c=this.backgroundColor,h=this.overlayColor;return Ei(c)?c.excludeFromExport||(i.background=c.toObject(e)):c&&(i.background=c),Ei(h)?h.excludeFromExport||(i.overlay=h.toObject(e)):h&&(i.overlay=h),r&&!r.excludeFromExport&&(i.backgroundImage=this._toObject(r,t,e)),a&&!a.excludeFromExport&&(i.overlayImage=this._toObject(a,t,e)),i}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this.clipPath&&i.push(`</g>
`),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const i=e.width||"".concat(this.width),r=e.height||"".concat(this.height),a=Dt.NUM_FRACTION_DIGITS,c=e.viewBox;let h;if(c)h='viewBox="'.concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height,'" ');else if(this.svgViewportTransformation){const f=this.viewportTransform;h='viewBox="'.concat(Nt(-f[4]/f[0],a)," ").concat(Nt(-f[5]/f[3],a)," ").concat(Nt(this.width/f[0],a)," ").concat(Nt(this.height/f[3],a),'" ')}else h='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',r,'" ',h,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Wd,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(Cs()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(t=>{const e=this["".concat(t,"Color")];if(Ei(e)){const i=this["".concat(t,"Vpt")],r=this.viewportTransform,a={isType:()=>!1,width:this.width/(i?r[0]:1),height:this.height/(i?r[3]:1)};return e.toSVG(a,{additionalTransform:i?Ka(r):""})}}).join("")}createSVGFontFacesMarkup(){const t=[],e={},i=Dt.fontPaths;this._objects.forEach(function a(c){t.push(c),ru(c)&&c._objects.forEach(a)}),t.forEach(a=>{if(!(c=a)||typeof c._renderText!="function")return;var c;const{styles:h,fontFamily:f}=a;!e[f]&&i[f]&&(e[f]=!0,h&&Object.values(h).forEach(g=>{Object.values(g).forEach(m=>{let{fontFamily:y=""}=m;!e[y]&&i[y]&&(e[y]=!0)})}))});const r=Object.keys(e).map(a=>`		@font-face {
			font-family: '`.concat(a,`';
			src: url('`).concat(i[a],`');
		}
`)).join("");return r?`	<style type="text/css"><![CDATA[
`.concat(r,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject(i=>{i.excludeFromExport||this._setSVGObject(t,i,e)})}_setSVGObject(t,e,i){t.push(e.toSVG(i))}_setSVGBgOverlayImage(t,e,i){const r=this[e];r&&!r.excludeFromExport&&r.toSVG&&t.push(r.toSVG(i))}_setSVGBgOverlayColor(t,e){const i=this["".concat(e,"Color")];if(i)if(Ei(i)){const r=i.repeat||"",a=this.width,c=this.height,h=this["".concat(e,"Vpt")]?Ka(Xi(this.viewportTransform)):"";t.push('<rect transform="'.concat(h," translate(").concat(a/2,",").concat(c/2,')" x="').concat(i.offsetX-a/2,'" y="').concat(i.offsetY-c/2,'" width="').concat(r!=="repeat-y"&&r!=="no-repeat"||!t0(i)?a:i.source.width,'" height="').concat(r!=="repeat-x"&&r!=="no-repeat"||!t0(i)?c:i.source.height,'" fill="url(#SVGID_').concat(i.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new cn("`json` is undefined"));const r=typeof t=="string"?JSON.parse(t):t,{objects:a=[],backgroundImage:c,background:h,overlayImage:f,overlay:g,clipPath:m}=r,y=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Za(a,{reviver:e,signal:i}),Fu({backgroundImage:c,backgroundColor:h,overlayImage:f,overlayColor:g,clipPath:m},{signal:i})]).then(v=>{let[_,S]=v;return this.clear(),this.add(..._),this.set(r),this.set(S),this.renderOnAddRemove=y,this})}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=zi(this);return new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:i=1,multiplier:r=1,enableRetinaScaling:a=!1}=t,c=r*(a?this.getRetinaScaling():1);return a_(this.toCanvasElement(c,t),e,i)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:i=1,multiplier:r=1,enableRetinaScaling:a=!1}=t,c=r*(a?this.getRetinaScaling():1);return l_(this.toCanvasElement(c,t),e,i)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:i,left:r,top:a,filter:c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const h=(e||this.width)*t,f=(i||this.height)*t,g=this.getZoom(),m=this.width,y=this.height,v=this.skipControlsDrawing,_=g*t,S=this.viewportTransform,w=[_,0,0,_,(S[4]-(r||0))*t,(S[5]-(a||0))*t],C=this.enableRetinaScaling,k=zi({width:h,height:f}),z=c?this._objects.filter(Y=>c(Y)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=w,this.width=h,this.height=f,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(k.getContext("2d"),z),this.viewportTransform=S,this.width=m,this.height=y,this.calcViewportBoundaries(),this.enableRetinaScaling=C,this.skipControlsDrawing=v,k}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),pu.cancelByCanvas(this),this.disposed=!0,new Promise((t,e)=>{const i=()=>{this.destroy(),t(!0)};i.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=i:i()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(t=>t.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}M(sl,"ownDefaults",V1);const N1=["touchstart","touchmove","touchend"],X1=o=>{const t=d_(o.target),e=function(i){const r=i.changedTouches;return r&&r[0]?r[0]:i}(o);return new B(e.clientX+t.left,e.clientY+t.top)},Kd=o=>N1.includes(o.type)||o.pointerType==="touch",i0=o=>{o.preventDefault(),o.stopPropagation()},Pn=o=>{let t=0,e=0,i=0,r=0;for(let a=0,c=o.length;a<c;a++){const{x:h,y:f}=o[a];(h>i||!a)&&(i=h),(h<t||!a)&&(t=h),(f>r||!a)&&(r=f),(f<e||!a)&&(e=f)}return{left:t,top:e,width:i-t,height:r-e}},q1=["translateX","translateY","scaleX","scaleY"],G1=(o,t)=>yu(o,Oe(t,o.calcOwnMatrix())),yu=(o,t)=>{const e=mu(t),{translateX:i,translateY:r,scaleX:a,scaleY:c}=e,h=It(e,q1),f=new B(i,r);o.flipX=!1,o.flipY=!1,Object.assign(o,h),o.set({scaleX:a,scaleY:c}),o.setPositionByOrigin(f,mt,mt)},I1=o=>{o.scaleX=1,o.scaleY=1,o.skewX=0,o.skewY=0,o.flipX=!1,o.flipY=!1,o.rotate(0)},y_=o=>({scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,angle:o.angle,left:o.left,flipX:o.flipX,flipY:o.flipY,top:o.top}),Mg=(o,t,e)=>{const i=o/2,r=t/2,a=[new B(-i,-r),new B(i,-r),new B(-i,r),new B(i,r)].map(h=>h.transform(e)),c=Pn(a);return new B(c.width,c.height)},Hu=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xe;return Oe(Xi(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xe),o)},po=function(o){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xe,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xe;return o.transform(Hu(t,e))},W1=function(o){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xe,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xe;return o.transform(Hu(t,e),!0)},Q1=(o,t,e)=>{const i=Hu(t,e);return yu(o,Oe(i,o.calcOwnMatrix())),i},v_=(o,t)=>{var e;const{transform:{target:i}}=t;(e=i.canvas)===null||e===void 0||e.fire("object:".concat(o),E(E({},t),{},{target:i})),i.fire(o,t)},Z1={left:-.5,top:-.5,center:0,bottom:.5,right:.5},le=o=>typeof o=="string"?Z1[o]:o-.5,vu="not-allowed";function b_(o){return le(o.originX)===le(mt)&&le(o.originY)===le(mt)}function n0(o){return .5-le(o)}const Ii=(o,t)=>o[t],__=(o,t,e,i)=>({e:o,transform:t,pointer:new B(e,i)});function x_(o,t){const e=o.getTotalAngle()+Vn(Math.atan2(t.y,t.x))+360;return Math.round(e%360/45)}function Eg(o,t,e,i,r){var a;let{target:c,corner:h}=o;const f=c.controls[h],g=((a=c.canvas)===null||a===void 0?void 0:a.getZoom())||1,m=c.padding/g,y=function(v,_,S,w){const C=v.getRelativeCenterPoint(),k=S!==void 0&&w!==void 0?v.translateToGivenOrigin(C,mt,mt,S,w):new B(v.left,v.top);return(v.angle?_.rotate(-se(v.angle),C):_).subtract(k)}(c,new B(i,r),t,e);return y.x>=m&&(y.x-=m),y.x<=-m&&(y.x+=m),y.y>=m&&(y.y-=m),y.y<=m&&(y.y+=m),y.x-=f.offsetX,y.y-=f.offsetY,y}const K1=(o,t,e,i)=>{const{target:r,offsetX:a,offsetY:c}=t,h=e-a,f=i-c,g=!Ii(r,"lockMovementX")&&r.left!==h,m=!Ii(r,"lockMovementY")&&r.top!==f;return g&&r.set(zt,h),m&&r.set(Je,f),(g||m)&&v_(i_,__(o,t,e,i)),g||m},s0={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},yd=(o,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?o+6*(t-o)*e:e<.5?t:e<2/3?o+(t-o)*(2/3-e)*6:o),r0=(o,t,e,i)=>{o/=255,t/=255,e/=255;const r=Math.max(o,t,e),a=Math.min(o,t,e);let c,h;const f=(r+a)/2;if(r===a)c=h=0;else{const g=r-a;switch(h=f>.5?g/(2-r-a):g/(r+a),r){case o:c=(t-e)/g+(t<e?6:0);break;case t:c=(e-o)/g+2;break;case e:c=(o-t)/g+4}c/=6}return[Math.round(360*c),Math.round(100*h),Math.round(100*f),i]},o0=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(o)/(o.endsWith("%")?100:1)},wc=o=>Math.min(Math.round(o),255).toString(16).toUpperCase().padStart(2,"0"),a0=o=>{let[t,e,i,r=1]=o;const a=Math.round(.3*t+.59*e+.11*i);return[a,a,a,r]};class Lt{constructor(t){if(M(this,"isUnrecognised",!1),t)if(t instanceof Lt)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,i,r,a=1]=t;this.setSource([e,i,r,a])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return(t=t.toLowerCase())in s0&&(t=s0[t]),t==="transparent"?[255,255,255,0]:Lt.sourceFromHex(t)||Lt.sourceFromRgb(t)||Lt.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,i]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(i,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,i]=r0(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(i,"%)")}toHsla(){const[t,e,i,r]=r0(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(i,"%,").concat(r,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,i,r]=this.getSource();return"".concat(wc(t)).concat(wc(e)).concat(wc(i)).concat(wc(Math.round(255*r)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(a0(this.getSource())),this}toBlackWhite(t){const[e,,,i]=a0(this.getSource()),r=e<(t||127)?0:255;return this.setSource([r,r,r,i]),this}overlayWith(t){t instanceof Lt||(t=new Lt(t));const e=this.getSource(),i=t.getSource(),[r,a,c]=e.map((h,f)=>Math.round(.5*h+.5*i[f]));return this.setSource([r,a,c,e[3]]),this}static fromRgb(t){return Lt.fromRgba(t)}static fromRgba(t){return new Lt(Lt.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(e){const[i,r,a]=e.slice(1,4).map(c=>{const h=parseFloat(c);return c.endsWith("%")?Math.round(2.55*h):h});return[i,r,a,o0(e[4])]}}static fromHsl(t){return Lt.fromHsla(t)}static fromHsla(t){return new Lt(Lt.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!e)return;const i=(Lt.parseAngletoDegrees(e[1])%360+360)%360/360,r=parseFloat(e[2])/100,a=parseFloat(e[3])/100;let c,h,f;if(r===0)c=h=f=a;else{const g=a<=.5?a*(r+1):a+r-a*r,m=2*a-g;c=yd(m,g,i+1/3),h=yd(m,g,i),f=yd(m,g,i-1/3)}return[Math.round(255*c),Math.round(255*h),Math.round(255*f),o0(e[4])]}static fromHex(t){return new Lt(Lt.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let i;i=e.length<=4?e.split("").map(f=>f+f):e.match(/.{2}/g);const[r,a,c,h=255]=i.map(f=>parseInt(f,16));return[r,a,c,h/255]}}static parseAngletoDegrees(t){const e=t.toLowerCase(),i=parseFloat(e);return e.includes("rad")?Vn(i):e.includes("turn")?360*i:i}}const mo=function(o){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xg;const e=/\D{0,2}$/.exec(o),i=parseFloat(o),r=Dt.DPI;switch(e?.[0]){case"mm":return i*r/25.4;case"cm":return i*r/2.54;case"in":return i*r;case"pt":return i*r/72;case"pc":return i*r/72*12;case"em":return i*t;default:return i}},J1=o=>{const[t,e]=o.trim().split(" "),[i,r]=(a=t)&&a!==$e?[a.slice(1,4),a.slice(5,8)]:a===$e?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:e||"meet",alignX:i,alignY:r}},Ja=function(o,t){let e,i,r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)e="url(#SVGID_".concat(t.id,")");else{const a=new Lt(t),c=a.getAlpha();e=a.toRgb(),c!==1&&(i=c.toString())}else e="none";return r?"".concat(o,": ").concat(e,"; ").concat(i?"".concat(o,"-opacity: ").concat(i,"; "):""):"".concat(o,'="').concat(e,'" ').concat(i?"".concat(o,'-opacity="').concat(i,'" '):"")};class S_{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):$e,a=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",h=this.strokeLineJoin?this.strokeLineJoin:"miter",f=this.strokeMiterLimit?this.strokeMiterLimit:"4",g=this.opacity!==void 0?this.opacity:"1",m=this.visible?"":" visibility: hidden;",y=t?"":this.getSvgFilter(),v=Ja(pe,this.fill);return[Ja(ti,this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",h,"; ","stroke-miterlimit: ",f,"; ",v,"fill-rule: ",e,"; ","opacity: ",g,";",y,m].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=t?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'.concat(Ka(i));return"".concat(r).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),a=t.indexOf("COMMON_PARTS");return t[a]=r,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:i,withShadow:r,additionalTransform:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=e?"":'style="'.concat(this.getSvgStyles(),'" '),h=r?'style="'.concat(this.getSvgFilter(),'" '):"",f=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=f&&f.absolutePositioned,y=this.stroke,v=this.fill,_=this.shadow,S=[],w=t.indexOf("COMMON_PARTS");let C;f&&(f.clipPathId="CLIPPATH_".concat(Cs()),C='<clipPath id="'.concat(f.clipPathId,`" >
`).concat(f.toClipPathSVG(i),`</clipPath>
`)),m&&S.push("<g ",h,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),m?"":h+this.getSvgCommons(),` >
`);const k=[c,g,e?"":this.addPaintOrder()," ",a?'transform="'.concat(a,'" '):""].join("");return t[w]=k,Ei(v)&&S.push(v.toSVG(this)),Ei(y)&&S.push(y.toSVG(this)),_&&S.push(_.toSVG(this)),f&&S.push(C),S.push(t.join("")),S.push(`</g>
`),m&&S.push(`</g>
`),i?i(S.join("")):S.join("")}addPaintOrder(){return this.paintFirst!==pe?' paint-order="'.concat(this.paintFirst,'" '):""}}function Yu(o){return new RegExp("^("+o.join("|")+")\\b","i")}const hr="textDecorationThickness",w_=["fontSize","fontWeight","fontFamily","fontStyle"],C_=["underline","overline","linethrough"],T_=[...w_,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],O_=[...T_,...C_,"textBackgroundColor","direction",hr],$1=[...w_,...C_,ti,"strokeWidth",pe,"deltaY","textBackgroundColor",hr],tC={_reNewline:Sg,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:zt,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:zt,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[hr]:66.667},ln="justify",bu="justify-left",qa="justify-right",Ga="justify-center";var l0,c0,u0;const qi=String.raw(l0||(l0=gn(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),vd=String.raw(c0||(c0=gn(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),eC=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+qi+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+qi+"))?\\s+(.*)"),iC={cx:zt,x:zt,r:"radius",cy:Je,y:Je,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":hr},bd="font-size",_d="clip-path";Yu(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Yu(["symbol","image","marker","pattern","view","svg"]);const h0=Yu(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(u0||(u0=gn(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),qi,vd,qi,vd,qi,vd,qi));const nC=new B(1,0),D_=new B,M_=(o,t)=>o.rotate(t),Jd=(o,t)=>new B(t).subtract(o),$d=o=>o.distanceFrom(D_),tg=(o,t)=>Math.atan2(Ia(o,t),rC(o,t)),sC=o=>tg(nC,o),kg=o=>o.eq(D_)?o:o.scalarDivide($d(o)),E_=function(o){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return kg(new B(-o.y,o.x).scalarMultiply(t?1:-1))},Ia=(o,t)=>o.x*t.y-o.y*t.x,rC=(o,t)=>o.x*t.x+o.y*t.y,f0=(o,t,e)=>{if(o.eq(t)||o.eq(e))return!0;const i=Ia(t,e),r=Ia(t,o),a=Ia(e,o);return i>=0?r>=0&&a<=0:!(r<=0&&a>=0)},d0="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",g0=new RegExp("(?:\\s|^)"+d0+d0+"("+qi+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Bn{constructor(t){const e=typeof t=="string"?Bn.parseShadow(t):t;Object.assign(this,Bn.ownDefaults,e),this.id=Cs()}static parseShadow(t){const e=t.trim(),[,i=0,r=0,a=0]=(g0.exec(e)||[]).map(c=>parseFloat(c)||0);return{color:(e.replace(g0,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:r,blur:a}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=M_(new B(this.offsetX,this.offsetY),se(-t.angle)),i=new Lt(this.color);let r=40,a=40;return t.width&&t.height&&(r=100*Nt((Math.abs(e.x)+this.blur)/t.width,Dt.NUM_FRACTION_DIGITS)+20,a=100*Nt((Math.abs(e.y)+this.blur)/t.height,Dt.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(a,'%" height="').concat(100+2*a,'%" x="-').concat(r,'%" width="').concat(100+2*r,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Nt(this.blur?this.blur/2:0,Dt.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Nt(e.x,Dt.NUM_FRACTION_DIGITS),'" dy="').concat(Nt(e.y,Dt.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(i.toRgb(),'" flood-opacity="').concat(i.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},e=Bn.ownDefaults;return this.includeDefaultValues?t:Dg(t,(i,r)=>i!==e[r])}static async fromObject(t){return new this(t)}}M(Bn,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),M(Bn,"type","shadow"),et.setClass(Bn,"shadow");const wo=(o,t,e)=>Math.max(o,Math.min(t,e)),oC=[Je,zt,ei,Ai,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Ao,zo],Nn=[pe,ti,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],aC={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:zt,originY:Je,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:pe,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},lC=(o,t,e,i)=>-e*Math.cos(o/i*il)+e+t,cC=()=>!1;class Ag{constructor(t){let{startValue:e,byValue:i,duration:r=500,delay:a=0,easing:c=lC,onStart:h=su,onChange:f=su,onComplete:g=su,abort:m=cC,target:y}=t;M(this,"_state","pending"),M(this,"durationProgress",0),M(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=r,this.delay=a,this.easing=c,this._onStart=h,this._onChange=f,this._onComplete=g,this._abort=m,this.target=y,this.startValue=e,this.byValue=i,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>ou(t),this.delay):ou(t)}tick(t){const e=(t||+new Date)-this.startTime,i=Math.min(e,this.duration);this.durationProgress=i/this.duration;const{value:r,valueProgress:a}=this.calculate(i);this.value=Object.freeze(r),this.valueProgress=a,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ou(this.tick)))}register(){pu.push(this)}unregister(){pu.remove(this)}abort(){this._state="aborted",this.unregister()}}const uC=["startValue","endValue"];class hC extends Ag{constructor(t){let{startValue:e=0,endValue:i=100}=t;super(E(E({},It(t,uC)),{},{startValue:e,byValue:i-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const fC=["startValue","endValue"];class dC extends Ag{constructor(t){let{startValue:e=[0],endValue:i=[100]}=t;super(E(E({},It(t,fC)),{},{startValue:e,byValue:i.map((r,a)=>r-e[a])}))}calculate(t){const e=this.startValue.map((i,r)=>this.easing(t,i,this.byValue[r],this.duration,r));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const gC=["startValue","endValue","easing","onChange","onComplete","abort"],pC=(o,t,e,i)=>t+e*(1-Math.cos(o/i*il)),xd=o=>o&&((t,e,i)=>o(new Lt(t).toRgba(),e,i));class mC extends Ag{constructor(t){let{startValue:e,endValue:i,easing:r=pC,onChange:a,onComplete:c,abort:h}=t,f=It(t,gC);const g=new Lt(e).getSource(),m=new Lt(i).getSource();super(E(E({},f),{},{startValue:g,byValue:m.map((y,v)=>y-g[v]),easing:r,onChange:xd(a),onComplete:xd(c),abort:xd(h)}))}calculate(t){const[e,i,r,a]=this.startValue.map((h,f)=>this.easing(t,h,this.byValue[f],this.duration,f)),c=[...[e,i,r].map(Math.round),wo(0,a,1)];return{value:c,valueProgress:c.map((h,f)=>this.byValue[f]!==0?Math.abs((h-this.startValue[f])/this.byValue[f]):0).find(h=>h!==0)||0}}}function k_(o){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(o)?new dC(o):new hC(o);return t.start(),t}function yC(o){const t=new mC(o);return t.start(),t}class Qt{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some(e=>e.eq(t))}append(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.points=this.points.concat(e.filter(r=>!this.includes(r))),this}static isPointContained(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(e.eq(i))return t.eq(e);if(e.x===i.x)return t.x===e.x&&(r||t.y>=Math.min(e.y,i.y)&&t.y<=Math.max(e.y,i.y));if(e.y===i.y)return t.y===e.y&&(r||t.x>=Math.min(e.x,i.x)&&t.x<=Math.max(e.x,i.x));{const a=Jd(e,i),c=Jd(e,t).divide(a);return r?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static isPointInPolygon(t,e){const i=new B(t).setX(Math.min(t.x-1,...e.map(a=>a.x)));let r=0;for(let a=0;a<e.length;a++){const c=this.intersectSegmentSegment(e[a],e[(a+1)%e.length],t,i);if(c.includes(t))return!0;r+=+(c.status==="Intersection")}return r%2==1}static intersectLineLine(t,e,i,r){let a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],c=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const h=e.x-t.x,f=e.y-t.y,g=r.x-i.x,m=r.y-i.y,y=t.x-i.x,v=t.y-i.y,_=g*v-m*y,S=h*v-f*y,w=m*h-g*f;if(w!==0){const C=_/w,k=S/w;return(a||0<=C&&C<=1)&&(c||0<=k&&k<=1)?new Qt("Intersection").append(new B(t.x+C*h,t.y+C*f)):new Qt}if(_===0||S===0){const C=a||c||Qt.isPointContained(t,i,r)||Qt.isPointContained(e,i,r)||Qt.isPointContained(i,t,e)||Qt.isPointContained(r,t,e);return new Qt(C?"Coincident":void 0)}return new Qt("Parallel")}static intersectSegmentLine(t,e,i,r){return Qt.intersectLineLine(t,e,i,r,!1,!0)}static intersectSegmentSegment(t,e,i,r){return Qt.intersectLineLine(t,e,i,r,!1,!1)}static intersectLinePolygon(t,e,i){let r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const a=new Qt,c=i.length;for(let h,f,g,m=0;m<c;m++){if(h=i[m],f=i[(m+1)%c],g=Qt.intersectLineLine(t,e,h,f,r,!1),g.status==="Coincident")return g;a.append(...g.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectSegmentPolygon(t,e,i){return Qt.intersectLinePolygon(t,e,i,!1)}static intersectPolygonPolygon(t,e){const i=new Qt,r=t.length,a=[];for(let c=0;c<r;c++){const h=t[c],f=t[(c+1)%r],g=Qt.intersectSegmentPolygon(h,f,e);g.status==="Coincident"?(a.push(g),i.append(h,f)):i.append(...g.points)}return a.length>0&&a.length===t.length?new Qt("Coincident"):(i.points.length>0&&(i.status="Intersection"),i)}static intersectPolygonRectangle(t,e,i){const r=e.min(i),a=e.max(i),c=new B(a.x,r.y),h=new B(r.x,a.y);return Qt.intersectPolygonPolygon(t,[r,c,a,h])}}class vC extends o_{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?Ke(t,this.group.calcTransformMatrix()):t}setXY(t,e,i){this.group&&(t=Ke(t,Xi(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,i)}getRelativeXY(){return new B(this.left,this.top)}setRelativeXY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,e,i)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:e,br:i,bl:r}=this.aCoords||(this.aCoords=this.calcACoords()),a=[t,e,i,r];if(this.group){const c=this.group.calcTransformMatrix();return a.map(h=>Ke(h,c))}return a}intersectsWithRect(t,e){return Qt.intersectPolygonRectangle(this.getCoords(),t,e).status==="Intersection"}intersectsWithObject(t){const e=Qt.intersectPolygonPolygon(this.getCoords(),t.getCoords());return e.status==="Intersection"||e.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every(e=>t.containsPoint(e))}isContainedWithinRect(t,e){const{left:i,top:r,width:a,height:c}=this.getBoundingRect();return i>=t.x&&i+a<=e.x&&r>=t.y&&r+c<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return Qt.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.getCoords().some(i=>i.x<=e.x&&i.x>=t.x&&i.y<=e.y&&i.y>=t.y)||!!this.intersectsWithRect(t,e)||this.containsPoint(t.midPointFrom(e))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return this.intersectsWithRect(t,e)?!0:this.getCoords().every(i=>(i.x>=e.x||i.x<=t.x)&&(i.y>=e.y||i.y<=t.y))&&this.containsPoint(t.midPointFrom(e))}getBoundingRect(){return Pn(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(ei,t),this._set(Ai,t),this.setCoords()}scaleToWidth(t){const e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)}scaleToHeight(t){const e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?Vn(c_(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||Xe.concat()}calcACoords(){const t=Ro({angle:this.angle}),{x:e,y:i}=this.getRelativeCenterPoint(),r=nl(e,i),a=Oe(r,t),c=this._getTransformedDimensions(),h=c.x/2,f=c.y/2;return{tl:Ke({x:-h,y:-f},a),tr:Ke({x:h,y:-f},a),bl:Ke({x:-h,y:f},a),br:Ke({x:h,y:f},a)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=[];return!t&&this.group&&(e=this.group.transformMatrixKey(t)),e.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,le(this.originX),le(this.originY)),e}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const i=this.transformMatrixKey(t),r=this.matrixCache;return r&&r.key.every((a,c)=>a===i[c])?r.value:(this.group&&(e=Oe(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:i,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const i=this.getRelativeCenterPoint(),r={angle:this.angle,translateX:i.x,translateY:i.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},a=Y1(r);return this.ownMatrixCache={key:t,value:a},a}_getNonTransformedDimensions(){return new B(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=E({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),i=e.strokeWidth;let r=i,a=0;this.strokeUniform&&(r=0,a=i);const c=e.width+r,h=e.height+r;let f;return f=e.skewX===0&&e.skewY===0?new B(c*e.scaleX,h*e.scaleY):Mg(c,h,Uu(e)),f.scalarAdd(a)}translateToGivenOrigin(t,e,i,r,a){let c=t.x,h=t.y;const f=le(r)-le(e),g=le(a)-le(i);if(f||g){const m=this._getTransformedDimensions();c+=f*m.x,h+=g*m.y}return new B(c,h)}translateToCenterPoint(t,e,i){if(e===mt&&i===mt)return t;const r=this.translateToGivenOrigin(t,e,i,mt,mt);return this.angle?r.rotate(se(this.angle),t):r}translateToOriginPoint(t,e,i){const r=this.translateToGivenOrigin(t,mt,mt,e,i);return this.angle?r.rotate(se(this.angle),t):r}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?Ke(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new B(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,i){const r=this.translateToCenterPoint(t,e,i),a=this.translateToOriginPoint(r,this.originX,this.originY);this.set({left:a.x,top:a.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),zt,Je)}}const bC=["type"],_C=["extraParam"];let kn=class lu extends vC{static getDefaults(){return lu.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){ws("warn","Setting type has no effect",t)}constructor(t){super(),M(this,"_cacheContext",null),Object.assign(this,lu.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Yn(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,i=t.height,r=Dt.maxCacheSideLimit,a=Dt.minCacheSideLimit;if(e<=r&&i<=r&&e*i<=Dt.perfLimitSizeTotal)return e<a&&(t.width=a),i<a&&(t.height=a),t;const c=e/i,[h,f]=Xa.limitDimsByArea(c),g=wo(a,h,r),m=wo(a,f,r);return e>g&&(t.zoomX/=e/g,t.width=g,t.capped=!0),i>m&&(t.zoomY/=i/m,t.height=m,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),i=e.x*t.x/this.scaleX,r=e.y*t.y/this.scaleY;return{width:Math.ceil(i+2),height:Math.ceil(r+2),zoomX:t.x,zoomY:t.y,x:i,y:r}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,{width:i,height:r,zoomX:a,zoomY:c,x:h,y:f}=this._limitCacheSize(this._getCacheCanvasDimensions()),g=i!==t.width||r!==t.height,m=this.zoomX!==a||this.zoomY!==c;if(!t||!e)return!1;if(g||m){i!==t.width||r!==t.height?(t.width=i,t.height=r):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height));const y=h/2,v=f/2;return this.cacheTranslationX=Math.round(t.width/2-y)+y,this.cacheTranslationY=Math.round(t.height/2-v)+v,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(a,c),this.zoomX=a,this.zoomY=c,!0}return!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!e);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}getObjectScaling(){if(!this.group)return new B(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=mu(this.calcTransformMatrix());return new B(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),i=this.getCanvasRetinaScaling();return t.scalarMultiply(e*i)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){t!==ei&&t!==Ai||(e=this._constrainScale(e)),t===ei&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t!=="shadow"||!e||e instanceof Bn||(e=new Bn(e));const i=this[t]!==e;return this[t]=e,i&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||i&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t,!1,{}),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){if(t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:e,zoomY:i,cacheTranslationX:r,cacheTranslationY:a}=this,{width:c,height:h}=this._cacheCanvas;this.drawObject(this._cacheContext,t.forClipping,{zoomX:e,zoomY:i,cacheTranslationX:r,cacheTranslationY:a,width:c,height:h,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===ti&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e,i){t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",t.setTransform(1,0,0,1,0,0),t.drawImage(i,0,0),t.restore()}drawObject(t,e,i){const r=this.fill,a=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath,i),this.fill=r,this.stroke=a}createClipPathLayer(t,e){const i=zi(e),r=i.getContext("2d");if(r.translate(e.cacheTranslationX,e.cacheTranslationY),r.scale(e.zoomX,e.zoomY),t._cacheCanvas=i,e.parentClipPaths.forEach(a=>{a.transform(r)}),e.parentClipPaths.push(t),t.absolutePositioned){const a=Xi(this.calcTransformMatrix());r.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return t.transform(r),t.drawObject(r,!0,e),i}_drawClipPath(t,e,i){if(!e)return;e._transformDone=!0;const r=this.createClipPathLayer(e,i);this.drawClipPathOnCache(t,e,r)}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const e=this._cacheCanvas,i=this._cacheContext;return!(!e||!i||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(e&&i&&!t&&(i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),i.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const i=e.stroke;i&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,Ei(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:i}=e;i&&(Ei(i)?(t.fillStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.fillStyle=i)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&e.length!==0&&t.setLineDash(e)}_setShadow(t){if(!this.shadow)return;const e=this.shadow,i=this.canvas,r=this.getCanvasRetinaScaling(),[a,,,c]=i?.viewportTransform||Xe,h=a*r,f=c*r,g=e.nonScaling?new B(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*Dt.browserShadowBlurConstant*(h+f)*(g.x+g.y)/4,t.shadowOffsetX=e.offsetX*h*g.x,t.shadowOffsetY=e.offsetY*f*g.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!Ei(e))return{offsetX:0,offsetY:0};const i=e.gradientTransform||e.patternTransform,r=-this.width/2+e.offsetX||0,a=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,r,a):t.transform(1,0,0,1,r,a),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:r,offsetY:a}}_renderPaintInOrder(t){this.paintFirst===ti?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var i;const r=this._limitCacheSize(this._getCacheCanvasDimensions()),a=this.getCanvasRetinaScaling(),c=r.x/this.scaleX/a,h=r.y/this.scaleY/a,f=zi({width:Math.ceil(c),height:Math.ceil(h)}),g=f.getContext("2d");g&&(g.beginPath(),g.moveTo(0,0),g.lineTo(c,0),g.lineTo(c,h),g.lineTo(0,h),g.closePath(),g.translate(c/2,h/2),g.scale(r.zoomX/this.scaleX/a,r.zoomY/this.scaleY/a),this._applyPatternGradientTransform(g,e),g.fillStyle=e.toLive(t),g.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(a*this.scaleX/r.zoomX,a*this.scaleY/r.zoomY),t.strokeStyle=(i=g.createPattern(f,"no-repeat"))!==null&&i!==void 0?i:"")}_findCenterFromElement(){return new B(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(et.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=y_(this),i=this.group,r=this.shadow,a=Math.abs,c=t.enableRetinaScaling?e_():1,h=(t.multiplier||1)*c,f=t.canvasProvider||(z=>new sl(z,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&I1(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&Q1(this,this.getViewportTransform()),this.setCoords();const g=Yn(),m=this.getBoundingRect(),y=this.shadow,v=new B;if(y){const z=y.blur,Y=y.nonScaling?new B(1,1):this.getObjectScaling();v.x=2*Math.round(a(y.offsetX)+z)*a(Y.x),v.y=2*Math.round(a(y.offsetY)+z)*a(Y.y)}const _=m.width+v.x,S=m.height+v.y;g.width=Math.ceil(_),g.height=Math.ceil(S);const w=f(g);t.format==="jpeg"&&(w.backgroundColor="#fff"),this.setPositionByOrigin(new B(w.width/2,w.height/2),mt,mt);const C=this.canvas;w._objects=[this],this.set("canvas",w),this.setCoords();const k=w.toCanvasElement(h||1,t);return this.set("canvas",C),this.shadow=r,i&&(this.group=i),this.set(e),this.setCoords(),w._objects=[],w.destroy(),k}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a_(this.toCanvasElement(t),t.format||"png",t.quality||1)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return l_(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:i,originY:r}=this;if(e){const{x:a,y:c}=this.getRelativeCenterPoint();this.originX=mt,this.originY=mt,this.left=a,this.top=c}if(this.set("angle",t),e){const{x:a,y:c}=this.translateToOriginPoint(this.getRelativeCenterPoint(),i,r);this.left=a,this.top=c,this.originX=i,this.originY=r}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){pu.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&fn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,e){return Object.entries(t).reduce((i,r)=>{let[a,c]=r;return i[a]=this._animate(a,c,e),i},{})}_animate(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=t.split("."),a=this.constructor.colorProperties.includes(r[r.length-1]),{abort:c,startValue:h,onChange:f,onComplete:g}=i,m=E(E({},i),{},{target:this,startValue:h??r.reduce((y,v)=>y[v],this),endValue:e,abort:c?.bind(this),onChange:(y,v,_)=>{r.reduce((S,w,C)=>(C===r.length-1&&(S[w]=y),S[w]),this),f&&f(y,v,_)},onComplete:(y,v,_)=>{this.setCoords(),g&&g(y,v,_)}});return a?yC(m):k_(m)}isDescendantOf(t){const{parent:e,group:i}=this;return e===t||i===t||!!e&&e.isDescendantOf(t)||!!i&&i!==e&&i.isDescendantOf(t)}getAncestors(){const t=[];let e=this;do e=e.parent,e&&t.push(e);while(e);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const e=this.getAncestors(),i=t.getAncestors();if(e.length===0&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[t,...i.slice(0,i.length-1)],common:[this]};for(let r,a=0;a<e.length;a++){if(r=e[a],r===t)return{fork:[this,...e.slice(0,a)],otherFork:[],common:e.slice(a)};for(let c=0;c<i.length;c++){if(this===i[c])return{fork:[],otherFork:[t,...i.slice(0,c)],common:[this,...e]};if(r===i[c])return{fork:[this,...e.slice(0,a)],otherFork:[t,...i.slice(0,c)],common:e.slice(a)}}}return{fork:[this,...e],otherFork:[t,...i],common:[]}}hasCommonAncestors(t){const e=this.findCommonAncestors(t);return e&&!!e.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const i=e.common[0]||this.canvas;if(!i)return;const r=e.fork.pop(),a=e.otherFork.pop(),c=i._objects.indexOf(r),h=i._objects.indexOf(a);return c>-1&&c>h}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(lu.customProperties,this.constructor.customProperties||[]);let e;const i=Dt.NUM_FRACTION_DIGITS,{clipPath:r,fill:a,stroke:c,shadow:h,strokeDashArray:f,left:g,top:m,originX:y,originY:v,width:_,height:S,strokeWidth:w,strokeLineCap:C,strokeDashOffset:k,strokeLineJoin:z,strokeUniform:Y,strokeMiterLimit:U,scaleX:F,scaleY:I,angle:J,flipX:Z,flipY:ct,opacity:wt,visible:Mt,backgroundColor:ht,fillRule:bt,paintFirst:dt,globalCompositeOperation:Tt,skewX:H,skewY:W}=this;r&&!r.excludeFromExport&&(e=r.toObject(t.concat("inverted","absolutePositioned")));const $=O=>Nt(O,i),yt=E(E({},jo(this,t)),{},{type:this.constructor.type,version:Wd,originX:y,originY:v,left:$(g),top:$(m),width:$(_),height:$(S),fill:$v(a)?a.toObject():a,stroke:$v(c)?c.toObject():c,strokeWidth:$(w),strokeDashArray:f&&f.concat(),strokeLineCap:C,strokeDashOffset:k,strokeLineJoin:z,strokeUniform:Y,strokeMiterLimit:$(U),scaleX:$(F),scaleY:$(I),angle:$(J),flipX:Z,flipY:ct,opacity:$(wt),shadow:h&&h.toObject(),visible:Mt,backgroundColor:ht,fillRule:bt,paintFirst:dt,globalCompositeOperation:Tt,skewX:$(H),skewY:$(W)},e?{clipPath:e}:null);return this.includeDefaultValues?yt:this._removeDefaultValues(yt)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),i=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return Dg(t,(r,a)=>{if(a===zt||a===Je||a==="type")return!0;const c=i[a];return r!==c&&!(Array.isArray(r)&&Array.isArray(c)&&r.length===0&&c.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let e=It(t,bC),i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:r}=i,a=It(i,_C);return Fu(e,a).then(c=>r?(delete c[r],new this(e[r],c)):new this(c))}static fromObject(t,e){return this._fromObject(t,e)}};M(kn,"stateProperties",oC),M(kn,"cacheProperties",Nn),M(kn,"ownDefaults",aC),M(kn,"type","FabricObject"),M(kn,"colorProperties",[pe,ti,"backgroundColor"]),M(kn,"customProperties",[]),et.setClass(kn),et.setClass(kn,"object");const Lo=(o,t,e)=>(i,r,a,c)=>{const h=t(i,r,a,c);return h&&v_(o,E(E({},__(i,r,a,c)),e)),h};function Po(o){return(t,e,i,r)=>{const{target:a,originX:c,originY:h}=e,f=a.getRelativeCenterPoint(),g=a.translateToOriginPoint(f,c,h),m=o(t,e,i,r);return a.setPositionByOrigin(g,e.originX,e.originY),m}}const p0=Lo(Qa,Po((o,t,e,i)=>{const r=Eg(t,t.originX,t.originY,e,i);if(le(t.originX)===le(mt)||le(t.originX)===le(ne)&&r.x<0||le(t.originX)===le(zt)&&r.x>0){const{target:a}=t,c=a.strokeWidth/(a.strokeUniform?a.scaleX:1),h=b_(t)?2:1,f=a.width,g=Math.abs(r.x*h/a.scaleX)-c;return a.set("width",Math.max(g,1)),f!==a.width}return!1}));function xC(o,t,e,i,r){i=i||{};const a=this.sizeX||i.cornerSize||r.cornerSize,c=this.sizeY||i.cornerSize||r.cornerSize,h=i.transparentCorners!==void 0?i.transparentCorners:r.transparentCorners,f=h?ti:pe,g=!h&&(i.cornerStrokeColor||r.cornerStrokeColor);let m,y=t,v=e;o.save(),o.fillStyle=i.cornerColor||r.cornerColor||"",o.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor||"",a>c?(m=a,o.scale(1,c/a),v=e*a/c):c>a?(m=c,o.scale(a/c,1),y=t*c/a):m=a,o.beginPath(),o.arc(y,v,m/2,0,fu,!1),o[f](),g&&o.stroke(),o.restore()}function SC(o,t,e,i,r){i=i||{};const a=this.sizeX||i.cornerSize||r.cornerSize,c=this.sizeY||i.cornerSize||r.cornerSize,h=i.transparentCorners!==void 0?i.transparentCorners:r.transparentCorners,f=h?ti:pe,g=!h&&(i.cornerStrokeColor||r.cornerStrokeColor),m=a/2,y=c/2;o.save(),o.fillStyle=i.cornerColor||r.cornerColor||"",o.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor||"",o.translate(t,e);const v=r.getTotalAngle();o.rotate(se(v)),o["".concat(f,"Rect")](-m,-y,a,c),g&&o.strokeRect(-m,-y,a,c),o.restore()}class Fi{constructor(t){M(this,"visible",!0),M(this,"actionName",Bu),M(this,"angle",0),M(this,"x",0),M(this,"y",0),M(this,"offsetX",0),M(this,"offsetY",0),M(this,"sizeX",0),M(this,"sizeY",0),M(this,"touchSizeX",0),M(this,"touchSizeY",0),M(this,"cursorStyle","crosshair"),M(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e,i,r){var a;let{tl:c,tr:h,br:f,bl:g}=r;return((a=e.canvas)===null||a===void 0?void 0:a.getActiveObject())===e&&e.isControlVisible(t)&&Qt.isPointInPolygon(i,[c,h,f,g])}getActionHandler(t,e,i){return this.actionHandler}getMouseDownHandler(t,e,i){return this.mouseDownHandler}getMouseUpHandler(t,e,i){return this.mouseUpHandler}cursorStyleHandler(t,e,i){return e.cursorStyle}getActionName(t,e,i){return e.actionName}getVisibility(t,e){var i,r;return(i=(r=t._controlsVisibility)===null||r===void 0?void 0:r[e])!==null&&i!==void 0?i:this.visible}setVisibility(t,e,i){this.visible=t}positionHandler(t,e,i,r){return new B(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,i,r,a,c){const h=Tg([nl(i,r),Ro({angle:t}),Og((a?this.touchSizeX:this.sizeX)||e,(a?this.touchSizeY:this.sizeY)||e)]);return{tl:new B(-.5,-.5).transform(h),tr:new B(.5,-.5).transform(h),br:new B(.5,.5).transform(h),bl:new B(-.5,.5).transform(h)}}render(t,e,i,r,a){((r=r||{}).cornerStyle||a.cornerStyle)==="circle"?xC.call(this,t,e,i,r,a):SC.call(this,t,e,i,r,a)}}const wC=(o,t,e)=>e.lockRotation?vu:t.cursorStyle,CC=Lo(n_,Po((o,t,e,i)=>{let{target:r,ex:a,ey:c,theta:h,originX:f,originY:g}=t;const m=r.translateToOriginPoint(r.getRelativeCenterPoint(),f,g);if(Ii(r,"lockRotation"))return!1;const y=Math.atan2(c-m.y,a-m.x),v=Math.atan2(i-m.y,e-m.x);let _=Vn(v-y+h);if(r.snapAngle&&r.snapAngle>0){const w=r.snapAngle,C=r.snapThreshold||w,k=Math.ceil(_/w)*w,z=Math.floor(_/w)*w;Math.abs(_-z)<C?_=z:Math.abs(_-k)<C&&(_=k)}_<0&&(_=360+_),_%=360;const S=r.angle!==_;return r.angle=_,S}));function A_(o,t){const e=t.canvas,i=o[e.uniScaleKey];return e.uniformScaling&&!i||!e.uniformScaling&&i}function z_(o,t,e){const i=Ii(o,"lockScalingX"),r=Ii(o,"lockScalingY");if(i&&r||!t&&(i||r)&&e||i&&t==="x"||r&&t==="y")return!0;const{width:a,height:c,strokeWidth:h}=o;return a===0&&h===0&&t!=="y"||c===0&&h===0&&t!=="x"}const TC=["e","se","s","sw","w","nw","n","ne","e"],Va=(o,t,e)=>{const i=A_(o,e);if(z_(e,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",i))return vu;const r=x_(e,t);return"".concat(TC[r],"-resize")};function zg(o,t,e,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const a=t.target,c=r.by,h=A_(o,a);let f,g,m,y,v,_;if(z_(a,c,h))return!1;if(t.gestureScale)g=t.scaleX*t.gestureScale,m=t.scaleY*t.gestureScale;else{if(f=Eg(t,t.originX,t.originY,e,i),v=c!=="y"?Math.sign(f.x||t.signX||1):1,_=c!=="x"?Math.sign(f.y||t.signY||1):1,t.signX||(t.signX=v),t.signY||(t.signY=_),Ii(a,"lockScalingFlip")&&(t.signX!==v||t.signY!==_))return!1;if(y=a._getTransformedDimensions(),h&&!c){const C=Math.abs(f.x)+Math.abs(f.y),{original:k}=t,z=C/(Math.abs(y.x*k.scaleX/a.scaleX)+Math.abs(y.y*k.scaleY/a.scaleY));g=k.scaleX*z,m=k.scaleY*z}else g=Math.abs(f.x*a.scaleX/y.x),m=Math.abs(f.y*a.scaleY/y.y);b_(t)&&(g*=2,m*=2),t.signX!==v&&c!=="y"&&(t.originX=n0(t.originX),g*=-1,t.signX=v),t.signY!==_&&c!=="x"&&(t.originY=n0(t.originY),m*=-1,t.signY=_)}const S=a.scaleX,w=a.scaleY;return c?(c==="x"&&a.set(ei,g),c==="y"&&a.set(Ai,m)):(!Ii(a,"lockScalingX")&&a.set(ei,g),!Ii(a,"lockScalingY")&&a.set(Ai,m)),S!==a.scaleX||w!==a.scaleY}const Cc=Lo(Pu,Po((o,t,e,i)=>zg(o,t,e,i))),OC=Lo(Pu,Po((o,t,e,i)=>zg(o,t,e,i,{by:"x"}))),DC=Lo(Pu,Po((o,t,e,i)=>zg(o,t,e,i,{by:"y"}))),MC=["target","ex","ey","skewingSide"],Sd={x:{counterAxis:"y",scale:ei,skew:Ao,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Ai,skew:zo,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},EC=["ns","nesw","ew","nwse"],kC=(o,t,e)=>{if(t.x!==0&&Ii(e,"lockSkewingY")||t.y!==0&&Ii(e,"lockSkewingX"))return vu;const i=x_(e,t)%4;return"".concat(EC[i],"-resize")};function R_(o,t,e,i,r){const{target:a}=e,{counterAxis:c,origin:h,lockSkewing:f,skew:g,flip:m}=Sd[o];if(Ii(a,f))return!1;const{origin:y,flip:v}=Sd[c],_=le(e[y])*(a[v]?-1:1),S=-Math.sign(_)*(a[m]?-1:1),w=.5*-((a[g]===0&&Eg(e,mt,mt,i,r)[o]>0||a[g]>0?1:-1)*S)+.5;return Lo(s_,Po((k,z,Y,U)=>function(F,I,J){let{target:Z,ex:ct,ey:wt,skewingSide:Mt}=I,ht=It(I,MC);const{skew:bt}=Sd[F],dt=J.subtract(new B(ct,wt)).divide(new B(Z.scaleX,Z.scaleY))[F],Tt=Z[bt],H=ht[bt],W=Math.tan(se(H)),$=F==="y"?Z._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:Z._getTransformedDimensions({scaleX:1,scaleY:1}).y,yt=2*dt*Mt/Math.max($,1)+W,O=Vn(Math.atan(yt));Z.set(bt,O);const q=Tt!==Z[bt];if(q&&F==="y"){const{skewX:tt,scaleX:K}=Z,nt=Z._getTransformedDimensions({skewY:Tt}),_t=Z._getTransformedDimensions(),ot=tt!==0?nt.x/_t.x:1;ot!==1&&Z.set(ei,ot*K)}return q}(o,z,new B(Y,U))))(t,E(E({},e),{},{[h]:w,skewingSide:S}),i,r)}const AC=(o,t,e,i)=>R_("x",o,t,e,i),zC=(o,t,e,i)=>R_("y",o,t,e,i);function Vu(o,t){return o[t.canvas.altActionKey]}const Tc=(o,t,e)=>{const i=Vu(o,e);return t.x===0?i?Ao:Ai:t.y===0?i?zo:ei:""},ao=(o,t,e)=>Vu(o,e)?kC(0,t,e):Va(o,t,e),m0=(o,t,e,i)=>Vu(o,t.target)?zC(o,t,e,i):OC(o,t,e,i),y0=(o,t,e,i)=>Vu(o,t.target)?AC(o,t,e,i):DC(o,t,e,i),j_=()=>({ml:new Fi({x:-.5,y:0,cursorStyleHandler:ao,actionHandler:m0,getActionName:Tc}),mr:new Fi({x:.5,y:0,cursorStyleHandler:ao,actionHandler:m0,getActionName:Tc}),mb:new Fi({x:0,y:.5,cursorStyleHandler:ao,actionHandler:y0,getActionName:Tc}),mt:new Fi({x:0,y:-.5,cursorStyleHandler:ao,actionHandler:y0,getActionName:Tc}),tl:new Fi({x:-.5,y:-.5,cursorStyleHandler:Va,actionHandler:Cc}),tr:new Fi({x:.5,y:-.5,cursorStyleHandler:Va,actionHandler:Cc}),bl:new Fi({x:-.5,y:.5,cursorStyleHandler:Va,actionHandler:Cc}),br:new Fi({x:.5,y:.5,cursorStyleHandler:Va,actionHandler:Cc}),mtr:new Fi({x:0,y:-.5,actionHandler:CC,cursorStyleHandler:wC,offsetY:-40,withConnection:!0,actionName:wg})}),RC=()=>({mr:new Fi({x:.5,y:0,actionHandler:p0,cursorStyleHandler:ao,actionName:Qa}),ml:new Fi({x:-.5,y:0,actionHandler:p0,cursorStyleHandler:ao,actionName:Qa})}),jC=()=>E(E({},j_()),RC());class $a extends kn{static getDefaults(){return E(E({},super.getDefaults()),$a.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),$a.ownDefaults),this.setOptions(t)}static createControls(){return{controls:j_()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform,i=e.target,r=e.action;if(this===i&&r&&r.startsWith(Bu))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const i=Object.entries(this.oCoords);for(let r=i.length-1;r>=0;r--){const[a,c]=i[r],h=this.controls[a];if(h.shouldActivate(a,this,t,e?c.touchCorner:c.corner))return this.__corner=a,{key:a,control:h,coord:this.oCoords[a]}}}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),i=nl(e.x,e.y),r=Ro({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),a=Oe(i,r),c=Oe(t,a),h=Oe(c,[1/t[0],0,0,1/t[3],0,0]),f=this.group?mu(this.calcTransformMatrix()):void 0;f&&(f.scaleX=Math.abs(f.scaleX),f.scaleY=Math.abs(f.scaleY));const g=this._calculateCurrentDimensions(f),m={};return this.forEachControl((y,v)=>{const _=y.positionHandler(g,h,this,y);m[v]=Object.assign(_,this._calcCornerCoords(y,_))}),m}_calcCornerCoords(t,e){const i=this.getTotalAngle();return{corner:t.calcCornerCoords(i,this.cornerSize,e.x,e.y,!1,this),touchCorner:t.calcCornerCoords(i,this.touchCornerSize,e.x,e.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),i=this._calculateCurrentDimensions(),r=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/r[0],1/r[3]),t.rotate(se(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=E({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},i);t.save(),t.strokeStyle=r.borderColor,this._setLineDash(t,r.borderDashArray),this.strokeBorders(t,e),r.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:i,hasControls:r}=this,a=E({hasBorders:i,hasControls:r},e),c=this.getViewportTransform(),h=a.hasBorders,f=a.hasControls,g=Oe(c,this.calcTransformMatrix()),m=mu(g);t.save(),t.translate(m.translateX,m.translateY),t.lineWidth=this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(m.angle-=180),t.rotate(se(this.group?m.angle:this.angle)),h&&this.drawBorders(t,m,e),f&&this.drawControls(t,e),t.restore()}drawBorders(t,e,i){let r;if(i&&i.forActiveSelection||this.group){const a=Mg(this.width,this.height,Uu(e)),c=this.isStrokeAccountedForInDimensions()?Cg:(this.strokeUniform?new B().scalarAdd(this.canvas?this.canvas.getZoom():1):new B(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);r=a.add(c).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else r=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,r,i)}drawControlsConnectingLines(t,e){let i=!1;t.beginPath(),this.forEachControl((r,a)=>{r.withConnection&&r.getVisibility(this,a)&&(i=!0,t.moveTo(r.x*e.x,r.y*e.y),t.lineTo(r.x*e.x+r.offsetX,r.y*e.y+r.offsetY))}),i&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const i=this.getCanvasRetinaScaling(),{cornerStrokeColor:r,cornerDashArray:a,cornerColor:c}=this,h=E({cornerStrokeColor:r,cornerDashArray:a,cornerColor:c},e);t.setTransform(i,0,0,i,0,0),t.strokeStyle=t.fillStyle=h.cornerColor,this.transparentCorners||(t.strokeStyle=h.cornerStrokeColor),this._setLineDash(t,h.cornerDashArray),this.forEachControl((f,g)=>{if(f.getVisibility(this,g)){const m=this.oCoords[g];f.render(t,m.x,m.y,h,this)}}),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach(e=>{let[i,r]=e;return this.setControlVisible(i,r)})}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e);const r=this.width+4,a=this.height+4;return e.clearRect(-r/2,-a/2,r,a),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function L_(o,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(o.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)||Object.create(null))})}),o}M($a,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class je extends $a{}L_(je,[S_]),et.setClass(je),et.setClass(je,"object");const LC=(o,t,e,i)=>{const r=2*(i=Math.round(i))+1,{data:a}=o.getImageData(t-i,e-i,r,r);for(let c=3;c<a.length;c+=4)if(a[c]>0)return!1;return!0};class P_{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new B(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new B(1/this.options.scaleX,1/this.options.scaleY):new B(1,1)}createSideVector(t,e){const i=Jd(t,e);return this.options.strokeUniform?i.multiply(this.scale):i}projectOrthogonally(t,e,i){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,i)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new B(t);return e.y+=e.x*Math.tan(se(this.options.skewY)),e.x+=e.y*Math.tan(se(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const PC=new B;class yo extends P_{static getOrthogonalRotationFactor(t,e){const i=e?tg(t,e):sC(t);return Math.abs(i)<il?-1:1}constructor(t,e,i,r){super(r),M(this,"AB",void 0),M(this,"AC",void 0),M(this,"alpha",void 0),M(this,"bisector",void 0),this.A=new B(t),this.B=new B(e),this.C=new B(i),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=tg(this.AB,this.AC),this.bisector=kg(M_(this.AB.eq(PC)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const r=this.createSideVector(t,e),a=E_(r),c=yo.getOrthogonalRotationFactor(a,this.bisector);return this.scaleUnitVector(a,i*c)}projectBevel(){const t=[];return(this.alpha%fu==0?[this.B]:[this.B,this.C]).forEach(e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))}),t}projectMiter(){const t=[],e=Math.abs(this.alpha),i=1/Math.sin(e/2),r=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*i),a=this.options.strokeUniform?$d(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return $d(r)/this.strokeProjectionMagnitude<=a&&t.push(this.applySkew(this.A.add(r))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const i=[],r=new B(yo.getOrthogonalRotationFactor(this.bisector),yo.getOrthogonalRotationFactor(new B(this.bisector.y,this.bisector.x)));return[new B(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r),new B(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r)].forEach(a=>{f0(a,t,e)&&i.push(this.A.add(a))}),i}projectRoundWithSkew(t,e){const i=[],{skewX:r,skewY:a,scaleX:c,scaleY:h,strokeUniform:f}=this.options,g=new B(Math.tan(se(r)),Math.tan(se(a))),m=this.strokeProjectionMagnitude,y=f?m/h/Math.sqrt(1/h**2+1/c**2*g.y**2):m/Math.sqrt(1+g.y**2),v=new B(Math.sqrt(Math.max(m**2-y**2,0)),y),_=f?m/Math.sqrt(1+g.x**2*(1/h)**2/(1/c+1/c*g.x*g.y)**2):m/Math.sqrt(1+g.x**2/(1+g.x*g.y)**2),S=new B(_,Math.sqrt(Math.max(m**2-_**2,0)));return[S,S.scalarMultiply(-1),v,v.scalarMultiply(-1)].map(w=>this.applySkew(f?w.multiply(this.strokeUniformScalar):w)).forEach(w=>{f0(w,t,e)&&i.push(this.applySkew(this.A).add(w))}),i}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%fu==0,i=this.applySkew(this.A),r=t[e?0:2].subtract(i),a=t[e?1:0].subtract(i),c=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),h=Ia(r,c)>0,f=h?r:a,g=h?a:r;return this.isSkewed()?t.push(...this.projectRoundWithSkew(f,g)):t.push(...this.projectRoundNoSkew(f,g)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector}))}}class v0 extends P_{constructor(t,e,i){super(i),this.A=new B(t),this.T=new B(e)}calcOrthogonalProjection(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const r=this.createSideVector(t,e);return this.scaleUnitVector(E_(r),i)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new B(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new yo(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new B(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),i=this.scaleUnitVector(kg(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),r=this.A.add(i);t.push(r.add(e),r.subtract(e))}return t.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t}))}}const BC=function(o,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const i=[];if(o.length===0)return i;const r=o.reduce((a,c)=>(a[a.length-1].eq(c)||a.push(new B(c)),a),[new B(o[0])]);if(r.length===1)e=!0;else if(!e){const a=r[0],c=((h,f)=>{for(let g=h.length-1;g>=0;g--)if(f(h[g],g,h))return g;return-1})(r,h=>!h.eq(a));r.splice(c+1)}return r.forEach((a,c,h)=>{let f,g;c===0?(g=h[1],f=e?a:h[h.length-1]):c===h.length-1?(f=h[c-1],g=e?a:h[0]):(f=h[c-1],g=h[c+1]),e&&h.length===1?i.push(...new v0(a,a,t).project()):!e||c!==0&&c!==h.length-1?i.push(...new yo(a,f,g,t).project()):i.push(...new v0(a,c===0?g:f,t).project())}),i},Rg=o=>{const t={};return Object.keys(o).forEach(e=>{t[e]={},Object.keys(o[e]).forEach(i=>{t[e][i]=E({},o[e][i])})}),t},UC=o=>o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Ba;const jg=o=>{if(Ba||Ba||(Ba="Intl"in Lu()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Ba){const t=Ba.segment(o);return Array.from(t).map(e=>{let{segment:i}=e;return i})}return FC(o)},FC=o=>{const t=[];for(let e,i=0;i<o.length;i++)(e=HC(o,i))!==!1&&t.push(e);return t},HC=(o,t)=>{const e=o.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return o.charAt(t);if(55296<=e&&e<=56319){if(o.length<=t+1)throw"High surrogate without following low surrogate";const r=o.charCodeAt(t+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return o.charAt(t)+o.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const i=o.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1},Lg=function(o,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.fill!==t.fill||o.stroke!==t.stroke||o.strokeWidth!==t.strokeWidth||o.fontSize!==t.fontSize||o.fontFamily!==t.fontFamily||o.fontWeight!==t.fontWeight||o.fontStyle!==t.fontStyle||o.textDecorationThickness!==t.textDecorationThickness||o.textBackgroundColor!==t.textBackgroundColor||o.deltaY!==t.deltaY||e&&(o.overline!==t.overline||o.underline!==t.underline||o.linethrough!==t.linethrough)},YC=(o,t)=>{const e=t.split(`
`),i=[];let r=-1,a={};o=Rg(o);for(let c=0;c<e.length;c++){const h=jg(e[c]);if(o[c])for(let f=0;f<h.length;f++){r++;const g=o[c][f];g&&Object.keys(g).length>0&&(Lg(a,g,!0)?i.push({start:r,end:r+1,style:g}):i[i.length-1].end++),a=g||{}}else r+=h.length,a={}}return i},VC=(o,t)=>{if(!Array.isArray(o))return Rg(o);const e=t.split(Sg),i={};let r=-1,a=0;for(let c=0;c<e.length;c++){const h=jg(e[c]);for(let f=0;f<h.length;f++)r++,o[a]&&o[a].start<=r&&r<o[a].end&&(i[c]=i[c]||{},i[c][f]=E({},o[a].style),r===o[a].end-1&&a++)}return i},Ms=["display","transform",pe,"fill-opacity","fill-rule","opacity",ti,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function b0(o,t){const e=o.nodeName,i=o.getAttribute("class"),r=o.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let c;if(c=new RegExp("^"+e,"i"),t=t.replace(c,""),r&&t.length&&(c=new RegExp("#"+r+a,"i"),t=t.replace(c,"")),i&&t.length){const h=i.split(" ");for(let f=h.length;f--;)c=new RegExp("\\."+h[f]+a,"i"),t=t.replace(c,"")}return t.length===0}function NC(o,t){let e=!0;const i=b0(o,t.pop());return i&&t.length&&(e=function(r,a){let c,h=!0;for(;r.parentElement&&r.parentElement.nodeType===1&&a.length;)h&&(c=a.pop()),h=b0(r=r.parentElement,c);return a.length===0}(o,t)),i&&e&&t.length===0}const XC=o=>{var t;return(t=iC[o])!==null&&t!==void 0?t:o},qC=new RegExp("(".concat(qi,")"),"gi"),GC=o=>o.replace(qC," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var _0,x0,S0,w0,C0,T0,O0;const Ye="(".concat(qi,")"),IC=String.raw(_0||(_0=gn(["(skewX)(",")"],["(skewX)\\(","\\)"])),Ye),WC=String.raw(x0||(x0=gn(["(skewY)(",")"],["(skewY)\\(","\\)"])),Ye),QC=String.raw(S0||(S0=gn(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Ye,Ye,Ye),ZC=String.raw(w0||(w0=gn(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Ye,Ye),KC=String.raw(C0||(C0=gn(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Ye,Ye),JC=String.raw(T0||(T0=gn(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Ye,Ye,Ye,Ye,Ye,Ye),Pg="(?:".concat(JC,"|").concat(KC,"|").concat(QC,"|").concat(ZC,"|").concat(IC,"|").concat(WC,")"),$C="(?:".concat(Pg,"*)"),tT=String.raw(O0||(O0=gn(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),$C),eT=new RegExp(tT),iT=new RegExp(Pg),nT=new RegExp(Pg,"g");function eg(o){const t=[];if(!(o=GC(o).replace(/\s*([()])\s*/gi,"$1"))||o&&!eT.test(o))return[...Xe];for(const e of o.matchAll(nT)){const i=iT.exec(e[0]);if(!i)continue;let r=Xe;const a=i.filter(S=>!!S),[,c,...h]=a,[f,g,m,y,v,_]=h.map(S=>parseFloat(S));switch(c){case"translate":r=nl(f,g);break;case wg:r=Ro({angle:f},{x:g,y:m});break;case Bu:r=Og(f,g);break;case Ao:r=h_(f);break;case zo:r=f_(f);break;case"matrix":r=[f,g,m,y,v,_]}t.push(r)}return Tg(t)}function sT(o,t,e,i){const r=Array.isArray(t);let a,c=t;if(o!==pe&&o!==ti||t!==$e){if(o==="strokeUniform")return t==="non-scaling-stroke";if(o==="strokeDashArray")c=t===$e?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(o==="transformMatrix")c=e&&e.transformMatrix?Oe(e.transformMatrix,eg(t)):eg(t);else if(o==="visible")c=t!==$e&&t!=="hidden",e&&e.visible===!1&&(c=!1);else if(o==="opacity")c=parseFloat(t),e&&e.opacity!==void 0&&(c*=e.opacity);else if(o==="textAnchor")c=t==="start"?zt:t==="end"?ne:mt;else if(o==="charSpacing"||o===hr)a=mo(t,i)/i*1e3;else if(o==="paintFirst"){const h=t.indexOf(pe),f=t.indexOf(ti);c=pe,(h>-1&&f>-1&&f<h||h===-1&&f>-1)&&(c=ti)}else{if(o==="href"||o==="xlink:href"||o==="font"||o==="id")return t;if(o==="imageSmoothing")return t==="optimizeQuality";a=r?t.map(mo):mo(t,i)}}else c="";return!r&&isNaN(a)?c:a}function rT(o,t){const e=o.match(eC);if(!e)return;const i=e[1],r=e[3],a=e[4],c=e[5],h=e[6];i&&(t.fontStyle=i),r&&(t.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),a&&(t.fontSize=mo(a)),h&&(t.fontFamily=h),c&&(t.lineHeight=c==="normal"?1:c)}function oT(o,t){o.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[i,r]=e.split(":");t[i.trim().toLowerCase()]=r.trim()})}function aT(o){const t={},e=o.getAttribute("style");return e&&(typeof e=="string"?oT(e,t):function(i,r){Object.entries(i).forEach(a=>{let[c,h]=a;h!==void 0&&(r[c.toLowerCase()]=h)})}(e,t)),t}const lT={stroke:"strokeOpacity",fill:"fillOpacity"};function Xn(o,t,e){if(!o)return{};let i,r={},a=xg;o.parentNode&&h0.test(o.parentNode.nodeName)&&(r=Xn(o.parentElement,t,e),r.fontSize&&(i=a=mo(r.fontSize)));const c=E(E(E({},t.reduce((g,m)=>{const y=o.getAttribute(m);return y&&(g[m]=y),g},{})),function(g){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y={};for(const v in m)NC(g,v.split(" "))&&(y=E(E({},y),m[v]));return y}(o,e)),aT(o));c[_d]&&o.setAttribute(_d,c[_d]),c[bd]&&(i=mo(c[bd],a),c[bd]="".concat(i));const h={};for(const g in c){const m=XC(g),y=sT(m,c[g],r,i);h[m]=y}h&&h.font&&rT(h.font,h);const f=E(E({},r),h);return h0.test(o.nodeName)?f:function(g){const m=je.getDefaults();return Object.entries(lT).forEach(y=>{let[v,_]=y;if(g[_]===void 0||g[v]==="")return;if(g[v]===void 0){if(!m[v])return;g[v]=m[v]}if(g[v].indexOf("url(")===0)return;const S=new Lt(g[v]);g[v]=S.setAlpha(Nt(S.getAlpha()*g[_],2)).toRgba()}),g}(f)}const cT=["left","top","width","height","visible"],B_=["rx","ry"];class Vi extends je{static getDefaults(){return E(E({},super.getDefaults()),Vi.ownDefaults)}constructor(t){super(),Object.assign(this,Vi.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:i}=this,r=-e/2,a=-i/2,c=this.rx?Math.min(this.rx,e/2):0,h=this.ry?Math.min(this.ry,i/2):0,f=c!==0||h!==0;t.beginPath(),t.moveTo(r+c,a),t.lineTo(r+e-c,a),f&&t.bezierCurveTo(r+e-ps*c,a,r+e,a+ps*h,r+e,a+h),t.lineTo(r+e,a+i-h),f&&t.bezierCurveTo(r+e,a+i-ps*h,r+e-ps*c,a+i,r+e-c,a+i),t.lineTo(r+c,a+i),f&&t.bezierCurveTo(r+ps*c,a+i,r,a+i-ps*h,r,a+i-h),t.lineTo(r,a+h),f&&t.bezierCurveTo(r,a+ps*h,r+ps*c,a,r+c,a),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...B_,...t])}_toSVG(){const{width:t,height:e,rx:i,ry:r}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(i,'" ry="').concat(r,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,i){const r=Xn(t,this.ATTRIBUTE_NAMES,i),{left:a=0,top:c=0,width:h=0,height:f=0,visible:g=!0}=r,m=It(r,cT);return new this(E(E(E({},e),m),{},{left:a,top:c,width:h,height:f,visible:!!(g&&h&&f)}))}}M(Vi,"type","Rect"),M(Vi,"cacheProperties",[...Nn,...B_]),M(Vi,"ownDefaults",{rx:0,ry:0}),M(Vi,"ATTRIBUTE_NAMES",[...Ms,"x","y","rx","ry","width","height"]),et.setClass(Vi),et.setSVGClass(Vi);const zn="initialization",_u="added",Bg="removed",xu="imperative",U_=(o,t)=>{const{strokeUniform:e,strokeWidth:i,width:r,height:a,group:c}=t,h=c&&c!==o?Hu(c.calcTransformMatrix(),o.calcTransformMatrix()):null,f=h?t.getRelativeCenterPoint().transform(h):t.getRelativeCenterPoint(),g=!t.isStrokeAccountedForInDimensions(),m=e&&g?W1(new B(i,i),void 0,o.calcTransformMatrix()):Cg,y=!e&&g?i:0,v=Mg(r+y,a+y,Tg([h,t.calcOwnMatrix()],!0)).add(m).scalarDivide(2);return[f.subtract(v),f.add(v)]};class Nu{calcLayoutResult(t,e){if(this.shouldPerformLayout(t))return this.calcBoundingBox(e,t)}shouldPerformLayout(t){let{type:e,prevStrategy:i,strategy:r}=t;return e===zn||e===xu||!!i&&r!==i}shouldLayoutClipPath(t){let{type:e,target:{clipPath:i}}=t;return e!==zn&&i&&!i.absolutePositioned}getInitialSize(t,e){return e.size}calcBoundingBox(t,e){const{type:i,target:r}=e;if(i===xu&&e.overrides)return e.overrides;if(t.length===0)return;const{left:a,top:c,width:h,height:f}=Pn(t.map(y=>U_(r,y)).reduce((y,v)=>y.concat(v),[])),g=new B(h,f),m=new B(a,c).add(g.scalarDivide(2));if(i===zn){const y=this.getInitialSize(e,{size:g,center:m});return{center:m,relativeCorrection:new B(0,0),size:y}}return{center:m.transform(r.calcOwnMatrix()),size:g}}}M(Nu,"type","strategy");class ig extends Nu{shouldPerformLayout(t){return!0}}M(ig,"type","fit-content"),et.setClass(ig);const uT=["strategy"],hT=["target","strategy","bubbles","prevStrategy"],F_="layoutManager";class tl{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new ig;M(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const e=E(E({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(e);const i=this.getLayoutResult(e);i&&this.commitLayout(e,i),this.onAfterLayout(e,i),this._prevLayoutStrategy=e.strategy}attachHandlers(t,e){const{target:i}=e;return[gu,i_,Qa,n_,Pu,s_,du,j1,L1].map(r=>t.on(r,a=>this.performLayout(r===gu?{type:"object_modified",trigger:r,e:a,target:i}:{type:"object_modifying",trigger:r,e:a,target:i})))}subscribe(t,e){this.unsubscribe(t,e);const i=this.attachHandlers(t,e);this._subscriptions.set(t,i)}unsubscribe(t,e){(this._subscriptions.get(t)||[]).forEach(i=>i()),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach(e=>this.unsubscribe(e,t))}subscribeTargets(t){t.targets.forEach(e=>this.subscribe(e,t))}onBeforeLayout(t){const{target:e,type:i}=t,{canvas:r}=e;if(i===zn||i===_u?this.subscribeTargets(t):i===Bg&&this.unsubscribeTargets(t),e.fire("layout:before",{context:t}),r&&r.fire("object:layout:before",{target:e,context:t}),i===xu&&t.deep){const a=It(t,uT);e.forEachObject(c=>c.layoutManager&&c.layoutManager.performLayout(E(E({},a),{},{bubbles:!1,target:c})))}}getLayoutResult(t){const{target:e,strategy:i,type:r}=t,a=i.calcLayoutResult(t,e.getObjects());if(!a)return;const c=r===zn?new B:e.getRelativeCenterPoint(),{center:h,correction:f=new B,relativeCorrection:g=new B}=a,m=c.subtract(h).add(f).transform(r===zn?Xe:Xi(e.calcOwnMatrix()),!0).add(g);return{result:a,prevCenter:c,nextCenter:h,offset:m}}commitLayout(t,e){const{target:i}=t,{result:{size:r},nextCenter:a}=e;var c,h;i.set({width:r.x,height:r.y}),this.layoutObjects(t,e),t.type===zn?i.set({left:(c=t.x)!==null&&c!==void 0?c:a.x+r.x*le(i.originX),top:(h=t.y)!==null&&h!==void 0?h:a.y+r.y*le(i.originY)}):(i.setPositionByOrigin(a,mt,mt),i.setCoords(),i.set("dirty",!0))}layoutObjects(t,e){const{target:i}=t;i.forEachObject(r=>{r.group===i&&this.layoutObject(t,e,r)}),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,e,i.clipPath)}layoutObject(t,e,i){let{offset:r}=e;i.set({left:i.left+r.x,top:i.top+r.y})}onAfterLayout(t,e){const{target:i,strategy:r,bubbles:a,prevStrategy:c}=t,h=It(t,hT),{canvas:f}=i;i.fire("layout:after",{context:t,result:e}),f&&f.fire("object:layout:after",{context:t,result:e,target:i});const g=i.parent;a&&g!=null&&g.layoutManager&&((h.path||(h.path=[])).push(i),g.layoutManager.performLayout(E(E({},h),{},{target:g}))),i.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach(e=>e.forEach(i=>i())),t.clear()}toObject(){return{type:F_,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}et.setClass(tl,F_);const fT=["type","objects","layoutManager"];class dT extends tl{performLayout(){}}class cr extends r_(je){static getDefaults(){return E(E({},super.getDefaults()),cr.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),M(this,"_activeObjects",[]),M(this,"__objectSelectionTracker",void 0),M(this,"__objectSelectionDisposer",void 0),Object.assign(this,cr.ownDefaults),this.setOptions(e),this.groupInit(t,e)}groupInit(t,e){var i;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(r=>{this.enterGroup(r,!1)}),this.layoutManager=(i=e.layoutManager)!==null&&i!==void 0?i:new tl,this.layoutManager.performLayout({type:zn,target:this,targets:[...t],x:e.left,y:e.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(ws("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(ws("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter((e,i,r)=>this.canEnterGroup(e)&&r.indexOf(e)===i)}add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const r=this._filterObjectsBeforeEnteringGroup(e),a=super.add(...r);return this._onAfterObjectsChange(_u,r),a}insertAt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];const a=this._filterObjectsBeforeEnteringGroup(i),c=super.insertAt(t,...a);return this._onAfterObjectsChange(_u,a),c}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(Bg,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this.layoutManager.performLayout({type:t,targets:e,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const i=this[t];return super._set(t,e),t==="canvas"&&i!==e&&(this._objects||[]).forEach(r=>{r._set(t,e)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,e){let{target:i}=e;const r=this._activeObjects;if(t)r.push(i),this._set("dirty",!0);else if(r.length>0){const a=r.indexOf(i);a>-1&&(r.splice(a,1),this._set("dirty",!0))}}_watchObject(t,e){t&&this._watchObject(!1,e),t?(e.on("selected",this.__objectSelectionTracker),e.on("deselected",this.__objectSelectionDisposer)):(e.off("selected",this.__objectSelectionTracker),e.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,e){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,e)}_enterGroup(t,e){e&&yu(t,Oe(Xi(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const i=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();i&&(i===t||t.isDescendantOf(i))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(yu(t,Oe(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const i=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;i>-1&&this._activeObjects.splice(i,1)}shouldCache(){const t=je.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t,e,i){this._renderBackground(t);for(let a=0;a<this._objects.length;a++){var r;const c=this._objects[a];(r=this.canvas)!==null&&r!==void 0&&r.preserveObjectStacking&&c.group!==this?(t.save(),t.transform(...Xi(this.calcTransformMatrix())),c.render(t),t.restore()):c.group===this&&c.render(t)}this._drawClipPath(t,this.clipPath,i)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(t=>t.setCoords())}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(E({target:this,type:xu},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,e){const i=this.includeDefaultValues;return this._objects.filter(function(r){return!r.excludeFromExport}).map(function(r){const a=r.includeDefaultValues;r.includeDefaultValues=i;const c=r[t||"toObject"](e);return r.includeDefaultValues=a,c})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.layoutManager.toObject();return E(E(E({},super.toObject(["subTargetCheck","interactive",...t])),e.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:e}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(t=>{this._watchObject(!1,t),t.dispose()}),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=Vi.prototype._toSVG.call(this),i=e.indexOf("COMMON_PARTS");e[i]='for="group" ';const r=e.join("");return t?t(r):r}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],i=this._createSVGBgRect(t);i&&e.push("		",i);for(let r=0;r<this._objects.length;r++)e.push("		",this._objects[r].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],i=this._createSVGBgRect(t);i&&e.push("	",i);for(let r=0;r<this._objects.length;r++)e.push("	",this._objects[r].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t,e){let{type:i,objects:r=[],layoutManager:a}=t,c=It(t,fT);return Promise.all([Za(r,e),Fu(c,e)]).then(h=>{let[f,g]=h;const m=new this(f,E(E(E({},c),g),{},{layoutManager:new dT}));if(a){const y=et.getClass(a.type),v=et.getClass(a.strategy);m.layoutManager=new y(new v)}else m.layoutManager=new tl;return m.layoutManager.subscribeTargets({type:zn,target:m,targets:m.getObjects()}),m.setCoords(),m})}}M(cr,"type","Group"),M(cr,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),et.setClass(cr);const gT=(o,t)=>Math.min(t.width/o.width,t.height/o.height),pT=(o,t)=>Math.max(t.width/o.width,t.height/o.height),ng="\\s*,?\\s*",Ua="".concat(ng,"(").concat(qi,")"),mT="".concat(Ua).concat(Ua).concat(Ua).concat(ng,"([01])").concat(ng,"([01])").concat(Ua).concat(Ua),yT={m:"l",M:"L"},vT=(o,t,e,i,r,a,c,h,f,g,m)=>{const y=Fn(o),v=Hn(o),_=Fn(t),S=Hn(t),w=e*r*_-i*a*S+c,C=i*r*_+e*a*S+h;return["C",g+f*(-e*r*v-i*a*y),m+f*(-i*r*v+e*a*y),w+f*(e*r*S+i*a*_),C+f*(i*r*S-e*a*_),w,C]},D0=(o,t,e,i)=>{const r=Math.atan2(t,o),a=Math.atan2(i,e);return a>=r?a-r:2*Math.PI-(r-a)};function M0(o,t,e,i,r,a,c,h){let f;if(Dt.cachesBoundsOfCurve&&(f=[...arguments].join(),Xa.boundsOfCurveCache[f]))return Xa.boundsOfCurveCache[f];const g=Math.sqrt,m=Math.abs,y=[],v=[[0,0],[0,0]];let _=6*o-12*e+6*r,S=-3*o+9*e-9*r+3*c,w=3*e-3*o;for(let U=0;U<2;++U){if(U>0&&(_=6*t-12*i+6*a,S=-3*t+9*i-9*a+3*h,w=3*i-3*t),m(S)<1e-12){if(m(_)<1e-12)continue;const ct=-w/_;0<ct&&ct<1&&y.push(ct);continue}const F=_*_-4*w*S;if(F<0)continue;const I=g(F),J=(-_+I)/(2*S);0<J&&J<1&&y.push(J);const Z=(-_-I)/(2*S);0<Z&&Z<1&&y.push(Z)}let C=y.length;const k=C,z=H_(o,t,e,i,r,a,c,h);for(;C--;){const{x:U,y:F}=z(y[C]);v[0][C]=U,v[1][C]=F}v[0][k]=o,v[1][k]=t,v[0][k+1]=c,v[1][k+1]=h;const Y=[new B(Math.min(...v[0]),Math.min(...v[1])),new B(Math.max(...v[0]),Math.max(...v[1]))];return Dt.cachesBoundsOfCurve&&(Xa.boundsOfCurveCache[f]=Y),Y}const bT=(o,t,e)=>{let[i,r,a,c,h,f,g,m]=e;const y=((v,_,S,w,C,k,z)=>{if(S===0||w===0)return[];let Y=0,U=0,F=0;const I=Math.PI,J=z*_g,Z=Hn(J),ct=Fn(J),wt=.5*(-ct*v-Z*_),Mt=.5*(-ct*_+Z*v),ht=S**2,bt=w**2,dt=Mt**2,Tt=wt**2,H=ht*bt-ht*dt-bt*Tt;let W=Math.abs(S),$=Math.abs(w);if(H<0){const pi=Math.sqrt(1-H/(ht*bt));W*=pi,$*=pi}else F=(C===k?-1:1)*Math.sqrt(H/(ht*dt+bt*Tt));const yt=F*W*Mt/$,O=-F*$*wt/W,q=ct*yt-Z*O+.5*v,tt=Z*yt+ct*O+.5*_;let K=D0(1,0,(wt-yt)/W,(Mt-O)/$),nt=D0((wt-yt)/W,(Mt-O)/$,(-wt-yt)/W,(-Mt-O)/$);k===0&&nt>0?nt-=2*I:k===1&&nt<0&&(nt+=2*I);const _t=Math.ceil(Math.abs(nt/I*2)),ot=[],fe=nt/_t,Ht=8/3*Math.sin(fe/4)*Math.sin(fe/4)/Math.sin(fe/2);let gi=K+fe;for(let pi=0;pi<_t;pi++)ot[pi]=vT(K,gi,ct,Z,W,$,q,tt,Ht,Y,U),Y=ot[pi][5],U=ot[pi][6],K=gi,gi+=fe;return ot})(g-o,m-t,r,a,h,f,c);for(let v=0,_=y.length;v<_;v++)y[v][1]+=o,y[v][2]+=t,y[v][3]+=o,y[v][4]+=t,y[v][5]+=o,y[v][6]+=t;return y},_T=o=>{let t=0,e=0,i=0,r=0;const a=[];let c,h=0,f=0;for(const g of o){const m=[...g];let y;switch(m[0]){case"l":m[1]+=t,m[2]+=e;case"L":t=m[1],e=m[2],y=["L",t,e];break;case"h":m[1]+=t;case"H":t=m[1],y=["L",t,e];break;case"v":m[1]+=e;case"V":e=m[1],y=["L",t,e];break;case"m":m[1]+=t,m[2]+=e;case"M":t=m[1],e=m[2],i=m[1],r=m[2],y=["M",t,e];break;case"c":m[1]+=t,m[2]+=e,m[3]+=t,m[4]+=e,m[5]+=t,m[6]+=e;case"C":h=m[3],f=m[4],t=m[5],e=m[6],y=["C",m[1],m[2],h,f,t,e];break;case"s":m[1]+=t,m[2]+=e,m[3]+=t,m[4]+=e;case"S":c==="C"?(h=2*t-h,f=2*e-f):(h=t,f=e),t=m[3],e=m[4],y=["C",h,f,m[1],m[2],t,e],h=y[3],f=y[4];break;case"q":m[1]+=t,m[2]+=e,m[3]+=t,m[4]+=e;case"Q":h=m[1],f=m[2],t=m[3],e=m[4],y=["Q",h,f,t,e];break;case"t":m[1]+=t,m[2]+=e;case"T":c==="Q"?(h=2*t-h,f=2*e-f):(h=t,f=e),t=m[1],e=m[2],y=["Q",h,f,t,e];break;case"a":m[6]+=t,m[7]+=e;case"A":bT(t,e,m).forEach(v=>a.push(v)),t=m[6],e=m[7];break;case"z":case"Z":t=i,e=r,y=["Z"]}y?(a.push(y),c=y[0]):c=""}return a},Su=(o,t,e,i)=>Math.sqrt((e-o)**2+(i-t)**2),H_=(o,t,e,i,r,a,c,h)=>f=>{const g=f**3,m=(_=>3*_**2*(1-_))(f),y=(_=>3*_*(1-_)**2)(f),v=(_=>(1-_)**3)(f);return new B(c*g+r*m+e*y+o*v,h*g+a*m+i*y+t*v)},Y_=o=>o**2,V_=o=>2*o*(1-o),N_=o=>(1-o)**2,xT=(o,t,e,i,r,a,c,h)=>f=>{const g=Y_(f),m=V_(f),y=N_(f),v=3*(y*(e-o)+m*(r-e)+g*(c-r)),_=3*(y*(i-t)+m*(a-i)+g*(h-a));return Math.atan2(_,v)},ST=(o,t,e,i,r,a)=>c=>{const h=Y_(c),f=V_(c),g=N_(c);return new B(r*h+e*f+o*g,a*h+i*f+t*g)},wT=(o,t,e,i,r,a)=>c=>{const h=1-c,f=2*(h*(e-o)+c*(r-e)),g=2*(h*(i-t)+c*(a-i));return Math.atan2(g,f)},E0=(o,t,e)=>{let i=new B(t,e),r=0;for(let a=1;a<=100;a+=1){const c=o(a/100);r+=Su(i.x,i.y,c.x,c.y),i=c}return r},CT=(o,t)=>{let e,i=0,r=0,a={x:o.x,y:o.y},c=E({},a),h=.01,f=0;const g=o.iterator,m=o.angleFinder;for(;r<t&&h>1e-4;)c=g(i),f=i,e=Su(a.x,a.y,c.x,c.y),e+r>t?(i-=h,h/=2):(a=c,i+=h,r+=e);return E(E({},c),{},{angle:m(f)})},X_=o=>{let t,e,i=0,r=0,a=0,c=0,h=0;const f=[];for(const g of o){const m={x:r,y:a,command:g[0],length:0};switch(g[0]){case"M":e=m,e.x=c=r=g[1],e.y=h=a=g[2];break;case"L":e=m,e.length=Su(r,a,g[1],g[2]),r=g[1],a=g[2];break;case"C":t=H_(r,a,g[1],g[2],g[3],g[4],g[5],g[6]),e=m,e.iterator=t,e.angleFinder=xT(r,a,g[1],g[2],g[3],g[4],g[5],g[6]),e.length=E0(t,r,a),r=g[5],a=g[6];break;case"Q":t=ST(r,a,g[1],g[2],g[3],g[4]),e=m,e.iterator=t,e.angleFinder=wT(r,a,g[1],g[2],g[3],g[4]),e.length=E0(t,r,a),r=g[3],a=g[4];break;case"Z":e=m,e.destX=c,e.destY=h,e.length=Su(r,a,c,h),r=c,a=h}i+=e.length,f.push(e)}return f.push({length:i,x:r,y:a}),f},TT=function(o,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:X_(o),i=0;for(;t-e[i].length>0&&i<e.length-2;)t-=e[i].length,i++;const r=e[i],a=t/r.length,c=o[i];switch(r.command){case"M":return{x:r.x,y:r.y,angle:0};case"Z":return E(E({},new B(r.x,r.y).lerp(new B(r.destX,r.destY),a)),{},{angle:Math.atan2(r.destY-r.y,r.destX-r.x)});case"L":return E(E({},new B(r.x,r.y).lerp(new B(c[1],c[2]),a)),{},{angle:Math.atan2(c[2]-r.y,c[1]-r.x)});case"C":case"Q":return CT(r,t)}},OT=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),k0=new RegExp(mT,"g"),DT=new RegExp(qi,"gi"),MT={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},ET=o=>{var t;const e=[],i=(t=o.match(OT))!==null&&t!==void 0?t:[];for(const r of i){const a=r[0];if(a==="z"||a==="Z"){e.push([a]);continue}const c=MT[a.toLowerCase()];let h=[];if(a==="a"||a==="A"){k0.lastIndex=0;for(let f=null;f=k0.exec(r);)h.push(...f.slice(1))}else h=r.match(DT)||[];for(let f=0;f<h.length;f+=c){const g=new Array(c),m=yT[a];g[0]=f>0&&m?m:a;for(let y=0;y<c;y++)g[y+1]=parseFloat(h[f+y]);e.push(g)}}return e},kT=(o,t)=>o.map(e=>e.map((i,r)=>r===0||t===void 0?i:Nt(i,t)).join(" ")).join(" ");function sg(o,t){const e=o.style;e&&t&&(typeof t=="string"?e.cssText+=";"+t:Object.entries(t).forEach(i=>{let[r,a]=i;return e.setProperty(r,a)}))}class AT extends m_{constructor(t){let{allowTouchScrolling:e=!1,containerClass:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),M(this,"upper",void 0),M(this,"container",void 0);const{el:r}=this.lower,a=this.createUpperCanvas();this.upper={el:a,ctx:a.getContext("2d")},this.applyCanvasStyle(r,{allowTouchScrolling:e}),this.applyCanvasStyle(a,{allowTouchScrolling:e,styles:{position:"absolute",left:"0",top:"0"}});const c=this.createContainerElement();c.classList.add(i),r.parentNode&&r.parentNode.replaceChild(c,r),c.append(r,a),this.container=c}createUpperCanvas(){const{el:t}=this.lower,e=Yn();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=ko().createElement("div");return t.setAttribute("data-fabric","wrapper"),sg(t,{position:"relative"}),e0(t),t}applyCanvasStyle(t,e){const{styles:i,allowTouchScrolling:r}=e;sg(t,E(E({},i),{},{"touch-action":r?"manipulation":$e})),e0(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:i,ctx:r}=this.upper;p_(i,r,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),Zd(this.upper.el,t),Zd(this.container,t)}cleanupDOM(t){const e=this.container,{el:i}=this.lower,{el:r}=this.upper;super.cleanupDOM(t),e.removeChild(r),e.removeChild(i),e.parentNode&&e.parentNode.replaceChild(i,e)}dispose(){super.dispose(),fn().dispose(this.upper.el),delete this.upper,delete this.container}}class Xu extends sl{constructor(){super(...arguments),M(this,"targets",[]),M(this,"_hoveredTargets",[]),M(this,"_objectsToRender",void 0),M(this,"_currentTransform",null),M(this,"_groupSelector",null),M(this,"contextTopDirty",!1)}static getDefaults(){return E(E({},super.getDefaults()),Xu.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new AT(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter(e=>!e.group&&e!==t).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),i=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=i,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,i){const r=this.targetFindTolerance,a=this.pixelFindContext;this.clearContext(a),a.save(),a.translate(-e+r,-i+r),a.transform(...this.viewportTransform);const c=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(a),t.selectionBackgroundColor=c,a.restore();const h=Math.round(r*this.getRetinaScaling());return LC(a,h,h,h)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find(i=>!!i&&t[i]===!0):t[e])}_shouldClearSelection(t,e){const i=this.getActiveObjects(),r=this._activeObject;return!!(!e||e&&r&&i.length>1&&i.indexOf(e)===-1&&r!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&r&&r!==e)}_shouldCenterTransform(t,e,i){if(!t)return;let r;return e===Bu||e===ei||e===Ai||e===Qa?r=this.centeredScaling||t.centeredScaling:e===wg&&(r=this.centeredRotation||t.centeredRotation),r?!i:i}_getOriginFromCorner(t,e){const i={x:t.originX,y:t.originY};return e&&(["ml","tl","bl"].includes(e)?i.x=ne:["mr","tr","br"].includes(e)&&(i.x=zt),["tl","mt","tr"].includes(e)?i.y=Qd:["bl","mb","br"].includes(e)&&(i.y=Je)),i}_setupCurrentTransform(t,e,i){var r;const a=e.group?po(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:c="",control:h}=e.getActiveControl()||{},f=i&&h?(r=h.getActionHandler(t,e,h))===null||r===void 0?void 0:r.bind(h):K1,g=((_,S,w,C)=>{if(!S||!_)return"drag";const k=C.controls[S];return k.getActionName(w,k,C)})(i,c,t,e),m=t[this.centeredKey],y=this._shouldCenterTransform(e,g,m)?{x:mt,y:mt}:this._getOriginFromCorner(e,c),v={target:e,action:g,actionHandler:f,actionPerformed:!1,corner:c,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:a.x-e.left,offsetY:a.y-e.top,originX:y.x,originY:y.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:se(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:m,original:E(E({},y_(e)),{},{originX:y.x,originY:y.y})};this._currentTransform=v,this.fire("before:transform",{e:t,transform:v})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:i,deltaX:r,deltaY:a}=this._groupSelector,c=new B(e,i).transform(this.viewportTransform),h=new B(e+r,i+a).transform(this.viewportTransform),f=this.selectionLineWidth/2;let g=Math.min(c.x,h.x),m=Math.min(c.y,h.y),y=Math.max(c.x,h.x),v=Math.max(c.y,h.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(g,m,y-g,v-m)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,g+=f,m+=f,y-=f,v-=f,je.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(g,m,y-g,v-m))}findTarget(t){if(this.skipTargetFind)return;const e=this.getViewportPoint(t),i=this._activeObject,r=this.getActiveObjects();if(this.targets=[],i&&r.length>=1){if(i.findControl(e,Kd(t))||r.length>1&&this.searchPossibleTargets([i],e))return i;if(i===this.searchPossibleTargets([i],e)){if(this.preserveObjectStacking){const a=this.targets;this.targets=[];const c=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&c&&c!==i?(this.targets=a,i):c}return i}}return this.searchPossibleTargets(this._objects,e)}_pointIsInObjectSelectionArea(t,e){let i=t.getCoords();const r=this.getZoom(),a=t.padding/r;if(a){const[c,h,f,g]=i,m=Math.atan2(h.y-c.y,h.x-c.x),y=Fn(m)*a,v=Hn(m)*a,_=y+v,S=y-v;i=[new B(c.x-S,c.y-_),new B(h.x+_,h.y-S),new B(f.x+S,f.y+_),new B(g.x-_,g.y+S)]}return Qt.isPointInPolygon(e,i)}_checkTarget(t,e){return!!(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,po(e,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing||!this.isTargetTransparent(t,e.x,e.y)))}_searchPossibleTargets(t,e){let i=t.length;for(;i--;){const r=t[i];if(this._checkTarget(r,e)){if(ru(r)&&r.subTargetCheck){const a=this._searchPossibleTargets(r._objects,e);a&&this.targets.push(a)}return r}}}searchPossibleTargets(t,e){const i=this._searchPossibleTargets(t,e);if(i&&ru(i)&&i.interactive&&this.targets[0]){const r=this.targets;for(let a=r.length-1;a>0;a--){const c=r[a];if(!ru(c)||!c.interactive)return c}return r[0]}return i}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.upperCanvasEl,r=i.getBoundingClientRect();let a=X1(t),c=r.width||0,h=r.height||0;c&&h||(Je in r&&Qd in r&&(h=Math.abs(r.top-r.bottom)),ne in r&&zt in r&&(c=Math.abs(r.right-r.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,e||(a=po(a,void 0,this.viewportTransform));const f=this.getRetinaScaling();f!==1&&(a.x/=f,a.y/=f);const g=c===0||h===0?new B(1,1):new B(i.width/c,i.height/h);return a.multiply(g)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Yn(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return Js(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,e){let i=!1,r=!1;const a=this.getActiveObjects(),c=[],h=[];t.forEach(f=>{a.includes(f)||(i=!0,f.fire("deselected",{e,target:f}),h.push(f))}),a.forEach(f=>{t.includes(f)||(i=!0,f.fire("selected",{e,target:f}),c.push(f))}),t.length>0&&a.length>0?(r=!0,i&&this.fire("selection:updated",{e,selected:c,deselected:h})):a.length>0?(r=!0,this.fire("selection:created",{e,selected:c})):t.length>0&&(r=!0,this.fire("selection:cleared",{e,deselected:h})),r&&(this._objectsToRender=void 0)}setActiveObject(t,e){const i=this.getActiveObjects(),r=this._setActiveObject(t,e);return this._fireSelectionEvents(i,e),r}_setActiveObject(t,e){const i=this._activeObject;return i!==t&&!(!this._discardActiveObject(e,t)&&this._activeObject)&&!t.onSelect({e})&&(this._activeObject=t,Js(t)&&i!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,e){const i=this._activeObject;return!!i&&!i.onDeselect({e:t,object:e})&&(this._currentTransform&&this._currentTransform.target===i&&this.endCurrentTransform(t),Js(i)&&i===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),i=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[i]});const r=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),r}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,i=e.target,r={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),e.actionPerformed&&(this.fire("object:modified",r),i.fire(gu,r))}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeObject;Js(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,i){const r=this._realizeGroupTransformOnObject(t),a=super._toObject(t,e,i);return t.set(r),a}_realizeGroupTransformOnObject(t){const{group:e}=t;if(e&&Js(e)&&this._activeObject===e){const i=jo(t,["angle","flipX","flipY",zt,ei,Ai,Ao,zo,Je]);return G1(t,e.calcOwnMatrix()),i}return{}}_setSVGObject(t,e,i){const r=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,i),e.set(r)}}M(Xu,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class zT{constructor(t){M(this,"targets",[]),M(this,"__disposer",void 0);const e=()=>{const{hiddenTextarea:r}=t.getActiveObject()||{};r&&r.focus()},i=t.upperCanvasEl;i.addEventListener("click",e),this.__disposer=()=>i.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach(t=>{t.isEditing&&t.exitEditing()})}add(t){this.targets.push(t)}remove(t){this.unregister(t),oo(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const RT=["target","oldTarget","fireCanvas","e"],hi={passive:!1},io=(o,t)=>{const e=o.getViewportPoint(t),i=o.getScenePoint(t);return{viewportPoint:e,scenePoint:i,pointer:e,absolutePointer:i}},ms=function(o){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return o.addEventListener(...e)},Ti=function(o){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return o.removeEventListener(...e)},jT={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class rg extends Xu{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),M(this,"_isClick",void 0),M(this,"textEditingManager",new zT(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(ms,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const i=this.upperCanvasEl,r=this._getEventPrefix();t(g_(i),"resize",this._onResize),t(i,r+"down",this._onMouseDown),t(i,"".concat(r,"move"),this._onMouseMove,hi),t(i,"".concat(r,"out"),this._onMouseOut),t(i,"".concat(r,"enter"),this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"click",this._onClick),t(i,"dblclick",this._onClick),t(i,"dragstart",this._onDragStart),t(i,"dragend",this._onDragEnd),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,hi)}removeListeners(){this.addOrRemove(Ti,"remove");const t=this._getEventPrefix(),e=Ni(this.upperCanvasEl);Ti(e,"".concat(t,"up"),this._onMouseUp),Ti(e,"touchend",this._onTouchEnd,hi),Ti(e,"".concat(t,"move"),this._onMouseMove,hi),Ti(e,"touchmove",this._onMouseMove,hi),clearTimeout(this._willAddMouseDown)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,i=E({e:t},io(this,t));this.fire("mouse:out",E(E({},i),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",E({},i)),this._hoveredTargets.forEach(r=>{this.fire("mouse:out",E(E({},i),{},{target:r})),r&&r.fire("mouseout",E({},i))}),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",E({e:t},io(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(e&&e.onDragStart(t)){this._dragSource=e;const i={e:t,target:e};return this.fire("dragstart",i),e.fire("dragstart",i),void ms(this.upperCanvasEl,"drag",this._onDragProgress)}i0(t)}_renderDragEffects(t,e,i){let r=!1;const a=this._dropTarget;a&&a!==e&&a!==i&&(a.clearContextTop(),r=!0),e?.clearContextTop(),i!==e&&i?.clearContextTop();const c=this.contextTop;c.save(),c.transform(...this.viewportTransform),e&&(c.save(),e.transform(c),e.renderDragSourceEffect(t),c.restore(),r=!0),i&&(c.save(),i.transform(c),i.renderDropTargetEffect(t),c.restore(),r=!0),c.restore(),r&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==$e,i=e?this._activeObject:void 0,r={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:i};Ti(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",r),this._dragSource&&this._dragSource.fire("dragend",r),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:i,targets:r}=this.findDragTargets(t),a=this._dragSource,c={e:t,target:i,subTargets:r,dragSource:a,canDrop:!1,dropTarget:void 0};let h;this.fire(e,c),this._fireEnterLeaveEvents(i,c),i&&(i.canDrop(t)&&(h=i),i.fire(e,c));for(let f=0;f<r.length;f++){const g=r[f];g.canDrop(t)&&(h=g),g.fire(e,c)}this._renderDragEffects(t,a,h),this._dropTarget=h}_onDragEnter(t){const{target:e,targets:i}=this.findDragTargets(t),r={e:t,target:e,subTargets:i,dragSource:this._dragSource};this.fire("dragenter",r),this._fireEnterLeaveEvents(e,r)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:i}=this.findDragTargets(t),r=this._basicEventHandler("drop:before",E({e:t,target:e,subTargets:i,dragSource:this._dragSource},io(this,t)));r.didDrop=!1,r.dropTarget=void 0,this._basicEventHandler("drop",r),this.fire("drop:after",r)}_onContextMenu(t){const e=this.findTarget(t),i=this.targets||[],r=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:i});return this.stopContextMenu&&i0(t),this._basicEventHandler("contextmenu",r),!1}_onClick(t){const e=t.detail;e>3||e<2||(this._cacheTransformEventData(t),e==2&&t.type==="dblclick"&&this._handleEvent(t,"dblclick"),e==3&&this._handleEvent(t,"tripleclick"),this._resetTransformEventData())}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){let e=!this.allowTouchScrolling;const i=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),(this.isDrawingMode||i&&this._target===i)&&(e=!0),e&&t.preventDefault(),this._resetTransformEventData();const r=this.upperCanvasEl,a=this._getEventPrefix(),c=Ni(r);ms(c,"touchend",this._onTouchEnd,hi),e&&ms(c,"touchmove",this._onMouseMove,hi),Ti(r,"".concat(a,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,i=this._getEventPrefix();Ti(e,"".concat(i,"move"),this._onMouseMove,hi);const r=Ni(e);ms(r,"".concat(i,"up"),this._onMouseUp),ms(r,"".concat(i,"move"),this._onMouseMove,hi)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const e=this._getEventPrefix(),i=Ni(this.upperCanvasEl);Ti(i,"touchend",this._onTouchEnd,hi),Ti(i,"touchmove",this._onMouseMove,hi),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{ms(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,i=this._getEventPrefix();if(this._isMainEvent(t)){const r=Ni(this.upperCanvasEl);Ti(r,"".concat(i,"up"),this._onMouseUp),Ti(r,"".concat(i,"move"),this._onMouseMove,hi),ms(e,"".concat(i,"move"),this._onMouseMove,hi)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||!e.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t}__onMouseUp(t){var e;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const i=this._currentTransform,r=this._isClick,a=this._target,{button:c}=t;if(c)return(this.fireMiddleClick&&c===1||this.fireRightClick&&c===2)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let h,f,g=!1;if(i&&(this._finalizeCurrentTransform(t),g=i.actionPerformed),!r){const m=a===this._activeObject;this.handleSelection(t),g||(g=this._shouldRender(a)||!m&&a===this._activeObject)}if(a){const m=a.findControl(this.getViewportPoint(t),Kd(t)),{key:y,control:v}=m||{};if(f=y,a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,t),g=!0;else if(v){const _=v.getMouseUpHandler(t,a,v);_&&(h=this.getScenePoint(t),_.call(v,t,i,h.x,h.y))}a.isMoving=!1}if(i&&(i.target!==a||i.corner!==f)){const m=i.target&&i.target.controls[i.corner],y=m&&m.getMouseUpHandler(t,i.target,m);h=h||this.getScenePoint(t),y&&y.call(m,t,i,h.x,h.y)}this._setCursorFromEvent(t,a),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=void 0),g?this.requestRenderAll():r||(e=this._activeObject)!==null&&e!==void 0&&e.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:i,subTargets:r=[]}=e;this.fire(t,e),i&&i.fire(t,e);for(let a=0;a<r.length;a++)r[a]!==i&&r[a].fire(t,e);return e}_handleEvent(t,e,i){const r=this._target,a=this.targets||[],c=E(E(E({e:t,target:r,subTargets:a},io(this,t)),{},{transform:this._currentTransform},e==="up:before"||e==="up"?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{}),e==="down:before"||e==="down"?i:{});this.fire("mouse:".concat(e),c),r&&r.fire("mouse".concat(e),c);for(let h=0;h<a.length;h++)a[h]!==r&&a[h].fire("mouse".concat(e),c)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target,i=!!e&&e===this._activeObject;const{button:r}=t;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(t,"down",{alreadySelected:i}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let a=this._shouldRender(e),c=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,c=!0,a=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const h=this.getScenePoint(t);this._groupSelector={x:h.x,y:h.y,deltaY:0,deltaX:0}}if(i=!!e&&e===this._activeObject,e){e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const h=e.findControl(this.getViewportPoint(t),Kd(t));if(e===this._activeObject&&(h||!c)){this._setupCurrentTransform(t,e,i);const f=h?h.control:void 0,g=this.getScenePoint(t),m=f&&f.getMouseDownHandler(t,e,f);m&&m.call(f,t,this._currentTransform,g.x,g.y)}}a&&(this._objectsToRender=void 0),this._handleEvent(t,"down",{alreadySelected:i}),a&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=po(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const i=this.getScenePoint(t);e.deltaX=i.x-e.x,e.deltaY=i.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const i=this.findTarget(t);this._setCursorFromEvent(t,i),this._fireOverOutEvents(t,i)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const i=this._hoveredTarget,r=this._hoveredTargets,a=this.targets,c=Math.max(r.length,a.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:i,fireCanvas:!0});for(let h=0;h<c;h++)this.fireSyntheticInOutEvents("mouse",{e:t,target:a[h],oldTarget:r[h]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const i=this._draggedoverTarget,r=this._hoveredTargets,a=this.targets,c=Math.max(r.length,a.length);this.fireSyntheticInOutEvents("drag",E(E({},e),{},{target:t,oldTarget:i,fireCanvas:!0}));for(let h=0;h<c;h++)this.fireSyntheticInOutEvents("drag",E(E({},e),{},{target:a[h],oldTarget:r[h]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:i,oldTarget:r,fireCanvas:a,e:c}=e,h=It(e,RT);const{targetIn:f,targetOut:g,canvasIn:m,canvasOut:y}=jT[t],v=r!==i;if(r&&v){const _=E(E({},h),{},{e:c,target:r,nextTarget:i},io(this,c));a&&this.fire(y,_),r.fire(g,_)}if(i&&v){const _=E(E({},h),{},{e:c,target:i,previousTarget:r},io(this,c));a&&this.fire(m,_),i.fire(f,_)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getScenePoint(t),i=this._currentTransform,r=i.target,a=r.group?po(e,void 0,r.group.calcTransformMatrix()):e;i.shiftKey=t.shiftKey,i.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,i,a),i.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,i){const{action:r,actionHandler:a,target:c}=e,h=!!a&&a(t,e,i.x,i.y);h&&c.setCoords(),r==="drag"&&h&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||h}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let i=e.hoverCursor||this.hoverCursor;const r=Js(this._activeObject)?this._activeObject:null,a=(!r||e.group!==r)&&e.findControl(this.getViewportPoint(t));if(a){const c=a.control;this.setCursor(c.cursorStyleHandler(t,c,e))}else e.subTargetCheck&&this.targets.concat().reverse().map(c=>{i=c.hoverCursor||i}),this.setCursor(i)}handleMultiSelection(t,e){const i=this._activeObject,r=Js(i);if(i&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(i!==e||r)&&(r||!e.isDescendantOf(i)&&!i.isDescendantOf(e))&&!e.onSelect({e:t})&&!i.getActiveControl()){if(r){const a=i.getObjects();if(e===i){const c=this.getViewportPoint(t);if(!(e=this.searchPossibleTargets(a,c)||this.searchPossibleTargets(this._objects,c))||!e.selectable)return!1}e.group===i?(i.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],i.size()===1&&this._setActiveObject(i.item(0),t)):(i.multiSelectAdd(e),this._hoveredTarget=i,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(a,t)}else{i.isEditing&&i.exitEditing();const a=new(et.getClass("ActiveSelection"))([],{canvas:this});a.multiSelectAdd(i,e),this._hoveredTarget=a,this._setActiveObject(a,t),this._fireSelectionEvents([i],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:i,deltaX:r,deltaY:a}=this._groupSelector,c=new B(e,i),h=c.add(new B(r,a)),f=c.min(h),g=c.max(h).subtract(f),m=this.collectObjects({left:f.x,top:f.y,width:g.x,height:g.y},{includeIntersecting:!this.selectionFullyContained}),y=c.eq(h)?m[0]?[m[0]]:[]:m.length>1?m.filter(v=>!v.onSelect({e:t})).reverse():m;if(y.length===1)this.setActiveObject(y[0],t);else if(y.length>1){const v=et.getClass("ActiveSelection");this.setActiveObject(new v(y,{canvas:this}),t)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const q_={x1:0,y1:0,x2:0,y2:0},LT=E(E({},q_),{},{r1:0,r2:0}),lo=(o,t)=>isNaN(o)&&typeof t=="number"?t:o,PT=/^(\d+\.\d+)%|(\d+)%$/;function G_(o){return o&&PT.test(o)}function I_(o,t){const e=typeof o=="number"?o:typeof o=="string"?parseFloat(o)/(G_(o)?100:1):NaN;return wo(0,lo(e,t),1)}const BT=/\s*;\s*/,UT=/\s*:\s*/;function FT(o,t){let e,i;const r=o.getAttribute("style");if(r){const c=r.split(BT);c[c.length-1]===""&&c.pop();for(let h=c.length;h--;){const[f,g]=c[h].split(UT).map(m=>m.trim());f==="stop-color"?e=g:f==="stop-opacity"&&(i=g)}}const a=new Lt(e||o.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:I_(o.getAttribute("offset"),0),color:a.toRgb(),opacity:lo(parseFloat(i||o.getAttribute("stop-opacity")||""),1)*a.getAlpha()*t}}function HT(o,t){const e=[],i=o.getElementsByTagName("stop"),r=I_(t,1);for(let a=i.length;a--;)e.push(FT(i[a],r));return e}function W_(o){return o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Q_(o){return o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Ui(o,t){return o.getAttribute(t)}function YT(o,t){return function(e,i){let r,{width:a,height:c,gradientUnits:h}=i;return Object.keys(e).reduce((f,g)=>{const m=e[g];return m==="Infinity"?r=1:m==="-Infinity"?r=0:(r=typeof m=="string"?parseFloat(m):m,typeof m=="string"&&G_(m)&&(r*=.01,h==="pixels"&&(g!=="x1"&&g!=="x2"&&g!=="r2"||(r*=a),g!=="y1"&&g!=="y2"||(r*=c)))),f[g]=r,f},{})}(W_(o)==="linear"?function(e){return{x1:Ui(e,"x1")||0,y1:Ui(e,"y1")||0,x2:Ui(e,"x2")||"100%",y2:Ui(e,"y2")||0}}(o):function(e){return{x1:Ui(e,"fx")||Ui(e,"cx")||"50%",y1:Ui(e,"fy")||Ui(e,"cy")||"50%",r1:0,x2:Ui(e,"cx")||"50%",y2:Ui(e,"cy")||"50%",r2:Ui(e,"r")||"50%"}}(o),E(E({},t),{},{gradientUnits:Q_(o)}))}class Oc{constructor(t){const{type:e="linear",gradientUnits:i="pixels",coords:r={},colorStops:a=[],offsetX:c=0,offsetY:h=0,gradientTransform:f,id:g}=t||{};Object.assign(this,{type:e,gradientUnits:i,coords:E(E({},e==="radial"?LT:q_),r),colorStops:a,offsetX:c,offsetY:h,gradientTransform:f,id:g?"".concat(g,"_").concat(Cs()):Cs()})}addColorStop(t){for(const e in t){const i=new Lt(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this}toObject(t){return E(E({},jo(this,t)),{},{type:this.type,coords:E({},this.coords),colorStops:this.colorStops.map(e=>E({},e)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[],r=this.gradientTransform?this.gradientTransform.concat():Xe.concat(),a=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",c=this.colorStops.map(y=>E({},y)).sort((y,v)=>y.offset-v.offset);let h=-this.offsetX,f=-this.offsetY;var g;a==="objectBoundingBox"?(h/=t.width,f/=t.height):(h+=t.width/2,f+=t.height/2),(g=t)&&typeof g._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(h-=t.pathOffset.x,f-=t.pathOffset.y),r[4]-=h,r[5]-=f;const m=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(a,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(Ka(r),'"'),""].join(" ");if(this.type==="linear"){const{x1:y,y1:v,x2:_,y2:S}=this.coords;i.push("<linearGradient ",m,' x1="',y,'" y1="',v,'" x2="',_,'" y2="',S,`">
`)}else if(this.type==="radial"){const{x1:y,y1:v,x2:_,y2:S,r1:w,r2:C}=this.coords,k=w>C;i.push("<radialGradient ",m,' cx="',k?y:_,'" cy="',k?v:S,'" r="',k?w:C,'" fx="',k?_:y,'" fy="',k?S:v,`">
`),k&&(c.reverse(),c.forEach(Y=>{Y.offset=1-Y.offset}));const z=Math.min(w,C);if(z>0){const Y=z/Math.max(w,C);c.forEach(U=>{U.offset+=Y*(1-U.offset)})}}return c.forEach(y=>{let{color:v,offset:_,opacity:S}=y;i.push("<stop ",'offset="',100*_+"%",'" style="stop-color:',v,S!==void 0?";stop-opacity: "+S:";",`"/>
`)}),i.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),i.join("")}toLive(t){const{x1:e,y1:i,x2:r,y2:a,r1:c,r2:h}=this.coords,f=this.type==="linear"?t.createLinearGradient(e,i,r,a):t.createRadialGradient(e,i,c,r,a,h);return this.colorStops.forEach(g=>{let{color:m,opacity:y,offset:v}=g;f.addColorStop(v,y!==void 0?new Lt(m).setAlpha(y).toRgba():m)}),f}static async fromObject(t){const{colorStops:e,gradientTransform:i}=t;return new this(E(E({},t),{},{colorStops:e?e.map(r=>E({},r)):void 0,gradientTransform:i?[...i]:void 0}))}static fromElement(t,e,i){const r=Q_(t),a=e._findCenterFromElement();return new this(E({id:t.getAttribute("id")||void 0,type:W_(t),coords:YT(t,{width:i.viewBoxWidth||i.width,height:i.viewBoxHeight||i.height}),colorStops:HT(t,i.opacity),gradientUnits:r,gradientTransform:eg(t.getAttribute("gradientTransform")||"")},r==="pixels"?{offsetX:e.width/2-a.x,offsetY:e.height/2-a.y}:{offsetX:0,offsetY:0}))}}M(Oc,"type","Gradient"),et.setClass(Oc,"gradient"),et.setClass(Oc,"linear"),et.setClass(Oc,"radial");const VT=["type","source","patternTransform"];class wd{get type(){return"pattern"}set type(t){ws("warn","Setting type has no effect",t)}constructor(t){M(this,"repeat","repeat"),M(this,"offsetX",0),M(this,"offsetY",0),M(this,"crossOrigin",""),this.id=Cs(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:i}=this;return E(E({},jo(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:i,offsetX:Nt(this.offsetX,Dt.NUM_FRACTION_DIGITS),offsetY:Nt(this.offsetY,Dt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:i}=t;const{source:r,repeat:a,id:c}=this,h=lo(this.offsetX/e,0),f=lo(this.offsetY/i,0),g=a==="repeat-y"||a==="no-repeat"?1+Math.abs(h||0):lo(r.width/e,0),m=a==="repeat-x"||a==="no-repeat"?1+Math.abs(f||0):lo(r.height/i,0);return['<pattern id="SVGID_'.concat(c,'" x="').concat(h,'" y="').concat(f,'" width="').concat(g,'" height="').concat(m,'">'),'<image x="0" y="0" width="'.concat(r.width,'" height="').concat(r.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{type:i,source:r,patternTransform:a}=t,c=It(t,VT);const h=await au(r,E(E({},e),{},{crossOrigin:c.crossOrigin}));return new this(E(E({},c),{},{patternTransform:a&&a.slice(0),source:h}))}}M(wd,"type","Pattern"),et.setClass(wd),et.setClass(wd,"pattern");const NT=["path","left","top"],XT=["d"];class $s extends je{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:i,left:r,top:a}=e,c=It(e,NT);super(),Object.assign(this,$s.ownDefaults),this.setOptions(c),this._setPath(t||[],!0),typeof r=="number"&&this.set(zt,r),typeof a=="number"&&this.set(Je,a)}_setPath(t,e){this.path=_T(Array.isArray(t)?t:ET(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new B(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const e=-this.pathOffset.x,i=-this.pathOffset.y;t.beginPath();for(const r of this.path)switch(r[0]){case"L":t.lineTo(r[1]+e,r[2]+i);break;case"M":t.moveTo(r[1]+e,r[2]+i);break;case"C":t.bezierCurveTo(r[1]+e,r[2]+i,r[3]+e,r[4]+i,r[5]+e,r[6]+i);break;case"Q":t.quadraticCurveTo(r[1]+e,r[2]+i,r[3]+e,r[4]+i);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E(E({},super.toObject(t)),{},{path:this.path.map(e=>e.slice())})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=kT(this.path,Dt.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=Dt.NUM_FRACTION_DIGITS;return" translate(".concat(Nt(-this.pathOffset.x,t),", ").concat(Nt(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:i,pathOffset:r}=this._calcDimensions();this.set({width:e,height:i,pathOffset:r}),t&&this.setPositionByOrigin(r,mt,mt)}_calcBoundsFromPath(){const t=[];let e=0,i=0,r=0,a=0;for(const c of this.path)switch(c[0]){case"L":r=c[1],a=c[2],t.push({x:e,y:i},{x:r,y:a});break;case"M":r=c[1],a=c[2],e=r,i=a;break;case"C":t.push(...M0(r,a,c[1],c[2],c[3],c[4],c[5],c[6])),r=c[5],a=c[6];break;case"Q":t.push(...M0(r,a,c[1],c[2],c[1],c[2],c[3],c[4])),r=c[3],a=c[4];break;case"Z":r=e,a=i}return Pn(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return E(E({},t),{},{pathOffset:new B(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,i){const r=Xn(t,this.ATTRIBUTE_NAMES,i),{d:a}=r;return new this(a,E(E(E({},It(r,XT)),e),{},{left:void 0,top:void 0}))}}M($s,"type","Path"),M($s,"cacheProperties",[...Nn,"path","fillRule"]),M($s,"ATTRIBUTE_NAMES",[...Ms,"d"]),et.setClass($s),et.setSVGClass($s);const qT=["left","top","radius"],Z_=["radius","startAngle","endAngle","counterClockwise"];class on extends je{static getDefaults(){return E(E({},super.getDefaults()),on.ownDefaults)}constructor(t){super(),Object.assign(this,on.ownDefaults),this.setOptions(t)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,se(this.startAngle),se(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(ei)}getRadiusY(){return this.get("radius")*this.get(Ai)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Z_,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,i=se(this.startAngle),r=se(this.endAngle),a=Fn(i)*e,c=Hn(i)*e,h=Fn(r)*e,f=Hn(r)*e,g=t>180?1:0,m=this.counterClockwise?0:1;return['<path d="M '.concat(a," ").concat(c," A ").concat(e," ").concat(e," 0 ").concat(g," ").concat(m," ").concat(h," ").concat(f,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(t,e,i){const r=Xn(t,this.ATTRIBUTE_NAMES,i),{left:a=0,top:c=0,radius:h=0}=r;return new this(E(E({},It(r,qT)),{},{radius:h,left:a-h,top:c-h}))}static fromObject(t){return super._fromObject(t)}}M(on,"type","Circle"),M(on,"cacheProperties",[...Nn,...Z_]),M(on,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),M(on,"ATTRIBUTE_NAMES",["cx","cy","r",...Ms]),et.setClass(on),et.setSVGClass(on);const GT=["x1","y1","x2","y2"],IT=["x1","y1","x2","y2"],og=["x1","x2","y1","y2"];class tr extends je{constructor(){let[t,e,i,r]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,tr.ownDefaults),this.setOptions(a),this.x1=t,this.x2=i,this.y1=e,this.y2=r,this._setWidthHeight();const{left:c,top:h}=a;typeof c=="number"&&this.set(zt,c),typeof h=="number"&&this.set(Je,h)}_setWidthHeight(){const{x1:t,y1:e,x2:i,y2:r}=this;this.width=Math.abs(i-t),this.height=Math.abs(r-e);const{left:a,top:c,width:h,height:f}=Pn([{x:t,y:e},{x:i,y:r}]),g=new B(a+h/2,c+f/2);this.setPositionByOrigin(g,mt,mt)}_set(t,e){return super._set(t,e),og.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const i=t.strokeStyle;var r;Ei(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(r=this.stroke)!==null&&r!==void 0?r:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i}_findCenterFromElement(){return new B((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E(E({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:i,y2:r,width:a,height:c}=this,h=t<=e?-1:1,f=i<=r?-1:1;return{x1:h*a/2,x2:h*-a/2,y1:f*c/2,y2:f*-c/2}}_toSVG(){const{x1:t,x2:e,y1:i,y2:r}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(i,'" x2="').concat(e,'" y2="').concat(r,`" />
`)]}static async fromElement(t,e,i){const r=Xn(t,this.ATTRIBUTE_NAMES,i),{x1:a=0,y1:c=0,x2:h=0,y2:f=0}=r;return new this([a,c,h,f],It(r,GT))}static fromObject(t){let{x1:e,y1:i,x2:r,y2:a}=t,c=It(t,IT);return this._fromObject(E(E({},c),{},{points:[e,i,r,a]}),{extraParam:"points"})}}M(tr,"type","Line"),M(tr,"cacheProperties",[...Nn,...og]),M(tr,"ATTRIBUTE_NAMES",Ms.concat(og)),et.setClass(tr),et.setSVGClass(tr);class xs extends je{static getDefaults(){return E(E({},super.getDefaults()),xs.ownDefaults)}constructor(t){super(),Object.assign(this,xs.ownDefaults),this.setOptions(t)}_render(t){const e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}M(xs,"type","Triangle"),M(xs,"ownDefaults",{width:100,height:100}),et.setClass(xs),et.setSVGClass(xs);const K_=["rx","ry"];class an extends je{static getDefaults(){return E(E({},super.getDefaults()),an.ownDefaults)}constructor(t){super(),Object.assign(this,an.ownDefaults),this.setOptions(t)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get(ei)}getRy(){return this.get("ry")*this.get(Ai)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...K_,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,fu,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,i){const r=Xn(t,this.ATTRIBUTE_NAMES,i);return r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,new this(r)}}function WT(o){if(!o)return[];const t=o.replace(/,/g," ").trim().split(/\s+/),e=[];for(let i=0;i<t.length;i+=2)e.push({x:parseFloat(t[i]),y:parseFloat(t[i+1])});return e}M(an,"type","Ellipse"),M(an,"cacheProperties",[...Nn,...K_]),M(an,"ownDefaults",{rx:0,ry:0}),M(an,"ATTRIBUTE_NAMES",[...Ms,"cx","cy","rx","ry"]),et.setClass(an),et.setSVGClass(an);const QT=["left","top"],J_={exactBoundingBox:!1};class Yi extends je{static getDefaults(){return E(E({},super.getDefaults()),Yi.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),M(this,"strokeDiff",void 0),Object.assign(this,Yi.ownDefaults),this.setOptions(e),this.points=t;const{left:i,top:r}=e;this.initialized=!0,this.setBoundingBox(!0),typeof i=="number"&&this.set(zt,i),typeof r=="number"&&this.set(Je,r)}isOpen(){return!0}_projectStrokeOnPoints(t){return BC(this.points,t,this.isOpen())}_calcDimensions(t){t=E({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map(g=>g.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new B,strokeOffset:new B,strokeDiff:new B};const i=Pn(e),r=Uu(E(E({},t),{},{scaleX:1,scaleY:1})),a=Pn(this.points.map(g=>Ke(g,r,!0))),c=new B(this.scaleX,this.scaleY);let h=i.left+i.width/2,f=i.top+i.height/2;return this.exactBoundingBox&&(h-=f*Math.tan(se(this.skewX)),f-=h*Math.tan(se(this.skewY))),E(E({},i),{},{pathOffset:new B(h,f),strokeOffset:new B(a.left,a.top).subtract(new B(i.left,i.top)).multiply(c),strokeDiff:new B(i.width,i.height).subtract(new B(a.width,a.height)).multiply(c)})}_findCenterFromElement(){const t=Pn(this.points);return new B(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:i,width:r,height:a,pathOffset:c,strokeOffset:h,strokeDiff:f}=this._calcDimensions();this.set({width:r,height:a,pathOffset:c,strokeOffset:h,strokeDiff:f}),t&&this.setPositionByOrigin(new B(e+r/2,i+a/2),mt,mt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new B(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let c;if(Object.keys(t).some(h=>this.strokeUniform||this.constructor.layoutProperties.includes(h))){var e,i;const{width:h,height:f}=this._calcDimensions(t);c=new B((e=t.width)!==null&&e!==void 0?e:h,(i=t.height)!==null&&i!==void 0?i:f)}else{var r,a;c=new B((r=t.width)!==null&&r!==void 0?r:this.width,(a=t.height)!==null&&a!==void 0?a:this.height)}return c.multiply(new B(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,e){const i=this.initialized&&this[t]!==e,r=super._set(t,e);return this.exactBoundingBox&&i&&((t===ei||t===Ai)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),r}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E(E({},super.toObject(t)),{},{points:this.points.map(e=>{let{x:i,y:r}=e;return{x:i,y:r}})})}_toSVG(){const t=[],e=this.pathOffset.x,i=this.pathOffset.y,r=Dt.NUM_FRACTION_DIGITS;for(let a=0,c=this.points.length;a<c;a++)t.push(Nt(this.points[a].x-e,r),",",Nt(this.points[a].y-i,r)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,i=this.pathOffset.x,r=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-r);for(let a=0;a<e;a++){const c=this.points[a];t.lineTo(c.x-i,c.y-r)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,i){return new this(WT(t.getAttribute("points")),E(E({},It(Xn(t,this.ATTRIBUTE_NAMES,i),QT)),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}M(Yi,"ownDefaults",J_),M(Yi,"type","Polyline"),M(Yi,"layoutProperties",[Ao,zo,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),M(Yi,"cacheProperties",[...Nn,"points"]),M(Yi,"ATTRIBUTE_NAMES",[...Ms]),et.setClass(Yi),et.setSVGClass(Yi);class Na extends Yi{isOpen(){return!1}}M(Na,"ownDefaults",J_),M(Na,"type","Polygon"),et.setClass(Na),et.setSVGClass(Na);class $_ extends je{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const e=t===void 0?this.styles:{line:this.styles[t]};for(const i in e)for(const r in e[i])for(const a in e[i][r])return!1;return!0}styleHas(t,e){if(!this.styles||e!==void 0&&!this.styles[e])return!1;const i=e===void 0?this.styles:{0:this.styles[e]};for(const r in i)for(const a in i[r])if(i[r][a][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let i,r,a=0,c=!0,h=0;for(const f in e){i=0;for(const g in e[f]){const m=e[f][g]||{};a++,m[t]!==void 0?(r?m[t]!==r&&(c=!1):r=m[t],m[t]===this[t]&&delete m[t]):c=!1,Object.keys(m).length!==0?i++:delete e[f][g]}i===0&&delete e[f]}for(let f=0;f<this._textLines.length;f++)h+=this._textLines[f].length;c&&a===h&&(this[t]=r,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let i,r,a;for(r in e){for(a in i=e[r],i)delete i[a][t],Object.keys(i[a]).length===0&&delete i[a];Object.keys(i).length===0&&delete e[r]}}_extendStyles(t,e){const{lineIndex:i,charIndex:r}=this.get2DCursorLocation(t);this._getLineStyle(i)||this._setLineStyle(i);const a=Dg(E(E({},this._getStyleDeclaration(i,r)),e),c=>c!==void 0);this._setStyleDeclaration(i,r,a)}getSelectionStyles(t,e,i){const r=[];for(let a=t;a<(e||t);a++)r.push(this.getStyleAtPosition(a,i));return r}getStyleAtPosition(t,e){const{lineIndex:i,charIndex:r}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(i,r):this._getStyleDeclaration(i,r)}setSelectionStyles(t,e,i){for(let r=e;r<(i||e);r++)this._extendStyles(r,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var i;const r=this.styles&&this.styles[t];return r&&(i=r[e])!==null&&i!==void 0?i:{}}getCompleteStyleDeclaration(t,e){return E(E({},jo(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,i){this.styles[t][e]=i}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}M($_,"_styleProperties",$1);const ZT=/  +/g,KT=/"/g;function Cd(o,t,e,i,r){return"		".concat(function(a,c){let{left:h,top:f,width:g,height:m}=c,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Dt.NUM_FRACTION_DIGITS;const v=Ja(pe,a,!1),[_,S,w,C]=[h,f,g,m].map(k=>Nt(k,y));return"<rect ".concat(v,' x="').concat(_,'" y="').concat(S,'" width="').concat(w,'" height="').concat(C,'"></rect>')}(o,{left:t,top:e,width:i,height:r}),`
`)}const JT=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Td;class Fe extends $_{static getDefaults(){return E(E({},super.getDefaults()),Fe.ownDefaults)}constructor(t,e){super(),M(this,"__charBounds",[]),Object.assign(this,Fe.ownDefaults),this.setOptions(e),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=X_(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(ln)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,i,r,a,c,h;for(let f=0,g=this._textLines.length;f<g;f++)if((this.textAlign===ln||f!==g-1&&!this.isEndOfWrapping(f))&&(r=0,a=this._textLines[f],e=this.getLineWidth(f),e<this.width&&(h=this.textLines[f].match(this._reSpacesAndTabs)))){i=h.length,t=(this.width-e)/i;for(let m=0;m<=a.length;m++)c=this.__charBounds[f][m],this._reSpaceAndTab.test(a[m])?(c.width+=t,c.kernedWidth+=t,c.left+=r,r+=t):c.left+=r}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const i=e?this._unwrappedTextLines:this._textLines;let r;for(r=0;r<i.length;r++){if(t<=i[r].length)return{lineIndex:r,charIndex:t};t-=i[r].length+this.missingNewlineOffset(r,e)}return{lineIndex:r-1,charIndex:i[r-1].length<t?i[r-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===ti?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,i){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case mt:t.textBaseline="middle";break;case"ascender":t.textBaseline=Je;break;case"descender":t.textBaseline=Qd}t.font=this._getFontDeclaration(e,i)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,i=this._textLines.length;e<i;e++){const r=this.getLineWidth(e);r>t&&(t=r)}return t}_renderTextLine(t,e,i,r,a,c){this._renderChars(t,e,i,r,a,c)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,i=this._getLeftOffset();let r=this._getTopOffset();for(let a=0,c=this._textLines.length;a<c;a++){const h=this.getHeightOfLine(a);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",a)){r+=h;continue}const f=this._textLines[a].length,g=this._getLineLeftOffset(a);let m,y,v=0,_=0,S=this.getValueOfPropertyAt(a,0,"textBackgroundColor");for(let w=0;w<f;w++){const C=this.__charBounds[a][w];y=this.getValueOfPropertyAt(a,w,"textBackgroundColor"),this.path?(t.save(),t.translate(C.renderLeft,C.renderTop),t.rotate(C.angle),t.fillStyle=y,y&&t.fillRect(-C.width/2,-h/this.lineHeight*(1-this._fontSizeFraction),C.width,h/this.lineHeight),t.restore()):y!==S?(m=i+g+_,this.direction==="rtl"&&(m=this.width-m-v),t.fillStyle=S,S&&t.fillRect(m,r,v,h/this.lineHeight),_=C.left,v=C.width,S=y):v+=C.kernedWidth}y&&!this.path&&(m=i+g+_,this.direction==="rtl"&&(m=this.width-m-v),t.fillStyle=y,t.fillRect(m,r,v,h/this.lineHeight)),r+=h}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,i,r){const a=Xa.getFontCache(e),c=this._getFontDeclaration(e),h=i+t,f=i&&c===this._getFontDeclaration(r),g=e.fontSize/this.CACHE_FONT_SIZE;let m,y,v,_;if(i&&a[i]!==void 0&&(v=a[i]),a[t]!==void 0&&(_=m=a[t]),f&&a[h]!==void 0&&(y=a[h],_=y-v),m===void 0||v===void 0||y===void 0){const S=function(){return Td||(Td=zi({width:0,height:0}).getContext("2d")),Td}();this._setTextStyles(S,e,!0),m===void 0&&(_=m=S.measureText(t).width,a[t]=m),v===void 0&&f&&i&&(v=S.measureText(i).width,a[i]=v),f&&y===void 0&&(y=S.measureText(h).width,a[h]=y,_=y-v)}return{width:m*g,kernedWidth:_*g}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,i,r=0;const a=this.pathSide===ne,c=this.path,h=this._textLines[t],f=h.length,g=new Array(f);this.__charBounds[t]=g;for(let m=0;m<f;m++){const y=h[m];i=this._getGraphemeBox(y,t,m,e),g[m]=i,r+=i.kernedWidth,e=y}if(g[f]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},c&&c.segmentsInfo){let m=0;const y=c.segmentsInfo[c.segmentsInfo.length-1].length;switch(this.textAlign){case zt:m=a?y-r:0;break;case mt:m=(y-r)/2;break;case ne:m=a?0:y-r}m+=this.pathStartOffset*(a?-1:1);for(let v=a?f-1:0;a?v>=0:v<f;a?v--:v++)i=g[v],m>y?m%=y:m<0&&(m+=y),this._setGraphemeOnPath(m,i),m+=i.kernedWidth}return{width:r,numOfSpaces:0}}_setGraphemeOnPath(t,e){const i=t+e.kernedWidth/2,r=this.path,a=TT(r.path,i,r.segmentsInfo);e.renderLeft=a.x-r.pathOffset.x,e.renderTop=a.y-r.pathOffset.y,e.angle=a.angle+(this.pathSide===ne?Math.PI:0)}_getGraphemeBox(t,e,i,r,a){const c=this.getCompleteStyleDeclaration(e,i),h=r?this.getCompleteStyleDeclaration(e,i-1):{},f=this._measureChar(t,c,r,h);let g,m=f.kernedWidth,y=f.width;this.charSpacing!==0&&(g=this._getWidthOfCharSpacing(),y+=g,m+=g);const v={width:y,left:0,height:c.fontSize,kernedWidth:m,deltaY:c.deltaY};if(i>0&&!a){const _=this.__charBounds[e][i-1];v.left=_.left+_.width+f.kernedWidth-f.width}return v}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let i=1,r=this._textLines[t].length;i<r;i++)e=Math.max(this.getHeightOfChar(t,i),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let i=0,r=this._textLines.length;i<r;i++)t=this.getHeightOfLine(i),e+=i===r-1?t/this.lineHeight:t;return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let i=0;const r=this._getLeftOffset(),a=this._getTopOffset();for(let c=0,h=this._textLines.length;c<h;c++){const f=this.getHeightOfLine(c),g=f/this.lineHeight,m=this._getLineLeftOffset(c);this._renderTextLine(e,t,this._textLines[c],r+m,a+i+g,c),i+=f}t.restore()}_renderTextFill(t){(this.fill||this.styleHas(pe))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,i,r,a,c){const h=this.getHeightOfLine(c),f=this.textAlign.includes(ln),g=this.path,m=!f&&this.charSpacing===0&&this.isEmptyStyles(c)&&!g,y=this.direction==="ltr",v=this.direction==="ltr"?1:-1,_=e.direction;let S,w,C,k,z,Y="",U=0;if(e.save(),_!==this.direction&&(e.canvas.setAttribute("dir",y?"ltr":"rtl"),e.direction=y?"ltr":"rtl",e.textAlign=y?zt:ne),a-=h*this._fontSizeFraction/this.lineHeight,m)return this._renderChar(t,e,c,0,i.join(""),r,a),void e.restore();for(let F=0,I=i.length-1;F<=I;F++)k=F===I||this.charSpacing||g,Y+=i[F],C=this.__charBounds[c][F],U===0?(r+=v*(C.kernedWidth-C.width),U+=C.width):U+=C.kernedWidth,f&&!k&&this._reSpaceAndTab.test(i[F])&&(k=!0),k||(S=S||this.getCompleteStyleDeclaration(c,F),w=this.getCompleteStyleDeclaration(c,F+1),k=Lg(S,w,!1)),k&&(g?(e.save(),e.translate(C.renderLeft,C.renderTop),e.rotate(C.angle),this._renderChar(t,e,c,F,Y,-U/2,0),e.restore()):(z=r,this._renderChar(t,e,c,F,Y,z,a)),Y="",S=w,r+=v*U,U=0);e.restore()}_applyPatternGradientTransformText(t){const e=this.width+this.strokeWidth,i=this.height+this.strokeWidth,r=zi({width:e,height:i}),a=r.getContext("2d");return r.width=e,r.height=i,a.beginPath(),a.moveTo(0,0),a.lineTo(e,0),a.lineTo(e,i),a.lineTo(0,i),a.closePath(),a.translate(e/2,i/2),a.fillStyle=t.toLive(a),this._applyPatternGradientTransform(a,t),a.fill(),a.createPattern(r,"no-repeat")}handleFiller(t,e,i){let r,a;return Ei(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?(r=-this.width/2,a=-this.height/2,t.translate(r,a),t[e]=this._applyPatternGradientTransformText(i),{offsetX:r,offsetY:a}):(t[e]=i.toLive(t),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:i,strokeWidth:r}=e;return t.lineWidth=r,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",i)}_setFillStyles(t,e){let{fill:i}=e;return this.handleFiller(t,"fillStyle",i)}_renderChar(t,e,i,r,a,c,h){const f=this._getStyleDeclaration(i,r),g=this.getCompleteStyleDeclaration(i,r),m=t==="fillText"&&g.fill,y=t==="strokeText"&&g.stroke&&g.strokeWidth;if(y||m){if(e.save(),e.font=this._getFontDeclaration(g),f.textBackgroundColor&&this._removeShadow(e),f.deltaY&&(h+=f.deltaY),m){const v=this._setFillStyles(e,g);e.fillText(a,c-v.offsetX,h-v.offsetY)}if(y){const v=this._setStrokeStyles(e,g);e.strokeText(a,c-v.offsetX,h-v.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,i){const r=this.get2DCursorLocation(t,!0),a=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),c=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),h={fontSize:a*i.size,deltaY:c+a*i.baseline};this.setSelectionStyles(h,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),i=this.width-e,r=this.textAlign,a=this.direction,c=this.isEndOfWrapping(t);let h=0;return r===ln||r===Ga&&!c||r===qa&&!c||r===bu&&!c?0:(r===mt&&(h=i/2),r===ne&&(h=i),r===Ga&&(h=i/2),r===qa&&(h=i),a==="rtl"&&(r===ne||r===ln||r===qa?h=0:r===zt||r===bu?h=-i:r!==mt&&r!==Ga||(h=-i/2)),h)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,i){var r;return(r=this._getStyleDeclaration(t,e)[i])!==null&&r!==void 0?r:this[i]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let i=this._getTopOffset();const r=this._getLeftOffset(),a=this.path,c=this._getWidthOfCharSpacing(),h=e==="linethrough"?.5:e==="overline"?1:0,f=this.offsets[e];for(let g=0,m=this._textLines.length;g<m;g++){const y=this.getHeightOfLine(g);if(!this[e]&&!this.styleHas(e,g)){i+=y;continue}const v=this._textLines[g],_=y/this.lineHeight,S=this._getLineLeftOffset(g);let w=0,C=0,k=this.getValueOfPropertyAt(g,0,e),z=this.getValueOfPropertyAt(g,0,pe),Y=this.getValueOfPropertyAt(g,0,hr),U=k,F=z,I=Y;const J=i+_*(1-this._fontSizeFraction);let Z=this.getHeightOfChar(g,0),ct=this.getValueOfPropertyAt(g,0,"deltaY");for(let ht=0,bt=v.length;ht<bt;ht++){const dt=this.__charBounds[g][ht];U=this.getValueOfPropertyAt(g,ht,e),F=this.getValueOfPropertyAt(g,ht,pe),I=this.getValueOfPropertyAt(g,ht,hr);const Tt=this.getHeightOfChar(g,ht),H=this.getValueOfPropertyAt(g,ht,"deltaY");if(a&&U&&F){const W=this.fontSize*I/1e3;t.save(),t.fillStyle=z,t.translate(dt.renderLeft,dt.renderTop),t.rotate(dt.angle),t.fillRect(-dt.kernedWidth/2,f*Tt+H-h*W,dt.kernedWidth,W),t.restore()}else if((U!==k||F!==z||Tt!==Z||I!==Y||H!==ct)&&C>0){const W=this.fontSize*Y/1e3;let $=r+S+w;this.direction==="rtl"&&($=this.width-$-C),k&&z&&Y&&(t.fillStyle=z,t.fillRect($,J+f*Z+ct-h*W,C,W)),w=dt.left,C=dt.width,k=U,Y=I,z=F,Z=Tt,ct=H}else C+=dt.kernedWidth}let wt=r+S+w;this.direction==="rtl"&&(wt=this.width-wt-C),t.fillStyle=F;const Mt=this.fontSize*I/1e3;U&&F&&I&&t.fillRect(wt,J+f*Z+ct-h*Mt,C-c,Mt),i+=y}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:i=this.fontWeight,fontSize:r=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const c=t.includes("'")||t.includes('"')||t.includes(",")||Fe.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,i,"".concat(a?this.CACHE_FONT_SIZE:r,"px"),c].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return jg(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),i=new Array(e.length),r=[`
`];let a=[];for(let c=0;c<e.length;c++)i[c]=this.graphemeSplit(e[c]),a=a.concat(i[c],r);return a.pop(),{_unwrappedLines:i,lines:e,graphemeText:a,graphemeLines:i}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E(E({},super.toObject([...O_,...t])),{},{styles:YC(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:i}=this.constructor;super.set(t,e);let r=!1,a=!1;if(typeof t=="object")for(const c in t)c==="path"&&this.setPathInfo(),r=r||i.includes(c),a=a||c==="path";else r=i.includes(t),a=t==="path";return a&&this.setPathInfo(),r&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,i){const r=Xn(t,Fe.ATTRIBUTE_NAMES,i),a=E(E({},e),r),{textAnchor:c=zt,textDecoration:h="",dx:f=0,dy:g=0,top:m=0,left:y=0,fontSize:v=xg,strokeWidth:_=1}=a,S=It(a,JT),w=new this((t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),E({left:y+f,top:m+g,underline:h.includes("underline"),overline:h.includes("overline"),linethrough:h.includes("line-through"),strokeWidth:0,fontSize:v},S)),C=w.getScaledHeight()/w.height,k=((w.height+w.strokeWidth)*w.lineHeight-w.height)*C,z=w.getScaledHeight()+k;let Y=0;return c===mt&&(Y=w.getScaledWidth()/2),c===ne&&(Y=w.getScaledWidth()),w.set({left:w.left-Y,top:w.top-(z-w.fontSize*(.07+w._fontSizeFraction))/w.lineHeight,strokeWidth:_}),w}static fromObject(t){return this._fromObject(E(E({},t),{},{styles:VC(t.styles||{},t.text)}),{extraParam:"text"})}}M(Fe,"textLayoutProperties",T_),M(Fe,"cacheProperties",[...Nn,...O_]),M(Fe,"ownDefaults",tC),M(Fe,"type","Text"),M(Fe,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),M(Fe,"ATTRIBUTE_NAMES",Ms.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),L_(Fe,[class extends S_{_toSVG(){const o=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(o.textTop,o.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(o){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:o,noStyle:!0,withShadow:!0}),e=this.path;return e?t+e._createBaseSVGMarkup(e._toSVG(),{reviver:o,withShadow:!0,additionalTransform:Ka(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(o){let{textBgRects:t,textSpans:e}=o;const i=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(KT,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",i?'text-decoration="'.concat(i,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.join(""),`</text>
`]}_getSVGTextAndBg(o,t){const e=[],i=[];let r,a=o;this.backgroundColor&&i.push(...Cd(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,h=this._textLines.length;c<h;c++)r=this._getLineLeftOffset(c),this.direction==="rtl"&&(r+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(i,c,t+r,a),this._setSVGTextLineText(e,c,t+r,a),a+=this.getHeightOfLine(c);return{textSpans:e,textBgRects:i}}_createTextCharSpan(o,t,e,i,r){const a=Dt.NUM_FRACTION_DIGITS,c=this.getSvgSpanStyles(t,o!==o.trim()||!!o.match(ZT)),h=c?'style="'.concat(c,'"'):"",f=t.deltaY,g=f?' dy="'.concat(Nt(f,a),'" '):"",{angle:m,renderLeft:y,renderTop:v,width:_}=r;let S="";if(y!==void 0){const w=_/2;m&&(S=' rotate="'.concat(Nt(Vn(m),a),'"'));const C=Ro({angle:Vn(m)});C[4]=y,C[5]=v;const k=new B(-w,0).transform(C);e=k.x,i=k.y}return'<tspan x="'.concat(Nt(e,a),'" y="').concat(Nt(i,a),'" ').concat(g).concat(S).concat(h,">").concat(UC(o),"</tspan>")}_setSVGTextLineText(o,t,e,i){const r=this.getHeightOfLine(t),a=this.textAlign.includes(ln),c=this._textLines[t];let h,f,g,m,y,v="",_=0;i+=r*(1-this._fontSizeFraction)/this.lineHeight;for(let S=0,w=c.length-1;S<=w;S++)y=S===w||this.charSpacing||this.path,v+=c[S],g=this.__charBounds[t][S],_===0?(e+=g.kernedWidth-g.width,_+=g.width):_+=g.kernedWidth,a&&!y&&this._reSpaceAndTab.test(c[S])&&(y=!0),y||(h=h||this.getCompleteStyleDeclaration(t,S),f=this.getCompleteStyleDeclaration(t,S+1),y=Lg(h,f,!0)),y&&(m=this._getStyleDeclaration(t,S),o.push(this._createTextCharSpan(v,m,e,i,g)),v="",h=f,this.direction==="rtl"?e-=_:e+=_,_=0)}_setSVGTextLineBg(o,t,e,i){const r=this._textLines[t],a=this.getHeightOfLine(t)/this.lineHeight;let c,h=0,f=0,g=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let m=0;m<r.length;m++){const{left:y,width:v,kernedWidth:_}=this.__charBounds[t][m];c=this.getValueOfPropertyAt(t,m,"textBackgroundColor"),c!==g?(g&&o.push(...Cd(g,e+f,i,h,a)),f=y,h=v,g=c):h+=_}c&&o.push(...Cd(g,e+f,i,h,a))}_getSVGLineTopOffset(o){let t,e=0;for(t=0;t<o;t++)e+=this.getHeightOfLine(t);const i=this.getHeightOfLine(t);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(o){return"".concat(super.getSvgStyles(o)," text-decoration-thickness: ").concat(Nt(this.textDecorationThickness*this.getObjectScaling().y/10,Dt.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(o,t){const{fontFamily:e,strokeWidth:i,stroke:r,fill:a,fontSize:c,fontStyle:h,fontWeight:f,deltaY:g,textDecorationThickness:m,linethrough:y,overline:v,underline:_}=o,S=this.getSvgTextDecoration({underline:_??this.underline,overline:v??this.overline,linethrough:y??this.linethrough}),w=m||this.textDecorationThickness;return[r?Ja(ti,r):"",i?"stroke-width: ".concat(i,"; "):"",e?"font-family: ".concat(e.includes("'")||e.includes('"')?e:"'".concat(e,"'"),"; "):"",c?"font-size: ".concat(c,"px; "):"",h?"font-style: ".concat(h,"; "):"",f?"font-weight: ".concat(f,"; "):"",S?"text-decoration: ".concat(S,"; text-decoration-thickness: ").concat(Nt(w*this.getObjectScaling().y/10,Dt.NUM_FRACTION_DIGITS),"%; "):"",a?Ja(pe,a):"",g?"baseline-shift: ".concat(-g,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(o){return["overline","underline","line-through"].filter(t=>o[t.replace("-","")]).join(" ")}}]),et.setClass(Fe),et.setSVGClass(Fe);class $T{constructor(t){M(this,"target",void 0),M(this,"__mouseDownInPlace",!1),M(this,"__dragStartFired",!1),M(this,"__isDraggingOver",!1),M(this,"__dragStartSelection",void 0),M(this,"__dragImageDisposer",void 0),M(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach(i=>i()),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,i=e.getSelectionStartFromPointer(t);return e.isEditing&&i>=e.selectionStart&&i<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var i;let{selectionStart:r,selectionEnd:a}=e;const c=this.target,h=c.canvas,f=new B(c.flipX?-1:1,c.flipY?-1:1),g=c._getCursorBoundaries(r),m=new B(g.left+g.leftOffset,g.top+g.topOffset).multiply(f).transform(c.calcTransformMatrix()),y=h.getScenePoint(t).subtract(m),v=c.getCanvasRetinaScaling(),_=c.getBoundingRect(),S=m.subtract(new B(_.left,_.top)),w=h.viewportTransform,C=S.add(y).transform(w,!0),k=c.backgroundColor,z=Rg(c.styles);c.backgroundColor="";const Y={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};c.setSelectionStyles(Y,0,r),c.setSelectionStyles(Y,a,c.text.length),c.dirty=!0;const U=c.toCanvasElement({enableRetinaScaling:h.enableRetinaScaling,viewportTransform:!0});c.backgroundColor=k,c.styles=z,c.dirty=!0,sg(U,{position:"fixed",left:"".concat(-U.width,"px"),border:$e,width:"".concat(U.width/v,"px"),height:"".concat(U.height/v,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{U.remove()},Ni(t.target||this.target.hiddenTextarea).body.appendChild(U),(i=t.dataTransfer)===null||i===void 0||i.setDragImage(U,C.x,C.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,i=this.isActive();if(i&&t.dataTransfer){const r=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},a=e._text.slice(r.selectionStart,r.selectionEnd).join(""),c=E({text:e.text,value:a},r);t.dataTransfer.setData("text/plain",a),t.dataTransfer.setData("application/fabric",JSON.stringify({value:a,styles:e.getSelectionStyles(r.selectionStart,r.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,c)}return e.abortCursorAnimation(),i}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),i=this.__dragStartSelection;return e<i.selectionStart||e>i.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const i=this.targetCanDrop(e);!this.__isDraggingOver&&i&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,i=this.targetCanDrop(e);!this.__isDraggingOver&&i?this.__isDraggingOver=!0:this.__isDraggingOver&&!i&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:i}=t,r=i.defaultPrevented;this.__isDraggingOver=!1,i.preventDefault();let a=(e=i.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(a&&!r){const c=this.target,h=c.canvas;let f=c.getSelectionStartFromPointer(i);const{styles:g}=i.dataTransfer.types.includes("application/fabric")?JSON.parse(i.dataTransfer.getData("application/fabric")):{},m=a[Math.max(0,a.length-1)],y=0;if(this.__dragStartSelection){const v=this.__dragStartSelection.selectionStart,_=this.__dragStartSelection.selectionEnd;f>v&&f<=_?f=v:f>_&&(f-=_-v),c.removeChars(v,_),delete this.__dragStartSelection}c._reNewline.test(m)&&(c._reNewline.test(c._text[f])||f===c._text.length)&&(a=a.trimEnd()),t.didDrop=!0,t.dropTarget=c,c.insertChars(a,g,f),h.setActiveObject(c),c.enterEditing(i),c.selectionStart=Math.min(f+y,c._text.length),c.selectionEnd=Math.min(c.selectionStart+a.length,c._text.length),c.hiddenTextarea.value=c.text,c._updateTextarea(),c.hiddenTextarea.focus(),c.fire(du,{index:f+y,action:"drop"}),h.fire("text:changed",{target:c}),h.contextTopDirty=!0,h.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var i;const r=this.target,a=this.target.canvas,{selectionStart:c,selectionEnd:h}=this.__dragStartSelection,f=((i=e.dataTransfer)===null||i===void 0?void 0:i.dropEffect)||$e;f===$e?(r.selectionStart=c,r.selectionEnd=h,r._updateTextarea(),r.hiddenTextarea.focus()):(r.clearContextTop(),f==="move"&&(r.removeChars(c,h),r.selectionStart=r.selectionEnd=c,r.hiddenTextarea&&(r.hiddenTextarea.value=r.text),r._updateTextarea(),r.fire(du,{index:c,action:"dragend"}),a.fire("text:changed",{target:r}),a.requestRenderAll()),r.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const A0=/[ \n\.,;!\?\-]/;class tO extends Fe{constructor(){super(...arguments),M(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:i,delay:r,onComplete:a}=t;return k_({startValue:this._currentCursorOpacity,endValue:e,duration:i,delay:r,onComplete:a,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:c=>{this._currentCursorOpacity=c,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach(e=>{e&&!e.isDone()&&(t=!0,e.abort())}),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(t=>!t||t.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i--;for(;/\S/.test(this._text[i])&&i>-1;)e++,i--;return t-e}findWordBoundaryRight(t){let e=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e}findLineBoundaryLeft(t){let e=0,i=t-1;for(;!/\n/.test(this._text[i])&&i>-1;)e++,i--;return t-e}findLineBoundaryRight(t){let e=0,i=t;for(;!/\n/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e}searchWordBoundary(t,e){const i=this._text;let r=t>0&&this._reSpace.test(i[t])&&(e===-1||!Sg.test(i[t-1]))?t-1:t,a=i[r];for(;r>0&&r<i.length&&!A0.test(a);)r+=e,a=i[r];return e===-1&&A0.test(a)&&r++,r}selectWord(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const i=this.searchWordBoundary(t,-1),r=Math.max(i,this.searchWordBoundary(t,1));this.selectionStart=i,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const i=this.findLineBoundaryLeft(t),r=this.findLineBoundaryRight(t);this.selectionStart=i,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(t){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;Ni(e).activeElement!==e&&e.focus();const i=this.getSelectionStartFromPointer(t),r=this.selectionStart,a=this.selectionEnd;(i===this.__selectionStartOnMouseDown&&r!==a||r!==i&&a!==i)&&(i>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=i):(this.selectionStart=i,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===r&&this.selectionEnd===a||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,i){const r=i.slice(0,t),a=this.graphemeSplit(r).length;if(t===e)return{selectionStart:a,selectionEnd:a};const c=i.slice(t,e);return{selectionStart:a,selectionEnd:a+this.graphemeSplit(c).length}}fromGraphemeToStringSelection(t,e,i){const r=i.slice(0,t).join("").length;return t===e?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+i.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),r=i.lineIndex,a=i.charIndex,c=this.getValueOfPropertyAt(r,a,"fontSize")*this.lineHeight,h=e.leftOffset,f=this.getCanvasRetinaScaling(),g=this.canvas.upperCanvasEl,m=g.width/f,y=g.height/f,v=m-c,_=y-c,S=new B(e.left+h,e.top+e.topOffset+c).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new B(g.clientWidth/m,g.clientHeight/y));return S.x<0&&(S.x=0),S.x>v&&(S.x=v),S.y<0&&(S.y=0),S.y>_&&(S.y=_),S.x+=this.canvas._offset.left,S.y+=this.canvas._offset.top,{left:"".concat(S.x,"px"),top:"".concat(S.y,"px"),fontSize:"".concat(c,"px"),charHeight:c}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const t=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),t&&this.fire(gu),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:i,charIndex:r}=this.get2DCursorLocation(t,!0),{lineIndex:a,charIndex:c}=this.get2DCursorLocation(e,!0);if(i!==a){if(this.styles[i])for(let h=r;h<this._unwrappedTextLines[i].length;h++)delete this.styles[i][h];if(this.styles[a])for(let h=c;h<this._unwrappedTextLines[a].length;h++){const f=this.styles[a][h];f&&(this.styles[i]||(this.styles[i]={}),this.styles[i][r+h-c]=f)}for(let h=i+1;h<=a;h++)delete this.styles[h];this.shiftLineStyles(a,i-a)}else if(this.styles[i]){const h=this.styles[i],f=c-r;for(let g=r;g<c;g++)delete h[g];for(const g in this.styles[i]){const m=parseInt(g,10);m>=c&&(h[m-f]=h[g],delete h[g])}}}shiftLineStyles(t,e){const i=Object.assign({},this.styles);for(const r in this.styles){const a=parseInt(r,10);a>t&&(this.styles[a+e]=i[a],i[a-e]||delete this.styles[a])}}insertNewlineStyleObject(t,e,i,r){const a={},c=this._unwrappedTextLines[t].length,h=c===e;let f=!1;i||(i=1),this.shiftLineStyles(t,i);const g=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const y in this.styles[t]){const v=parseInt(y,10);v>=e&&(f=!0,a[v-e]=this.styles[t][y],h&&e===0||delete this.styles[t][y])}let m=!1;for(f&&!h&&(this.styles[t+i]=a,m=!0),(m||c>e)&&i--;i>0;)r&&r[i-1]?this.styles[t+i]={0:E({},r[i-1])}:g?this.styles[t+i]={0:E({},g)}:delete this.styles[t+i],i--;this._forceClearCache=!0}insertCharStyleObject(t,e,i,r){this.styles||(this.styles={});const a=this.styles[t],c=a?E({},a):{};i||(i=1);for(const f in c){const g=parseInt(f,10);g>=e&&(a[g+i]=c[g],c[g-i]||delete a[g])}if(this._forceClearCache=!0,r){for(;i--;)Object.keys(r[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+i]=E({},r[i]));return}if(!a)return;const h=a[e?e-1:1];for(;h&&i--;)this.styles[t][e+i]=E({},h)}insertNewStyleBlock(t,e,i){const r=this.get2DCursorLocation(e,!0),a=[0];let c,h=0;for(let f=0;f<t.length;f++)t[f]===`
`?(h++,a[h]=0):a[h]++;for(a[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,a[0],i),i=i&&i.slice(a[0]+1)),h&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+a[0],h),c=1;c<h;c++)a[c]>0?this.insertCharStyleObject(r.lineIndex+c,0,a[c],i):i&&this.styles[r.lineIndex+c]&&i[0]&&(this.styles[r.lineIndex+c][0]=i[0]),i=i&&i.slice(a[c]+1);a[c]>0&&this.insertCharStyleObject(r.lineIndex+c,0,a[c],i)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:i;r>i&&this.removeStyleFromTo(i,r);const a=this.graphemeSplit(t);this.insertNewStyleBlock(a,i,e),this._text=[...this._text.slice(0,i),...a,...this._text.slice(r)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,i){i<=t?(e===t?this._selectionDirection=zt:this._selectionDirection===ne&&(this._selectionDirection=zt,this.selectionEnd=t),this.selectionStart=i):i>t&&i<e?this._selectionDirection===ne?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection=ne:this._selectionDirection===zt&&(this._selectionDirection=ne,this.selectionStart=e),this.selectionEnd=i)}}class eO extends tO{initHiddenTextarea(){const t=this.canvas&&Ni(this.canvas.getElement())||ko(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(c=>{let[h,f]=c;return e.setAttribute(h,f)});const{top:i,left:r,fontSize:a}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(i,"; left: ").concat(r,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(a,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(c=>{let[h,f]=c;return e.addEventListener(h,this[f].bind(this))}),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste,{value:i,selectionStart:r,selectionEnd:a}=this.hiddenTextarea;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const c=()=>{this.updateFromTextArea(),this.fire(du),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void c();const h=this._splitTextIntoLines(i).graphemeText,f=this._text.length,g=h.length,m=this.selectionStart,y=this.selectionEnd,v=m!==y;let _,S,w,C,k=g-f;const z=this.fromStringToGraphemeSelection(r,a,i),Y=m>z.selectionStart;v?(S=this._text.slice(m,y),k+=y-m):g<f&&(S=Y?this._text.slice(y+k,y):this._text.slice(m,m-k));const U=h.slice(z.selectionEnd-k,z.selectionEnd);if(S&&S.length&&(U.length&&(_=this.getSelectionStyles(m,m+1,!1),_=U.map(()=>_[0])),v?(w=m,C=y):Y?(w=y-S.length,C=y):(w=y,C=y+S.length),this.removeStyleFromTo(w,C)),U.length){const{copyPasteData:F}=fn();e&&U.join("")===F.copiedText&&!Dt.disableStyleCopyPaste&&(_=F.copiedTextStyle),this.insertNewStyleBlock(U,m,_)}c()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:i,selectionEnd:r}=e;this.compositionStart=i,this.compositionEnd=r,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=fn();t.copiedText=this.getSelectedText(),Dt.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let i,r=this._getLineLeftOffset(t);return e>0&&(i=this.__charBounds[t][e-1],r+=i.left+i.width),r}getDownCursorOffset(t,e){const i=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(i),a=r.lineIndex;if(a===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-i;const c=r.charIndex,h=this._getWidthBeforeCursor(a,c),f=this._getIndexOnLine(a+1,h);return this._textLines[a].slice(c).length+f+1+this.missingNewlineOffset(a)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const i=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(i),a=r.lineIndex;if(a===0||t.metaKey||t.keyCode===33)return-i;const c=r.charIndex,h=this._getWidthBeforeCursor(a,c),f=this._getIndexOnLine(a-1,h),g=this._textLines[a].slice(0,c),m=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+f-g.length+(1-m)}_getIndexOnLine(t,e){const i=this._textLines[t];let r,a,c=this._getLineLeftOffset(t),h=0;for(let f=0,g=i.length;f<g;f++)if(r=this.__charBounds[t][f].width,c+=r,c>e){a=!0;const m=c-r,y=c,v=Math.abs(m-e);h=Math.abs(y-e)<v?f:f-1;break}return a||(h=i.length-1),h}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const i=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===ne);if(e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),i!==0){const r=this.text.length;this.selectionStart=wo(0,this.selectionStart,r),this.selectionEnd=wo(0,this.selectionEnd,r),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===zt?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,i){let r;if(t.altKey)r=this["findWordBoundary".concat(i)](this[e]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[e]+=i==="Left"?-1:1,!0;r=this["findLineBoundary".concat(i)](this[e])}return r!==void 0&&this[e]!==r&&(this[e]=r,!0)}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=zt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===ne&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=zt,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const i="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===zt&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=ne,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=ne,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}const z0=o=>!!o.button;class iO extends eO{constructor(){super(...arguments),M(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new $T(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}doubleClickHandler(t){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}tripleClickHandler(t){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}_mouseDownHandler(t){let{e,alreadySelected:i}=t;this.canvas&&this.editable&&!z0(e)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),i&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=i||this.isEditing)))}mouseUpHandler(t){let{e,transform:i}=t;const r=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const a=this.canvas._activeObject;if(a&&a!==this)return}!this.editable||this.group&&!this.group.interactive||i&&i.actionPerformed||z0(e)||r||this.selected&&!this.getActiveControl()&&(this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),i=this.selectionStart,r=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,r,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getScenePoint(t).transform(Xi(this.calcTransformMatrix())).add(new B(-this._getLeftOffset(),-this._getTopOffset()));let i=0,r=0,a=0;for(let g=0;g<this._textLines.length&&i<=e.y;g++)i+=this.getHeightOfLine(g),a=g,g>0&&(r+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));let c=Math.abs(this._getLineLeftOffset(a));const h=this._textLines[a].length,f=this.__charBounds[a];for(let g=0;g<h;g++){const m=c+f[g].kernedWidth;if(e.x<=m){Math.abs(e.x-m)<=Math.abs(e.x-c)&&r++;break}c=m,r++}return Math.min(this.flipX?h-r:r,this._text.length)}}const Dc="moveCursorUp",Mc="moveCursorDown",Ec="moveCursorLeft",kc="moveCursorRight",Ac="exitEditing",R0=(o,t)=>{const e=t.getRetinaScaling();o.setTransform(e,0,0,e,0,0);const i=t.viewportTransform;o.transform(i[0],i[1],i[2],i[3],i[4],i[5])},nO=E({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Ac,27:Ac,33:Dc,34:Mc,35:kc,36:Ec,37:Ec,38:Dc,39:kc,40:Mc},keysMapRtl:{9:Ac,27:Ac,33:Dc,34:Mc,35:Ec,36:kc,37:kc,38:Dc,39:Ec,40:Mc},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Rn extends iO{static getDefaults(){return E(E({},super.getDefaults()),Rn.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,E(E({},Rn.ownDefaults),e)),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof rg&&this.canvas.textEditingManager.remove(this),e instanceof rg&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,i=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,i)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,i)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const i=super.toCanvasElement(t);return this.isEditing=e,i}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries(),i=this.findAncestorsWithClipPath(),r=i.length>0;let a,c=t;if(r){a=zi(t.canvas),c=a.getContext("2d"),R0(c,this.canvas);const h=this.calcTransformMatrix();c.transform(h[0],h[1],h[2],h[3],h[4],h[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(c,e):this.renderCursor(c,e),r)for(const h of i){const f=h.clipPath,g=zi(t.canvas),m=g.getContext("2d");if(R0(m,this.canvas),!f.absolutePositioned){const y=h.calcTransformMatrix();m.transform(y[0],y[1],y[2],y[3],y[4],y[5])}f.transform(m),f.drawObject(m,!0,{}),this.drawClipPathOnCache(c,f,g)}r&&(t.setTransform(1,0,0,1,0,0),t.drawImage(a,0,0)),this.canvas.contextTopDirty=!0,t.restore()}findAncestorsWithClipPath(){const t=[];let e=this;for(;e;)e.clipPath&&t.push(e),e=e.parent;return t}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const i=this._getLeftOffset(),r=this._getTopOffset(),a=this._getCursorBoundariesOffsets(t,e);return{left:i,top:r,leftOffset:a.left,topOffset:a.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,i=0;const{charIndex:r,lineIndex:a}=this.get2DCursorLocation(t);for(let g=0;g<a;g++)e+=this.getHeightOfLine(g);const c=this._getLineLeftOffset(a),h=this.__charBounds[a][r];h&&(i=h.left),this.charSpacing!==0&&r===this._textLines[a].length&&(i-=this._getWidthOfCharSpacing());const f={top:e,left:c+(i>0?i:0)};return this.direction==="rtl"&&(this.textAlign===ne||this.textAlign===ln||this.textAlign===qa?f.left*=-1:this.textAlign===zt||this.textAlign===bu?f.left=c-(i>0?i:0):this.textAlign!==mt&&this.textAlign!==Ga||(f.left=c-(i>0?i:0))),f}renderCursorAt(t){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(t,!0),t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}getCursorRenderingData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(t);const i=this.get2DCursorLocation(t),r=i.lineIndex,a=i.charIndex>0?i.charIndex-1:0,c=this.getValueOfPropertyAt(r,a,"fontSize"),h=this.getObjectScaling().x*this.canvas.getZoom(),f=this.cursorWidth/h,g=this.getValueOfPropertyAt(r,a,"deltaY"),m=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-c*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(r,a,"fill"),opacity:this._currentCursorOpacity,left:e.left+e.leftOffset-f/2,top:m+e.top+g,width:f,height:c}}_renderCursor(t,e,i){const{color:r,opacity:a,left:c,top:h,width:f,height:g}=this.getCursorRenderingData(i,e);t.fillStyle=r,t.globalAlpha=a,t.fillRect(c,h,f,g)}renderSelection(t,e){const i={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,i,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,i){const r=e.selectionStart,a=e.selectionEnd,c=this.textAlign.includes(ln),h=this.get2DCursorLocation(r),f=this.get2DCursorLocation(a),g=h.lineIndex,m=f.lineIndex,y=h.charIndex<0?0:h.charIndex,v=f.charIndex<0?0:f.charIndex;for(let _=g;_<=m;_++){const S=this._getLineLeftOffset(_)||0;let w=this.getHeightOfLine(_),C=0,k=0,z=0;if(_===g&&(k=this.__charBounds[g][y].left),_>=g&&_<m)z=c&&!this.isEndOfWrapping(_)?this.width:this.getLineWidth(_)||5;else if(_===m)if(v===0)z=this.__charBounds[m][v].left;else{const J=this._getWidthOfCharSpacing();z=this.__charBounds[m][v-1].left+this.__charBounds[m][v-1].width-J}C=w,(this.lineHeight<1||_===m&&this.lineHeight>1)&&(w/=this.lineHeight);let Y=i.left+S+k,U=w,F=0;const I=z-k;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",U=1,F=w):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===ne||this.textAlign===ln||this.textAlign===qa?Y=this.width-Y-I:this.textAlign===zt||this.textAlign===bu?Y=i.left+S-z:this.textAlign!==mt&&this.textAlign!==Ga||(Y=i.left+S-z)),t.fillRect(Y,i.top+i.topOffset+F,I,U),i.topOffset+=C}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,pe)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}M(Rn,"ownDefaults",nO),M(Rn,"type","IText"),et.setClass(Rn),et.setClass(Rn,"i-text");class ir extends Rn{static getDefaults(){return E(E({},super.getDefaults()),ir.ownDefaults)}constructor(t,e){super(t,E(E({},ir.ownDefaults),e))}static createControls(){return{controls:jC()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(ln)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,i=0,r=0;const a={};for(let c=0;c<t.graphemeLines.length;c++)t.graphemeText[r]===`
`&&c>0?(i=0,r++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[r])&&c>0&&(i++,r++),a[c]={line:e,offset:i},r+=t.graphemeLines[c].length,i+=t.graphemeLines[c].length;return a}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[e];i&&(e=i.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,i=0,r=t+1,a=!1;const c=this._styleMap[t],h=this._styleMap[t+1];c&&(t=c.line,i=c.offset),h&&(r=h.line,a=r===t,e=h.offset);const f=t===void 0?this.styles:{line:this.styles[t]};for(const g in f)for(const m in f[g]){const y=parseInt(m,10);if(y>=i&&(!a||y<e))for(const v in f[g][m])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[t];if(!i)return{};t=i.line,e=i.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,i){const r=this._styleMap[t];super._setStyleDeclaration(r.line,r.offset+e,i)}_deleteStyleDeclaration(t,e){const i=this._styleMap[t];super._deleteStyleDeclaration(i.line,i.offset+e)}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];super._setLineStyle(e.line)}_wrapText(t,e){this.isWrapping=!0;const i=this.getGraphemeDataForRender(t),r=[];for(let a=0;a<i.wordsData.length;a++)r.push(...this._wrapLine(a,e,i));return this.isWrapping=!1,r}getGraphemeDataForRender(t){const e=this.splitByGrapheme,i=e?"":" ";let r=0;return{wordsData:t.map((a,c)=>{let h=0;const f=e?this.graphemeSplit(a):this.wordSplit(a);return f.length===0?[{word:[],width:0}]:f.map(g=>{const m=e?[g]:this.graphemeSplit(g),y=this._measureWord(m,c,h);return r=Math.max(y,r),h+=m.length+i.length,{word:m,width:y}})}),largestWordWidth:r}}_measureWord(t,e){let i,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0;for(let c=0,h=t.length;c<h;c++)a+=this._getGraphemeBox(t[c],e,c+r,i,!0).kernedWidth,i=t[c];return a}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,i){let{largestWordWidth:r,wordsData:a}=i,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const h=this._getWidthOfCharSpacing(),f=this.splitByGrapheme,g=[],m=f?"":" ";let y=0,v=[],_=0,S=0,w=!0;e-=c;const C=Math.max(e,r,this.dynamicMinWidth),k=a[t];let z;for(_=0,z=0;z<k.length;z++){const{word:Y,width:U}=k[z];_+=Y.length,y+=S+U-h,y>C&&!w?(g.push(v),v=[],y=U,w=!0):y+=h,w||f||v.push(m),v=v.concat(Y),S=f?0:this._measureWord([m],t,_),_++,w=!1}return z&&g.push(v),r+c>this.dynamicMinWidth&&(this.dynamicMinWidth=r-h+c),g}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),i=this._wrapText(e.lines,this.width),r=new Array(i.length);for(let a=0;a<i.length;a++)r[a]=i[a].join("");return e.lines=r,e.graphemeLines=i,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const i=parseInt(e,10);if(this._textLines[i]){const r=this._styleMap[e].line;t.set("".concat(r),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}M(ir,"type","Textbox"),M(ir,"textLayoutProperties",[...Rn.textLayoutProperties,"width"]),M(ir,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),et.setClass(ir);class j0 extends Nu{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,e){const{target:i}=t,{clipPath:r,group:a}=i;if(!r||!this.shouldPerformLayout(t))return;const{width:c,height:h}=Pn(U_(i,r)),f=new B(c,h);if(r.absolutePositioned)return{center:po(r.getRelativeCenterPoint(),void 0,a?a.calcTransformMatrix():void 0),size:f};{const g=r.getRelativeCenterPoint().transform(i.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:m=new B,correction:y=new B}=this.calcBoundingBox(e,t)||{};return{center:m.add(g),correction:y.subtract(g),size:f}}return{center:i.getRelativeCenterPoint().add(g),size:f}}}}M(j0,"type","clip-path"),et.setClass(j0);class L0 extends Nu{getInitialSize(t,e){let{target:i}=t,{size:r}=e;return new B(i.width||r.x,i.height||r.y)}}M(L0,"type","fixed"),et.setClass(L0);class sO extends tl{subscribeTargets(t){const e=t.target;t.targets.reduce((i,r)=>(r.parent&&i.add(r.parent),i),new Set).forEach(i=>{i.layoutManager.subscribeTargets({target:i,targets:[e]})})}unsubscribeTargets(t){const e=t.target,i=e.getObjects();t.targets.reduce((r,a)=>(a.parent&&r.add(a.parent),r),new Set).forEach(r=>{!i.some(a=>a.parent===r)&&r.layoutManager.unsubscribeTargets({target:r,targets:[e]})})}}class nr extends cr{static getDefaults(){return E(E({},super.getDefaults()),nr.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,nr.ownDefaults),this.setOptions(e);const{left:i,top:r,layoutManager:a}=e;this.groupInit(t,{left:i,top:r,layoutManager:a??new sO})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach(r=>{const a=this._objects.findIndex(h=>h.isInFrontOf(r)),c=a===-1?this.size():a;this.insertAt(c,r)})}canEnterGroup(t){return this.getObjects().some(e=>e.isDescendantOf(t)||t.isDescendantOf(e))?(ws("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,e){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,e)}exitGroup(t,e){this._exitGroup(t,e),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const i=new Set;e.forEach(r=>{const{parent:a}=r;a&&i.add(a)}),t===Bg?i.forEach(r=>{r._onAfterObjectsChange(_u,e)}):i.forEach(r=>{r._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const r=E(E({hasControls:!1},i),{},{forActiveSelection:!0});for(let a=0;a<this._objects.length;a++)this._objects[a]._renderControls(t,r);super._renderControls(t,e),t.restore()}}M(nr,"type","ActiveSelection"),M(nr,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),et.setClass(nr),et.setClass(nr,"activeSelection");class rO{constructor(){M(this,"resources",{})}applyFilters(t,e,i,r,a){const c=a.getContext("2d");if(!c)return;c.drawImage(e,0,0,i,r);const h={sourceWidth:i,sourceHeight:r,imageData:c.getImageData(0,0,i,r),originalEl:e,originalImageData:c.getImageData(0,0,i,r),canvasEl:a,ctx:c,filterBackend:this};t.forEach(g=>{g.applyTo(h)});const{imageData:f}=h;return f.width===i&&f.height===r||(a.width=f.width,a.height=f.height),c.putImageData(f,0,0),h}}class tx{constructor(){let{tileSize:t=Dt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};M(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),M(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e)}createWebGLCanvas(t,e){const i=zi({width:t,height:e}),r=i.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});r&&(r.clearColor(0,0,0,0),this.canvas=i,this.gl=r)}applyFilters(t,e,i,r,a,c){const h=this.gl,f=a.getContext("2d");if(!h||!f)return;let g;c&&(g=this.getCachedTexture(c,e));const m={originalWidth:e.width||e.naturalWidth||0,originalHeight:e.height||e.naturalHeight||0,sourceWidth:i,sourceHeight:r,destinationWidth:i,destinationHeight:r,context:h,sourceTexture:this.createTexture(h,i,r,g?void 0:e),targetTexture:this.createTexture(h,i,r),originalTexture:g||this.createTexture(h,i,r,g?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},y=h.createFramebuffer();return h.bindFramebuffer(h.FRAMEBUFFER,y),t.forEach(v=>{v&&v.applyTo(m)}),function(v){const _=v.targetCanvas,S=_.width,w=_.height,C=v.destinationWidth,k=v.destinationHeight;S===C&&w===k||(_.width=C,_.height=k)}(m),this.copyGLTo2D(h,m),h.bindTexture(h.TEXTURE_2D,null),h.deleteTexture(m.sourceTexture),h.deleteTexture(m.targetTexture),h.deleteFramebuffer(y),f.setTransform(1,0,0,1,0,0),m}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,i,r,a){const{NEAREST:c,TEXTURE_2D:h,RGBA:f,UNSIGNED_BYTE:g,CLAMP_TO_EDGE:m,TEXTURE_MAG_FILTER:y,TEXTURE_MIN_FILTER:v,TEXTURE_WRAP_S:_,TEXTURE_WRAP_T:S}=t,w=t.createTexture();return t.bindTexture(h,w),t.texParameteri(h,y,a||c),t.texParameteri(h,v,a||c),t.texParameteri(h,_,m),t.texParameteri(h,S,m),r?t.texImage2D(h,0,f,f,g,r):t.texImage2D(h,0,f,e,i,0,f,g,null),w}getCachedTexture(t,e,i){const{textureCache:r}=this;if(r[t])return r[t];{const a=this.createTexture(this.gl,e.width,e.height,e,i);return a&&(r[t]=a),a}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const i=t.canvas,r=e.targetCanvas,a=r.getContext("2d");if(!a)return;a.translate(0,r.height),a.scale(1,-1);const c=i.height-r.height;a.drawImage(i,0,c,r.width,r.height,0,0,r.width,r.height)}copyGLTo2DPutImageData(t,e){const i=e.targetCanvas.getContext("2d"),r=e.destinationWidth,a=e.destinationHeight,c=r*a*4;if(!i)return;const h=new Uint8Array(this.imageBuffer,0,c),f=new Uint8ClampedArray(this.imageBuffer,0,c);t.readPixels(0,0,r,a,t.RGBA,t.UNSIGNED_BYTE,h);const g=new ImageData(f,r,a);i.putImageData(g,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const i=t.getExtension("WEBGL_debug_renderer_info");if(i){const r=t.getParameter(i.UNMASKED_RENDERER_WEBGL),a=t.getParameter(i.UNMASKED_VENDOR_WEBGL);r&&(e.renderer=r.toLowerCase()),a&&(e.vendor=a.toLowerCase())}return this.gpuInfo=e,e}}let Od;function oO(){const{WebGLProbe:o}=fn();return o.queryWebGL(Yn()),Dt.enableGLFiltering&&o.isSupported(Dt.textureSize)?new tx({tileSize:Dt.textureSize}):new rO}function Dd(){return!Od&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Od=oO()),Od}const aO=["filters","resizeFilter","src","crossOrigin","type"],ex=["cropX","cropY"];class Di extends je{static getDefaults(){return E(E({},super.getDefaults()),Di.ownDefaults)}constructor(t,e){super(),M(this,"_lastScaleX",1),M(this,"_lastScaleY",1),M(this,"_filterScalingX",1),M(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Di.ownDefaults),this.setOptions(e),this.cacheKey="texture".concat(Cs()),this.setElement(typeof t=="string"?(this.canvas&&Ni(this.canvas.getElement())||ko()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){var e;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(i),(e=t.classList)===null||e===void 0||e.add(Di.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=Dd(!1);e instanceof tx&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(t=>{const e=this[t];e&&fn().dispose(e),this[t]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach(i=>{i&&e.push(i.toObject())}),E(E({},super.toObject([...ex,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,i=-this.width/2,r=-this.height/2;let a=[],c=[],h="",f="";if(!e)return[];if(this.hasCrop()){const g=Cs();a.push('<clipPath id="imageCrop_'+g+`">
`,'	<rect x="'+i+'" y="'+r+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),h=' clip-path="url(#imageCrop_'+g+')" '}if(this.imageSmoothing||(f=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(i-this.cropX,'" y="').concat(r-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(f).concat(h,`></image>
`)),this.stroke||this.strokeDashArray){const g=this.fill;this.fill=null,c=['	<rect x="'.concat(i,'" y="').concat(r,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=g}return a=this.paintFirst!==pe?a.concat(c,t):a.concat(t,c),a}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return au(t,{crossOrigin:e,signal:i}).then(r=>{e!==void 0&&this.set({crossOrigin:e}),this.setElement(r)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),r=i.x,a=i.y,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||r>e&&a>e)return this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=a);const h=zi(c),{width:f,height:g}=c;this._element=h,this._lastScaleX=t.scaleX=r,this._lastScaleY=t.scaleY=a,Dd().applyFilters([t],c,f,g,this._element),this._filterScalingX=h.width/this._originalElement.width,this._filterScalingY=h.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter(a=>a&&!a.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,i=e.naturalWidth||e.width,r=e.naturalHeight||e.height;if(this._element===this._originalElement){const a=zi({width:i,height:r});this._element=a,this._filteredEl=a}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,r),this._lastScaleX=1,this._lastScaleY=1);Dd().applyFilters(t,this._originalElement,i,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const i=this._filterScalingX,r=this._filterScalingY,a=this.width,c=this.height,h=Math.max(this.cropX,0),f=Math.max(this.cropY,0),g=e.naturalWidth||e.width,m=e.naturalHeight||e.height,y=h*i,v=f*r,_=Math.min(a*i,g-y),S=Math.min(c*r,m-v),w=-a/2,C=-c/2,k=Math.min(a,g/i-h),z=Math.min(c,m/r-f);e&&t.drawImage(e,y,v,_,S,w,C,k,z)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=this.getOriginalSize();this.width=t||i.width,this.height=e||i.height}parsePreserveAspectRatioAttribute(){const t=J1(this.preserveAspectRatio||""),e=this.width,i=this.height,r={width:e,height:i};let a,c=this._element.width,h=this._element.height,f=1,g=1,m=0,y=0,v=0,_=0;return!t||t.alignX===$e&&t.alignY===$e?(f=e/c,g=i/h):(t.meetOrSlice==="meet"&&(f=g=gT(this._element,r),a=(e-c*f)/2,t.alignX==="Min"&&(m=-a),t.alignX==="Max"&&(m=a),a=(i-h*g)/2,t.alignY==="Min"&&(y=-a),t.alignY==="Max"&&(y=a)),t.meetOrSlice==="slice"&&(f=g=pT(this._element,r),a=c-e/f,t.alignX==="Mid"&&(v=a/2),t.alignX==="Max"&&(v=a),a=h-i/g,t.alignY==="Mid"&&(_=a/2),t.alignY==="Max"&&(_=a),c=e/f,h=i/g)),{width:c,height:h,scaleX:f,scaleY:g,offsetLeft:m,offsetTop:y,cropX:v,cropY:_}}static fromObject(t,e){let{filters:i,resizeFilter:r,src:a,crossOrigin:c,type:h}=t,f=It(t,aO);return Promise.all([au(a,E(E({},e),{},{crossOrigin:c})),i&&Za(i,e),r&&Za([r],e),Fu(f,e)]).then(g=>{let[m,y=[],[v]=[],_={}]=g;return new this(m,E(E({},f),{},{src:a,filters:y,resizeFilter:v},_))})}static fromURL(t){let{crossOrigin:e=null,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return au(t,{crossOrigin:e,signal:i}).then(a=>new this(a,r))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const r=Xn(t,this.ATTRIBUTE_NAMES,i);return this.fromURL(r["xlink:href"]||r.href,e,r).catch(a=>(ws("log","Unable to parse Image",a),null))}}M(Di,"type","Image"),M(Di,"cacheProperties",[...Nn,...ex]),M(Di,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),M(Di,"CSS_CANVAS","canvas-img"),M(Di,"ATTRIBUTE_NAMES",[...Ms,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),et.setClass(Di),et.setSVGClass(Di);Yu(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const qu=o=>o.webgl!==void 0,Ug="precision highp float",lO=`
    `.concat(Ug,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),cO=["type"],uO=["type"],hO=new RegExp(Ug,"g");class me{get type(){return this.constructor.type}constructor(){let t=It(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},cO);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return lO}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:r="highp"}}=fn();r!=="highp"&&(e=e.replace(hO,Ug.replace("highp",r)));const a=t.createShader(t.VERTEX_SHADER),c=t.createShader(t.FRAGMENT_SHADER),h=t.createProgram();if(!a||!c||!h)throw new cn("Vertex, fragment shader or program creation error");if(t.shaderSource(a,i),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS))throw new cn("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(a)));if(t.shaderSource(c,e),t.compileShader(c),!t.getShaderParameter(c,t.COMPILE_STATUS))throw new cn("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(c)));if(t.attachShader(h,a),t.attachShader(h,c),t.linkProgram(h),!t.getProgramParameter(h,t.LINK_STATUS))throw new cn('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(h)));const f=this.getUniformLocations(t,h)||{};return f.uStepW=t.getUniformLocation(h,"uStepW"),f.uStepH=t.getUniformLocation(h,"uStepH"),{program:h,attributeLocations:this.getAttributeLocations(t,h),uniformLocations:f}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){const i=this.constructor.uniformLocations,r={};for(let a=0;a<i.length;a++)r[i[a]]=t.getUniformLocation(e,i[a]);return r}sendAttributeData(t,e,i){const r=e.aPosition,a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const i=t.destinationWidth,r=t.destinationHeight;t.sourceWidth===i&&t.sourceHeight===r||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,i,r)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){return!1}applyTo(t){qu(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,i=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const{sourceWidth:e,sourceHeight:i}=t,r=zi({width:e,height:i});t.helpLayer=r}}toObject(){const t=Object.keys(this.constructor.defaults||{});return E({type:this.type},t.reduce((e,i)=>(e[i]=this[i],e),{}))}toJSON(){return this.toObject()}static async fromObject(t,e){return new this(It(t,uO))}}M(me,"type","BaseFilter"),M(me,"uniformLocations",[]);const fO={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class zc extends me{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(fO[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const i=new Lt(this.color).getSource(),r=this.alpha,a=i[0]*r,c=i[1]*r,h=i[2]*r,f=1-r;for(let g=0;g<e.length;g+=4){const m=e[g],y=e[g+1],v=e[g+2];let _,S,w;switch(this.mode){case"multiply":_=m*a/255,S=y*c/255,w=v*h/255;break;case"screen":_=255-(255-m)*(255-a)/255,S=255-(255-y)*(255-c)/255,w=255-(255-v)*(255-h)/255;break;case"add":_=m+a,S=y+c,w=v+h;break;case"difference":_=Math.abs(m-a),S=Math.abs(y-c),w=Math.abs(v-h);break;case"subtract":_=m-a,S=y-c,w=v-h;break;case"darken":_=Math.min(m,a),S=Math.min(y,c),w=Math.min(v,h);break;case"lighten":_=Math.max(m,a),S=Math.max(y,c),w=Math.max(v,h);break;case"overlay":_=a<128?2*m*a/255:255-2*(255-m)*(255-a)/255,S=c<128?2*y*c/255:255-2*(255-y)*(255-c)/255,w=h<128?2*v*h/255:255-2*(255-v)*(255-h)/255;break;case"exclusion":_=a+m-2*a*m/255,S=c+y-2*c*y/255,w=h+v-2*h*v/255;break;case"tint":_=a+m*f,S=c+y*f,w=h+v*f}e[g]=_,e[g+1]=S,e[g+2]=w}}sendUniformData(t,e){const i=new Lt(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)}}M(zc,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),M(zc,"type","BlendColor"),M(zc,"uniformLocations",["uColor"]),et.setClass(zc);const dO={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},gO=["type","image"];class Rc extends me{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return dO[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:i}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]}applyTo2d(t){let{imageData:{data:e,width:i,height:r},filterBackend:{resources:a}}=t;const c=this.image;a.blendImage||(a.blendImage=Yn());const h=a.blendImage,f=h.getContext("2d");h.width!==i||h.height!==r?(h.width=i,h.height=r):f.clearRect(0,0,i,r),f.setTransform(c.scaleX,0,0,c.scaleY,c.left,c.top),f.drawImage(c.getElement(),0,0,i,r);const g=f.getImageData(0,0,i,r).data;for(let m=0;m<e.length;m+=4){const y=e[m],v=e[m+1],_=e[m+2],S=e[m+3],w=g[m],C=g[m+1],k=g[m+2],z=g[m+3];switch(this.mode){case"multiply":e[m]=y*w/255,e[m+1]=v*C/255,e[m+2]=_*k/255,e[m+3]=S*z/255;break;case"mask":e[m+3]=z}}}sendUniformData(t,e){const i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)}toObject(){return E(E({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,e){let{type:i,image:r}=t,a=It(t,gO);return Di.fromObject(r,e).then(c=>new this(E(E({},a),{},{image:c})))}}M(Rc,"type","BlendImage"),M(Rc,"defaults",{mode:"multiply",alpha:1}),M(Rc,"uniformLocations",["uTransformMatrix","uImage"]),et.setClass(Rc);class jc extends me{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(t){qu(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){let{imageData:{data:e,width:i,height:r}}=t;this.aspectRatio=i/r,this.horizontal=!0;let a=this.getBlurValue()*i;const c=new Uint8ClampedArray(e),h=15,f=4*i;for(let g=0;g<e.length;g+=4){let m=0,y=0,v=0,_=0,S=0;const w=g-g%f,C=w+f;for(let k=-14;k<h;k++){const z=k/h,Y=4*Math.floor(a*z),U=1-Math.abs(z);let F=g+Y;F<w?F=w:F>C&&(F=C);const I=e[F+3]*U;m+=e[F]*I,y+=e[F+1]*I,v+=e[F+2]*I,_+=I,S+=U}c[g]=m/_,c[g+1]=y/_,c[g+2]=v/_,c[g+3]=_/S}this.horizontal=!1,a=this.getBlurValue()*r;for(let g=0;g<c.length;g+=4){let m=0,y=0,v=0,_=0,S=0;const w=g%f,C=c.length-f+w;for(let k=-14;k<h;k++){const z=k/h,Y=Math.floor(a*z)*f,U=1-Math.abs(z);let F=g+Y;F<w?F=w:F>C&&(F=C);const I=c[F+3]*U;m+=c[F]*I,y+=c[F+1]*I,v+=c[F+2]*I,_+=I,S+=U}e[g]=m/_,e[g+1]=y/_,e[g+2]=v/_,e[g+3]=_/S}}sendUniformData(t,e){const i=this.chooseRightDelta();t.uniform2fv(e.uDelta,i)}isNeutralState(){return this.blur===0}getBlurValue(){let t=1;const{horizontal:e,aspectRatio:i}=this;return e?i>1&&(t=1/i):i<1&&(t=i),t*this.blur*.12}chooseRightDelta(){const t=this.getBlurValue();return this.horizontal?[t,0]:[0,t]}}M(jc,"type","Blur"),M(jc,"defaults",{blur:0}),M(jc,"uniformLocations",["uDelta"]),et.setClass(jc);class Lc extends me{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=Math.round(255*this.brightness);for(let r=0;r<e.length;r+=4)e[r]+=i,e[r+1]+=i,e[r+2]+=i}isNeutralState(){return this.brightness===0}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}M(Lc,"type","Brightness"),M(Lc,"defaults",{brightness:0}),M(Lc,"uniformLocations",["uBrightness"]),et.setClass(Lc);const ix={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class co extends me{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const e=t.imageData.data,i=this.matrix,r=this.colorsOnly;for(let a=0;a<e.length;a+=4){const c=e[a],h=e[a+1],f=e[a+2];if(e[a]=c*i[0]+h*i[1]+f*i[2]+255*i[4],e[a+1]=c*i[5]+h*i[6]+f*i[7]+255*i[9],e[a+2]=c*i[10]+h*i[11]+f*i[12]+255*i[14],!r){const g=e[a+3];e[a]+=g*i[3],e[a+1]+=g*i[8],e[a+2]+=g*i[13],e[a+3]=c*i[15]+h*i[16]+f*i[17]+g*i[18]+255*i[19]}}}sendUniformData(t,e){const i=this.matrix,r=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],a=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,r),t.uniform4fv(e.uConstants,a)}toObject(){return E(E({},super.toObject()),{},{matrix:[...this.matrix]})}}function pr(o,t){var e;const i=(M(e=class extends co{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",o),M(e,"defaults",{colorsOnly:!1,matrix:t}),e);return et.setClass(i,o),i}M(co,"type","ColorMatrix"),M(co,"defaults",ix),M(co,"uniformLocations",["uColorMatrix","uConstants"]),et.setClass(co);pr("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);pr("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);pr("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);pr("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);pr("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);pr("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);pr("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class P0 extends me{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){qu(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach(e=>{e.applyTo(t)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(t=>t.toObject())}}isNeutralState(){return!this.subFilters.some(t=>!t.isNeutralState())}static fromObject(t,e){return Promise.all((t.subFilters||[]).map(i=>et.getClass(i.type).fromObject(i,e))).then(i=>new this({subFilters:i}))}}M(P0,"type","Composed"),et.setClass(P0);class Pc extends me{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:e}}=t;const i=Math.floor(255*this.contrast),r=259*(i+255)/(255*(259-i));for(let a=0;a<e.length;a+=4)e[a]=r*(e[a]-128)+128,e[a+1]=r*(e[a+1]-128)+128,e[a+2]=r*(e[a+2]-128)+128}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}M(Pc,"type","Contrast"),M(Pc,"defaults",{contrast:0}),M(Pc,"uniformLocations",["uContrast"]),et.setClass(Pc);const pO={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Bc extends me{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return pO[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,i=e.data,r=this.matrix,a=Math.round(Math.sqrt(r.length)),c=Math.floor(a/2),h=e.width,f=e.height,g=t.ctx.createImageData(h,f),m=g.data,y=this.opaque?1:0;let v,_,S,w,C,k,z,Y,U,F,I,J,Z;for(I=0;I<f;I++)for(F=0;F<h;F++){for(C=4*(I*h+F),v=0,_=0,S=0,w=0,Z=0;Z<a;Z++)for(J=0;J<a;J++)z=I+Z-c,k=F+J-c,z<0||z>=f||k<0||k>=h||(Y=4*(z*h+k),U=r[Z*a+J],v+=i[Y]*U,_+=i[Y+1]*U,S+=i[Y+2]*U,y||(w+=i[Y+3]*U));m[C]=v,m[C+1]=_,m[C+2]=S,m[C+3]=y?i[C+3]:w}t.imageData=g}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return E(E({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}M(Bc,"type","Convolute"),M(Bc,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),M(Bc,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),et.setClass(Bc);const nx="Gamma";class Uc extends me{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:e}}=t;const i=this.gamma,r=1/i[0],a=1/i[1],c=1/i[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const h=this.rgbValues;for(let f=0;f<256;f++)h.r[f]=255*Math.pow(f/255,r),h.g[f]=255*Math.pow(f/255,a),h.b[f]=255*Math.pow(f/255,c);for(let f=0;f<e.length;f+=4)e[f]=h.r[e[f]],e[f+1]=h.g[e[f+1]],e[f+2]=h.b[e[f+2]]}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:nx,gamma:this.gamma.concat()}}}M(Uc,"type",nx),M(Uc,"defaults",{gamma:[1,1,1]}),M(Uc,"uniformLocations",["uGamma"]),et.setClass(Uc);const mO={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Fc extends me{applyTo2d(t){let{imageData:{data:e}}=t;for(let i,r=0;r<e.length;r+=4){const a=e[r],c=e[r+1],h=e[r+2];switch(this.mode){case"average":i=(a+c+h)/3;break;case"lightness":i=(Math.min(a,c,h)+Math.max(a,c,h))/2;break;case"luminosity":i=.21*a+.72*c+.07*h}e[r+2]=e[r+1]=e[r]=i}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return mO[this.mode]}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}M(Fc,"type","Grayscale"),M(Fc,"defaults",{mode:"average"}),M(Fc,"uniformLocations",["uMode"]),et.setClass(Fc);const yO=E(E({},ix),{},{rotation:0});class Md extends co{calculateMatrix(){const t=this.rotation*Math.PI,e=Fn(t),i=Hn(t),r=1/3,a=Math.sqrt(r)*i,c=1-e;this.matrix=[e+c/3,r*c-a,r*c+a,0,0,r*c+a,e+r*c,r*c-a,0,0,r*c-a,r*c+a,e+r*c,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}M(Md,"type","HueRotation"),M(Md,"defaults",yO),et.setClass(Md);class Hc extends me{applyTo2d(t){let{imageData:{data:e}}=t;for(let i=0;i<e.length;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2],this.alpha&&(e[i+3]=255-e[i+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}M(Hc,"type","Invert"),M(Hc,"defaults",{alpha:!1,invert:!0}),M(Hc,"uniformLocations",["uInvert","uAlpha"]),et.setClass(Hc);class Yc extends me{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=this.noise;for(let r=0;r<e.length;r+=4){const a=(.5-Math.random())*i;e[r]+=a,e[r+1]+=a,e[r+2]+=a}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}isNeutralState(){return this.noise===0}}M(Yc,"type","Noise"),M(Yc,"defaults",{noise:0}),M(Yc,"uniformLocations",["uNoise","uSeed"]),et.setClass(Yc);class Vc extends me{applyTo2d(t){let{imageData:{data:e,width:i,height:r}}=t;for(let a=0;a<r;a+=this.blocksize)for(let c=0;c<i;c+=this.blocksize){const h=4*a*i+4*c,f=e[h],g=e[h+1],m=e[h+2],y=e[h+3];for(let v=a;v<Math.min(a+this.blocksize,r);v++)for(let _=c;_<Math.min(c+this.blocksize,i);_++){const S=4*v*i+4*_;e[S]=f,e[S+1]=g,e[S+2]=m,e[S+3]=y}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}M(Vc,"type","Pixelate"),M(Vc,"defaults",{blocksize:4}),M(Vc,"uniformLocations",["uBlocksize"]),et.setClass(Vc);class Nc extends me{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=255*this.distance,r=new Lt(this.color).getSource(),a=[r[0]-i,r[1]-i,r[2]-i],c=[r[0]+i,r[1]+i,r[2]+i];for(let h=0;h<e.length;h+=4){const f=e[h],g=e[h+1],m=e[h+2];f>a[0]&&g>a[1]&&m>a[2]&&f<c[0]&&g<c[1]&&m<c[2]&&(e[h+3]=0)}}sendUniformData(t,e){const i=new Lt(this.color).getSource(),r=this.distance,a=[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1],c=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(e.uLow,a),t.uniform4fv(e.uHigh,c)}}M(Nc,"type","RemoveColor"),M(Nc,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),M(Nc,"uniformLocations",["uLow","uHigh"]),et.setClass(Nc);class Xc extends me{sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),r=new Array(i);for(let a=1;a<=i;a++)r[a-1]=t(a*e);return r}generateShader(t){const e=new Array(t);for(let i=1;i<=t;i++)e[i-1]="".concat(i,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map((i,r)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(i,") * uTaps[").concat(r,"] + texture2D(uTexture, vTexCoord - ").concat(i,") * uTaps[").concat(r,`];
              sum += 2.0 * uTaps[`).concat(r,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){qu(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;const i=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(i)/i}}applyTo2d(t){const e=t.imageData,i=this.scaleX,r=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/r;const a=e.width,c=e.height,h=Math.round(a*i),f=Math.round(c*r);let g;g=this.resizeType==="sliceHack"?this.sliceByTwo(t,a,c,h,f):this.resizeType==="hermite"?this.hermiteFastResize(t,a,c,h,f):this.resizeType==="bilinear"?this.bilinearFiltering(t,a,c,h,f):this.resizeType==="lanczos"?this.lanczosResize(t,a,c,h,f):new ImageData(h,f),t.imageData=g}sliceByTwo(t,e,i,r,a){const c=t.imageData,h=.5;let f=!1,g=!1,m=e*h,y=i*h;const v=t.filterBackend.resources;let _=0,S=0;const w=e;let C=0;v.sliceByTwo||(v.sliceByTwo=Yn());const k=v.sliceByTwo;(k.width<1.5*e||k.height<i)&&(k.width=1.5*e,k.height=i);const z=k.getContext("2d");for(z.clearRect(0,0,1.5*e,i),z.putImageData(c,0,0),r=Math.floor(r),a=Math.floor(a);!f||!g;)e=m,i=y,r<Math.floor(m*h)?m=Math.floor(m*h):(m=r,f=!0),a<Math.floor(y*h)?y=Math.floor(y*h):(y=a,g=!0),z.drawImage(k,_,S,e,i,w,C,m,y),_=w,S=C,C+=y;return z.getImageData(_,S,r,a)}lanczosResize(t,e,i,r,a){const c=t.imageData.data,h=t.ctx.createImageData(r,a),f=h.data,g=this.lanczosCreate(this.lanczosLobes),m=this.rcpScaleX,y=this.rcpScaleY,v=2/this.rcpScaleX,_=2/this.rcpScaleY,S=Math.ceil(m*this.lanczosLobes/2),w=Math.ceil(y*this.lanczosLobes/2),C={},k={x:0,y:0},z={x:0,y:0};return function Y(U){let F,I,J,Z,ct,wt,Mt,ht,bt,dt,Tt;for(k.x=(U+.5)*m,z.x=Math.floor(k.x),F=0;F<a;F++){for(k.y=(F+.5)*y,z.y=Math.floor(k.y),ct=0,wt=0,Mt=0,ht=0,bt=0,I=z.x-S;I<=z.x+S;I++)if(!(I<0||I>=e)){dt=Math.floor(1e3*Math.abs(I-k.x)),C[dt]||(C[dt]={});for(let H=z.y-w;H<=z.y+w;H++)H<0||H>=i||(Tt=Math.floor(1e3*Math.abs(H-k.y)),C[dt][Tt]||(C[dt][Tt]=g(Math.sqrt(Math.pow(dt*v,2)+Math.pow(Tt*_,2))/1e3)),J=C[dt][Tt],J>0&&(Z=4*(H*e+I),ct+=J,wt+=J*c[Z],Mt+=J*c[Z+1],ht+=J*c[Z+2],bt+=J*c[Z+3]))}Z=4*(F*r+U),f[Z]=wt/ct,f[Z+1]=Mt/ct,f[Z+2]=ht/ct,f[Z+3]=bt/ct}return++U<r?Y(U):h}(0)}bilinearFiltering(t,e,i,r,a){let c,h,f,g,m,y,v,_,S,w,C,k,z,Y=0;const U=this.rcpScaleX,F=this.rcpScaleY,I=4*(e-1),J=t.imageData.data,Z=t.ctx.createImageData(r,a),ct=Z.data;for(v=0;v<a;v++)for(_=0;_<r;_++)for(m=Math.floor(U*_),y=Math.floor(F*v),S=U*_-m,w=F*v-y,z=4*(y*e+m),C=0;C<4;C++)c=J[z+C],h=J[z+4+C],f=J[z+I+C],g=J[z+I+4+C],k=c*(1-S)*(1-w)+h*S*(1-w)+f*w*(1-S)+g*S*w,ct[Y++]=k;return Z}hermiteFastResize(t,e,i,r,a){const c=this.rcpScaleX,h=this.rcpScaleY,f=Math.ceil(c/2),g=Math.ceil(h/2),m=t.imageData.data,y=t.ctx.createImageData(r,a),v=y.data;for(let _=0;_<a;_++)for(let S=0;S<r;S++){const w=4*(S+_*r);let C=0,k=0,z=0,Y=0,U=0,F=0,I=0;const J=(_+.5)*h;for(let Z=Math.floor(_*h);Z<(_+1)*h;Z++){const ct=Math.abs(J-(Z+.5))/g,wt=(S+.5)*c,Mt=ct*ct;for(let ht=Math.floor(S*c);ht<(S+1)*c;ht++){let bt=Math.abs(wt-(ht+.5))/f;const dt=Math.sqrt(Mt+bt*bt);dt>1&&dt<-1||(C=2*dt*dt*dt-3*dt*dt+1,C>0&&(bt=4*(ht+Z*e),I+=C*m[bt+3],z+=C,m[bt+3]<255&&(C=C*m[bt+3]/250),Y+=C*m[bt],U+=C*m[bt+1],F+=C*m[bt+2],k+=C))}}v[w]=Y/k,v[w+1]=U/k,v[w+2]=F/k,v[w+3]=I/z}return y}}M(Xc,"type","Resize"),M(Xc,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),M(Xc,"uniformLocations",["uDelta","uTaps"]),et.setClass(Xc);class qc extends me{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=-this.saturation;for(let r=0;r<e.length;r+=4){const a=e[r],c=e[r+1],h=e[r+2],f=Math.max(a,c,h);e[r]+=f!==a?(f-a)*i:0,e[r+1]+=f!==c?(f-c)*i:0,e[r+2]+=f!==h?(f-h)*i:0}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}M(qc,"type","Saturation"),M(qc,"defaults",{saturation:0}),M(qc,"uniformLocations",["uSaturation"]),et.setClass(qc);class Gc extends me{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=-this.vibrance;for(let r=0;r<e.length;r+=4){const a=e[r],c=e[r+1],h=e[r+2],f=Math.max(a,c,h),g=(a+c+h)/3,m=2*Math.abs(f-g)/255*i;e[r]+=f!==a?(f-a)*m:0,e[r+1]+=f!==c?(f-c)*m:0,e[r+2]+=f!==h?(f-h)*m:0}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}M(Gc,"type","Vibrance"),M(Gc,"defaults",{vibrance:0}),M(Gc,"uniformLocations",["uVibrance"]),et.setClass(Gc);const vO=({onObjectClicked:o},t)=>{const e=Mi.useRef(null),i=Mi.useRef(null);Mi.useEffect(()=>{const c=new rg(e.current,{width:800,height:500,backgroundColor:"transparent"});i.current=c;const h=f=>{if(f.selected&&f.selected.length>0){const g=f.selected[0];o({type:g.type,left:Math.round(g.left),top:Math.round(g.top)})}};return c.on("selection:created",h),c.on("selection:updated",h),()=>{c.off("selection:created",h),c.off("selection:updated",h),c.dispose()}},[o]);const r=c=>{const h=i.current;if(!h)return;let f;const g=()=>Math.floor(Math.random()*400)+50,m={selectable:!0,hasControls:!0};switch(c){case"rectangle":f=new Vi({...m,left:g(),top:g(),fill:"#ff5733",width:100,height:60}),h.add(f);break;case"circle":f=new on({...m,left:g(),top:g(),fill:"#33c1ff",radius:40}),h.add(f);break;case"triangle":f=new xs({...m,left:g(),top:g(),fill:"#b833ff",width:80,height:80}),h.add(f);break;case"ellipse":f=new an({...m,left:g(),top:g(),fill:"#33ff57",rx:50,ry:30}),h.add(f);break;case"star":f=new Na([{x:0,y:-50},{x:14,y:-20},{x:47,y:-15},{x:23,y:7},{x:29,y:40},{x:0,y:25},{x:-29,y:40},{x:-23,y:7},{x:-47,y:-15},{x:-14,y:-20}],{...m,left:g(),top:g(),fill:"#ffd700"}),h.add(f);break;default:return}},a=()=>{const c=i.current,h=c.getActiveObject();h&&(c.remove(h),c.discardActiveObject(),c.renderAll())};return Ln.useImperativeHandle(t,()=>({addShape:r,deleteSelected:a})),At.jsx("canvas",{ref:e})},bO=Ln.forwardRef(vO),sr="generated",_O="pointerdown",xO="pointerup",ag="pointerleave",SO="pointerout",fr="pointermove",wO="touchstart",B0="touchend",CO="touchmove",TO="touchcancel",OO="resize",DO="visibilitychange",Ri="tsParticles - Error",De=100,Xt=.5,Zt=1e3,xe={x:0,y:0,z:0},Ic={a:1,b:0,c:0,d:1},Co="random",cu="mid",Me=2,MO=Math.PI*Me,Ed=60,sx="true",U0="false",kd="canvas",F0=0,An=2,H0=4,EO=1,Y0=1,V0=1,kO=4,rx=1,uu=255,rr=360,lg=100,cg=100,N0=0,ug=0,AO=60,zO=0,wu=.25,X0=Xt+wu,q0=0,RO=1,jO=0,LO=0,PO=1,Fg=1,BO=1,G0=1,Cu=0,ox=1,UO=0,FO=120,HO=0,YO=0,VO=1e4,NO=0,XO=1,Tu=0,ax=1,qO=1,GO=0,I0=1,IO=0,WO=0,W0=-wu,Q0=1.5,Z0=0,QO=1,ZO=0,hg=0,KO=0,lx=1,JO=1,Ou=1,$O=500,K0=50,t2=0,fg=1,cx=0,J0=1,e2=0,Is=255,Ad=3,zd=6,i2=1,n2=1,s2=0,r2=0,o2=0,a2=0;var Te;(function(o){o.bottom="bottom",o.bottomLeft="bottom-left",o.bottomRight="bottom-right",o.left="left",o.none="none",o.right="right",o.top="top",o.topLeft="top-left",o.topRight="top-right",o.outside="outside",o.inside="inside"})(Te||(Te={}));function ux(o){return typeof o=="boolean"}function Ts(o){return typeof o=="string"}function di(o){return typeof o=="number"}function uo(o){return typeof o=="object"&&o!==null}function Le(o){return Array.isArray(o)}function G(o){return o==null}class fi{constructor(t,e,i){if(this._updateFromAngle=(r,a)=>{this.x=Math.cos(r)*a,this.y=Math.sin(r)*a},!di(t)&&t){this.x=t.x,this.y=t.y;const r=t;this.z=r.z?r.z:xe.z}else if(t!==void 0&&e!==void 0)this.x=t,this.y=e,this.z=i??xe.z;else throw new Error(`${Ri} Vector3d not initialized correctly`)}static get origin(){return fi.create(xe.x,xe.y,xe.z)}get angle(){return Math.atan2(this.y,this.x)}set angle(t){this._updateFromAngle(t,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(t){this._updateFromAngle(this.angle,t)}static clone(t){return fi.create(t.x,t.y,t.z)}static create(t,e,i){return new fi(t,e,i)}add(t){return fi.create(this.x+t.x,this.y+t.y,this.z+t.z)}addTo(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}copy(){return fi.clone(this)}distanceTo(t){return this.sub(t).length}distanceToSq(t){return this.sub(t).getLengthSq()}div(t){return fi.create(this.x/t,this.y/t,this.z/t)}divTo(t){this.x/=t,this.y/=t,this.z/=t}getLengthSq(){return this.x**An+this.y**An}mult(t){return fi.create(this.x*t,this.y*t,this.z*t)}multTo(t){this.x*=t,this.y*=t,this.z*=t}normalize(){const t=this.length;t!=Tu&&this.multTo(rx/t)}rotate(t){return fi.create(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t),xe.z)}setTo(t){this.x=t.x,this.y=t.y;const e=t;this.z=e.z?e.z:xe.z}sub(t){return fi.create(this.x-t.x,this.y-t.y,this.z-t.z)}subFrom(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}}class Vt extends fi{constructor(t,e){super(t,e,xe.z)}static get origin(){return Vt.create(xe.x,xe.y)}static clone(t){return Vt.create(t.x,t.y)}static create(t,e){return new Vt(t,e)}}let l2=Math.random;const hx={nextFrame:o=>requestAnimationFrame(o),cancel:o=>cancelAnimationFrame(o)};function ft(){return ji(l2(),0,1-Number.EPSILON)}function c2(o){return hx.nextFrame(o)}function u2(o){hx.cancel(o)}function ji(o,t,e){return Math.min(Math.max(o,t),e)}function Rd(o,t,e,i){return Math.floor((o*e+t*i)/(e+i))}function Ee(o){const t=un(o),e=0;let i=Gu(o);return t===i&&(i=e),ft()*(t-i)+i}function Q(o){return di(o)?o:Ee(o)}function Gu(o){return di(o)?o:o.min}function un(o){return di(o)?o:o.max}function rt(o,t){if(o===t||t===void 0&&di(o))return o;const e=Gu(o),i=un(o);return t!==void 0?{min:Math.min(e,t),max:Math.max(i,t)}:rt(e,i)}function Pe(o,t){const e=o.x-t.x,i=o.y-t.y,r=2;return{dx:e,dy:i,distance:Math.sqrt(e**r+i**r)}}function Ne(o,t){return Pe(o,t).distance}function Un(o){return o*Math.PI/180}function h2(o,t,e){if(di(o))return Un(o);switch(o){case Te.top:return-Math.PI*Xt;case Te.topRight:return-Math.PI*wu;case Te.right:return zO;case Te.bottomRight:return Math.PI*wu;case Te.bottom:return Math.PI*Xt;case Te.bottomLeft:return Math.PI*X0;case Te.left:return Math.PI;case Te.topLeft:return-Math.PI*X0;case Te.inside:return Math.atan2(e.y-t.y,e.x-t.x);case Te.outside:return Math.atan2(t.y-e.y,t.x-e.x);default:return ft()*MO}}function f2(o){const t=Vt.origin;return t.length=1,t.angle=o,t}function $0(o,t,e,i){return Vt.create(o.x*(e-i)/(e+i)+t.x*Me*i/(e+i),o.y)}function fx(o){return{x:(o.position?.x??ft()*De)*o.size.width/De,y:(o.position?.y??ft()*De)*o.size.height/De}}function dx(o){const t={x:o.position?.x!==void 0?Q(o.position.x):void 0,y:o.position?.y!==void 0?Q(o.position.y):void 0};return fx({size:o.size,position:t})}function d2(o){return{x:o.position?.x??ft()*o.size.width,y:o.position?.y??ft()*o.size.height}}function gx(o){return o?o.endsWith("%")?parseFloat(o)/De:parseFloat(o):1}var or;(function(o){o.auto="auto",o.increase="increase",o.decrease="decrease",o.random="random"})(or||(or={}));var te;(function(o){o.increasing="increasing",o.decreasing="decreasing"})(te||(te={}));var Os;(function(o){o.none="none",o.max="max",o.min="min"})(Os||(Os={}));var Ct;(function(o){o.bottom="bottom",o.left="left",o.right="right",o.top="top"})(Ct||(Ct={}));var dn;(function(o){o.precise="precise",o.percent="percent"})(dn||(dn={}));var vo;(function(o){o.max="max",o.min="min",o.random="random"})(vo||(vo={}));const g2={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function dr(){return g2}function p2(o){const t=new Map;return(...e)=>{const i=JSON.stringify(e);if(t.has(i))return t.get(i);const r=o(...e);return t.set(i,r),r}}function tb(o){const t={bounced:!1},{pSide:e,pOtherSide:i,rectSide:r,rectOtherSide:a,velocity:c,factor:h}=o;return i.min<a.min||i.min>a.max||i.max<a.min||i.max>a.max||(e.max>=r.min&&e.max<=(r.max+r.min)*Xt&&c>q0||e.min<=r.max&&e.min>(r.max+r.min)*Xt&&c<q0)&&(t.velocity=c*-h,t.bounced=!0),t}function m2(o,t){const e=he(t,i=>o.matches(i));return Le(e)?e.some(i=>i):e}function gr(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function y2(){return!gr()&&typeof matchMedia<"u"}function px(o){if(y2())return matchMedia(o)}function v2(o){if(!(gr()||typeof IntersectionObserver>"u"))return new IntersectionObserver(o)}function b2(o){if(!(gr()||typeof MutationObserver>"u"))return new MutationObserver(o)}function qt(o,t){return o===t||Le(t)&&t.indexOf(o)>-1}async function dg(o,t){try{await document.fonts.load(`${t??"400"} 36px '${o??"Verdana"}'`)}catch{}}function mx(o){return Math.floor(ft()*o.length)}function rl(o,t,e=!0){return o[t!==void 0&&e?t%o.length:mx(o)]}function ol(o,t,e,i,r){return _2(al(o,i??0),t,e,r)}function _2(o,t,e,i){let r=!0;return(!i||i===Ct.bottom)&&(r=o.top<t.height+e.x),r&&(!i||i===Ct.left)&&(r=o.right>e.x),r&&(!i||i===Ct.right)&&(r=o.left<t.width+e.y),r&&(!i||i===Ct.top)&&(r=o.bottom>e.y),r}function al(o,t){return{bottom:o.y+t,left:o.x-t,right:o.x+t,top:o.y-t}}function ue(o,...t){for(const e of t){if(e==null)continue;if(!uo(e)){o=e;continue}const i=Array.isArray(e);i&&(uo(o)||!o||!Array.isArray(o))?o=[]:!i&&(uo(o)||!o||Array.isArray(o))&&(o={});for(const r in e){if(r==="__proto__")continue;const a=e,c=a[r],h=o;h[r]=uo(c)&&Array.isArray(c)?c.map(f=>ue(h[r],f)):ue(h[r],c)}}return o}function Hg(o,t){return!!bx(t,e=>e.enable&&qt(o,e.mode))}function Yg(o,t,e){he(t,i=>{const r=i.mode;i.enable&&qt(o,r)&&x2(i,e)})}function x2(o,t){const e=o.selectors;he(e,i=>{t(i,o)})}function yx(o,t){if(!(!t||!o))return bx(o,e=>m2(t,e.selectors))}function gg(o){return{position:o.getPosition(),radius:o.getRadius(),mass:o.getMass(),velocity:o.velocity,factor:Vt.create(Q(o.options.bounce.horizontal.value),Q(o.options.bounce.vertical.value))}}function vx(o,t){const{x:e,y:i}=o.velocity.sub(t.velocity),[r,a]=[o.position,t.position],{dx:c,dy:h}=Pe(a,r);if(e*c+i*h<0)return;const g=-Math.atan2(h,c),m=o.mass,y=t.mass,v=o.velocity.rotate(g),_=t.velocity.rotate(g),S=$0(v,_,m,y),w=$0(_,v,m,y),C=S.rotate(-g),k=w.rotate(-g);o.velocity.x=C.x*o.factor.x,o.velocity.y=C.y*o.factor.y,t.velocity.x=k.x*t.factor.x,t.velocity.y=k.y*t.factor.y}function S2(o,t){const e=o.getPosition(),i=o.getRadius(),r=al(e,i),a=o.options.bounce,c=tb({pSide:{min:r.left,max:r.right},pOtherSide:{min:r.top,max:r.bottom},rectSide:{min:t.left,max:t.right},rectOtherSide:{min:t.top,max:t.bottom},velocity:o.velocity.x,factor:Q(a.horizontal.value)});c.bounced&&(c.velocity!==void 0&&(o.velocity.x=c.velocity),c.position!==void 0&&(o.position.x=c.position));const h=tb({pSide:{min:r.top,max:r.bottom},pOtherSide:{min:r.left,max:r.right},rectSide:{min:t.top,max:t.bottom},rectOtherSide:{min:t.left,max:t.right},velocity:o.velocity.y,factor:Q(a.vertical.value)});h.bounced&&(h.velocity!==void 0&&(o.velocity.y=h.velocity),h.position!==void 0&&(o.position.y=h.position))}function he(o,t){return Le(o)?o.map((i,r)=>t(i,r)):t(o,0)}function ke(o,t,e){return Le(o)?rl(o,t,e):o}function bx(o,t){return Le(o)?o.find((i,r)=>t(i,r)):t(o,0)?o:void 0}function _x(o,t){const e=o.value,i=o.animation,r={delayTime:Q(i.delay)*Zt,enable:i.enable,value:Q(o.value)*t,max:un(e)*t,min:Gu(e)*t,loops:0,maxLoops:Q(i.count),time:0},a=1;if(i.enable){switch(r.decay=a-Q(i.decay),i.mode){case or.increase:r.status=te.increasing;break;case or.decrease:r.status=te.decreasing;break;case or.random:r.status=ft()>=Xt?te.increasing:te.decreasing;break}const c=i.mode===or.auto;switch(i.startValue){case vo.min:r.value=r.min,c&&(r.status=te.increasing);break;case vo.max:r.value=r.max,c&&(r.status=te.decreasing);break;case vo.random:default:r.value=Ee(r),c&&(r.status=ft()>=Xt?te.increasing:te.decreasing);break}}return r.initialValue=r.value,r}function xx(o,t){if(!(o.mode===dn.percent)){const{mode:r,...a}=o;return a}return"x"in o?{x:o.x/De*t.width,y:o.y/De*t.height}:{width:o.width/De*t.width,height:o.height/De*t.height}}function Sx(o,t){return xx(o,t)}function eb(o,t){return xx(o,t)}function w2(o,t,e,i,r){switch(t){case Os.max:e>=r&&o.destroy();break;case Os.min:e<=i&&o.destroy();break}}function Iu(o,t,e,i,r){if(o.destroyed||!t||!t.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0))return;const m=(t.velocity??0)*r.factor,y=t.min,v=t.max,_=t.decay??1;if(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=r.value),!((t.delayTime??0)>0&&t.time<(t.delayTime??0))){switch(t.status){case te.increasing:t.value>=v?(e?t.status=te.decreasing:t.value-=v,t.loops||(t.loops=0),t.loops++):t.value+=m;break;case te.decreasing:t.value<=y?(e?t.status=te.increasing:t.value+=v,t.loops||(t.loops=0),t.loops++):t.value-=m}t.velocity&&_!==1&&(t.velocity*=_),w2(o,i,t.value,y,v),o.destroyed||(t.value=ji(t.value,y,v))}}function C2(o){const t=document.createElement("div").style;if(!o)return t;for(const e in o){const i=o[e];if(!Object.prototype.hasOwnProperty.call(o,e)||G(i))continue;const r=o.getPropertyValue?.(i);if(!r)continue;const a=o.getPropertyPriority?.(i);a?t.setProperty?.(i,r,a):t.setProperty?.(i,r)}return t}function T2(o){const t=document.createElement("div").style,e=10,i={width:"100%",height:"100%",margin:"0",padding:"0",borderWidth:"0",position:"fixed",zIndex:o.toString(e),"z-index":o.toString(e),top:"0",left:"0"};for(const r in i){const a=i[r];t.setProperty(r,a)}return t}const O2=p2(T2);var ys;(function(o){o.darken="darken",o.enlighten="enlighten"})(ys||(ys={}));function D2(o,t){if(t){for(const e of o.colorManagers.values())if(t.startsWith(e.stringPrefix))return e.parseString(t)}}function ki(o,t,e,i=!0){if(!t)return;const r=Ts(t)?{value:t}:t;if(Ts(r.value))return wx(o,r.value,e,i);if(Le(r.value))return ki(o,{value:rl(r.value,e,i)});for(const a of o.colorManagers.values()){const c=a.handleRangeColor(r);if(c)return c}}function wx(o,t,e,i=!0){if(!t)return;const r=Ts(t)?{value:t}:t;if(Ts(r.value))return r.value===Co?Tx():M2(o,r.value);if(Le(r.value))return wx(o,{value:rl(r.value,e,i)});for(const a of o.colorManagers.values()){const c=a.handleColor(r);if(c)return c}}function Ds(o,t,e,i=!0){const r=ki(o,t,e,i);return r?Cx(r):void 0}function Cx(o){const t=o.r/uu,e=o.g/uu,i=o.b/uu,r=Math.max(t,e,i),a=Math.min(t,e,i),c={h:N0,l:(r+a)*Xt,s:ug};return r!==a&&(c.s=c.l<Xt?(r-a)/(r+a):(r-a)/(Me-r-a),c.h=t===r?(e-i)/(r-a):c.h=e===r?Me+(i-t)/(r-a):Me*Me+(t-e)/(r-a)),c.l*=cg,c.s*=lg,c.h*=AO,c.h<N0&&(c.h+=rr),c.h>=rr&&(c.h-=rr),c}function M2(o,t){return D2(o,t)}function To(o){const t=(o.h%rr+rr)%rr,e=Math.max(ug,Math.min(lg,o.s)),i=Math.max(e2,Math.min(cg,o.l)),r=t/rr,a=e/lg,c=i/cg;if(e===ug){const S=Math.round(c*Is);return{r:S,g:S,b:S}}const h=(S,w,C)=>{if(C<0&&C++,C>1&&C--,C*zd<1)return S+(w-S)*zd*C;if(C*Me<1)return w;if(C*Ad<1*Me){const Y=Me/Ad;return S+(w-S)*(Y-C)*zd}return S},f=c<Xt?c*(i2+a):c+a-c*a,g=Me*c-f,m=n2/Ad,y=Math.min(Is,Is*h(g,f,r+m)),v=Math.min(Is,Is*h(g,f,r)),_=Math.min(Is,Is*h(g,f,r-m));return{r:Math.round(y),g:Math.round(v),b:Math.round(_)}}function E2(o){const t=To(o);return{a:o.a,b:t.b,g:t.g,r:t.r}}function Tx(o){const t=s2,e=uu+fg;return{b:Math.floor(Ee(rt(t,e))),g:Math.floor(Ee(rt(t,e))),r:Math.floor(Ee(rt(t,e)))}}function hn(o,t){return`rgba(${o.r}, ${o.g}, ${o.b}, ${t??Fg})`}function Oo(o,t){return`hsla(${o.h}, ${o.s}%, ${o.l}%, ${t??Fg})`}function Vg(o,t,e,i){let r=o,a=t;return r.r===void 0&&(r=To(o)),a.r===void 0&&(a=To(t)),{b:Rd(r.b,a.b,e,i),g:Rd(r.g,a.g,e,i),r:Rd(r.r,a.r,e,i)}}function pg(o,t,e){if(e===Co)return Tx();if(e===cu){const i=o.getFillColor()??o.getStrokeColor(),r=t?.getFillColor()??t?.getStrokeColor();if(i&&r&&t)return Vg(i,r,o.getRadius(),t.getRadius());{const a=i??r;if(a)return To(a)}}else return e}function Ox(o,t,e,i){const r=Ts(t)?t:t.value;return r===Co?i?ki(o,{value:r}):e?Co:cu:r===cu?cu:ki(o,{value:r})}function ib(o){return o!==void 0?{h:o.h.value,s:o.s.value,l:o.l.value}:void 0}function Dx(o,t,e){const i={h:{enable:!1,value:o.h},s:{enable:!1,value:o.s},l:{enable:!1,value:o.l}};return t&&(jd(i.h,t.h,e),jd(i.s,t.s,e),jd(i.l,t.l,e)),i}function jd(o,t,e){o.enable=t.enable,o.enable?(o.velocity=Q(t.speed)/De*e,o.decay=ax-Q(t.decay),o.status=te.increasing,o.loops=o2,o.maxLoops=Q(t.count),o.time=a2,o.delayTime=Q(t.delay)*Zt,t.sync||(o.velocity*=ft(),o.value*=ft()),o.initialValue=o.value,o.offset=rt(t.offset)):o.velocity=r2}function Ld(o,t,e,i){if(!o||!o.enable||(o.maxLoops??0)>0&&(o.loops??0)>(o.maxLoops??0)||(o.time||(o.time=0),(o.delayTime??0)>0&&o.time<(o.delayTime??0)&&(o.time+=i.value),(o.delayTime??0)>0&&o.time<(o.delayTime??0)))return;const m=o.offset?Ee(o.offset):0,y=(o.velocity??0)*i.factor+m*3.6,v=o.decay??1,_=un(t),S=Gu(t);!e||o.status===te.increasing?(o.value+=y,o.value>_&&(o.loops||(o.loops=0),o.loops++,e?o.status=te.decreasing:o.value-=_)):(o.value-=y,o.value<0&&(o.loops||(o.loops=0),o.loops++,o.status=te.increasing)),o.velocity&&v!==1&&(o.velocity*=v),o.value=ji(o.value,S,_)}function Mx(o,t){if(!o)return;const{h:e,s:i,l:r}=o,a={h:{min:0,max:360},s:{min:0,max:100},l:{min:0,max:100}};e&&Ld(e,a.h,!1,t),i&&Ld(i,a.s,!0,t),r&&Ld(r,a.l,!0,t)}function Wa(o,t,e){o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(e.x,e.y),o.closePath()}function k2(o,t,e){o.fillStyle=e??"rgba(0,0,0,0)",o.fillRect(xe.x,xe.y,t.width,t.height)}function A2(o,t,e,i){e&&(o.globalAlpha=i,o.drawImage(e,xe.x,xe.y,t.width,t.height),o.globalAlpha=1)}function Pd(o,t){o.clearRect(xe.x,xe.y,t.width,t.height)}function z2(o){const{container:t,context:e,particle:i,delta:r,colorStyles:a,backgroundMask:c,composite:h,radius:f,opacity:g,shadow:m,transform:y}=o,v=i.getPosition(),_=i.rotation+(i.pathRotation?i.velocity.angle:t2),S={sin:Math.sin(_),cos:Math.cos(_)},w=!!_,C={a:S.cos*(y.a??Ic.a),b:w?S.sin*(y.b??fg):y.b??Ic.b,c:w?-S.sin*(y.c??fg):y.c??Ic.c,d:S.cos*(y.d??Ic.d)};e.setTransform(C.a,C.b,C.c,C.d,v.x,v.y),c&&(e.globalCompositeOperation=h);const k=i.shadowColor;m.enable&&k&&(e.shadowBlur=m.blur,e.shadowColor=hn(k),e.shadowOffsetX=m.offset.x,e.shadowOffsetY=m.offset.y),a.fill&&(e.fillStyle=a.fill);const z=i.strokeWidth??cx;e.lineWidth=z,a.stroke&&(e.strokeStyle=a.stroke);const Y={container:t,context:e,particle:i,radius:f,opacity:g,delta:r,transformData:C,strokeWidth:z};j2(Y),L2(Y),R2(Y),e.globalCompositeOperation="source-over",e.resetTransform()}function R2(o){const{container:t,context:e,particle:i,radius:r,opacity:a,delta:c,transformData:h}=o;if(!i.effect)return;const f=t.effectDrawers.get(i.effect);f&&f.draw({context:e,particle:i,radius:r,opacity:a,delta:c,pixelRatio:t.retina.pixelRatio,transformData:{...h}})}function j2(o){const{container:t,context:e,particle:i,radius:r,opacity:a,delta:c,strokeWidth:h,transformData:f}=o;if(!i.shape)return;const g=t.shapeDrawers.get(i.shape);g&&(e.beginPath(),g.draw({context:e,particle:i,radius:r,opacity:a,delta:c,pixelRatio:t.retina.pixelRatio,transformData:{...f}}),i.shapeClose&&e.closePath(),h>cx&&e.stroke(),i.shapeFill&&e.fill())}function L2(o){const{container:t,context:e,particle:i,radius:r,opacity:a,delta:c,transformData:h}=o;if(!i.shape)return;const f=t.shapeDrawers.get(i.shape);f?.afterDraw&&f.afterDraw({context:e,particle:i,radius:r,opacity:a,delta:c,pixelRatio:t.retina.pixelRatio,transformData:{...h}})}function P2(o,t,e){t.draw&&t.draw(o,e)}function B2(o,t,e,i){t.drawParticle&&t.drawParticle(o,e,i)}function U2(o,t,e){return{h:o.h,s:o.s,l:o.l+(t===ys.darken?-J0:J0)*e}}function F2(o,t,e){const i=t[e];i!==void 0&&(o[e]=(o[e]??RO)*i)}function nb(o,t,e=!1){if(!t)return;const i=o;if(!i)return;const r=i.style;if(!r)return;const a=new Set;for(const c in r)Object.prototype.hasOwnProperty.call(r,c)&&a.add(r[c]);for(const c in t)Object.prototype.hasOwnProperty.call(t,c)&&a.add(t[c]);for(const c of a){const h=t.getPropertyValue(c);h?r.setProperty(c,h,e?"important":""):r.removeProperty(c)}}class H2{constructor(t,e){this.container=t,this._applyPostDrawUpdaters=a=>{for(const c of this._postDrawUpdaters)c.afterDraw?.(a)},this._applyPreDrawUpdaters=(a,c,h,f,g,m)=>{for(const y of this._preDrawUpdaters){if(y.getColorStyles){const{fill:v,stroke:_}=y.getColorStyles(c,a,h,f);v&&(g.fill=v),_&&(g.stroke=_)}if(y.getTransformValues){const v=y.getTransformValues(c);for(const _ in v)F2(m,v,_)}y.beforeDraw?.(c)}},this._applyResizePlugins=()=>{for(const a of this._resizePlugins)a.resize?.()},this._getPluginParticleColors=a=>{let c,h;for(const f of this._colorPlugins)if(!c&&f.particleFillColor&&(c=Ds(this._engine,f.particleFillColor(a))),!h&&f.particleStrokeColor&&(h=Ds(this._engine,f.particleStrokeColor(a))),c&&h)break;return[c,h]},this._initCover=async()=>{const a=this.container.actualOptions,c=a.backgroundMask.cover,h=c.color;if(h){const f=ki(this._engine,h);if(f){const g={...f,a:c.opacity};this._coverColorStyle=hn(g,g.a)}}else await new Promise((f,g)=>{if(!c.image)return;const m=document.createElement("img");m.addEventListener("load",()=>{this._coverImage={image:m,opacity:c.opacity},f()}),m.addEventListener("error",y=>{g(y.error)}),m.src=c.image})},this._initStyle=()=>{const a=this.element,c=this.container.actualOptions;if(a){this._fullScreen?this._setFullScreenStyle():this._resetOriginalStyle();for(const h in c.style){if(!h||!c.style||!Object.prototype.hasOwnProperty.call(c.style,h))continue;const f=c.style[h];f&&a.style.setProperty(h,f,"important")}}},this._initTrail=async()=>{const a=this.container.actualOptions,c=a.particles.move.trail,h=c.fill;if(!c.enable)return;const f=rx/c.length;if(h.color){const g=ki(this._engine,h.color);if(!g)return;this._trailFill={color:{...g},opacity:f}}else await new Promise((g,m)=>{if(!h.image)return;const y=document.createElement("img");y.addEventListener("load",()=>{this._trailFill={image:y,opacity:f},g()}),y.addEventListener("error",v=>{m(v.error)}),y.src=h.image})},this._paintBase=a=>{this.draw(c=>k2(c,this.size,a))},this._paintImage=(a,c)=>{this.draw(h=>A2(h,this.size,a,c))},this._repairStyle=()=>{const a=this.element;a&&(this._safeMutationObserver(c=>c.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(c=>{!a||!(a instanceof Node)||c.observe(a,{attributes:!0})}))},this._resetOriginalStyle=()=>{const a=this.element,c=this._originalStyle;!a||!c||nb(a,c,!0)},this._safeMutationObserver=a=>{this._mutationObserver&&a(this._mutationObserver)},this._setFullScreenStyle=()=>{const a=this.element;a&&nb(a,O2(this.container.actualOptions.fullScreen.zIndex),!0)},this._engine=e,this._standardSize={height:0,width:0};const i=t.retina.pixelRatio,r=this._standardSize;this.size={height:r.height*i,width:r.width*i},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const t=this.container.actualOptions,e=t.particles.move.trail,i=this._trailFill;t.backgroundMask.enable?this.paint():e.enable&&e.length>LO&&i?i.color?this._paintBase(hn(i.color,i.opacity)):i.image&&this._paintImage(i.image,i.opacity):t.clear&&this.draw(r=>{Pd(r,this.size)})}destroy(){this.stop(),this._generated?(this.element?.remove(),this.element=void 0):this._resetOriginalStyle(),this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(t){const e=this._context;if(e)return t(e)}drawAsync(t){const e=this._context;if(e)return t(e)}drawParticle(t,e){if(t.spawning||t.destroyed)return;const i=t.getRadius();if(i<=jO)return;const r=t.getFillColor(),a=t.getStrokeColor()??r;let[c,h]=this._getPluginParticleColors(t);c||(c=r),h||(h=a),!(!c&&!h)&&this.draw(f=>{const g=this.container,m=g.actualOptions,y=t.options.zIndex,v=PO-t.zIndexFactor,_=v**y.opacityRate,S=t.bubble.opacity??t.opacity?.value??Fg,w=t.strokeOpacity??S,C=S*_,k=w*_,z={},Y={fill:c?Oo(c,C):void 0};Y.stroke=h?Oo(h,k):Y.fill,this._applyPreDrawUpdaters(f,t,i,C,Y,z),z2({container:g,context:f,particle:t,delta:e,colorStyles:Y,backgroundMask:m.backgroundMask.enable,composite:m.backgroundMask.composite,radius:i*v**y.sizeRate,opacity:C,shadow:t.options.shadow,transform:z}),this._applyPostDrawUpdaters(t)})}drawParticlePlugin(t,e,i){this.draw(r=>B2(r,t,e,i))}drawPlugin(t,e){this.draw(i=>P2(i,t,e))}async init(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=b2(t=>{for(const e of t)e.type==="attributes"&&e.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),await this._initCover();try{await this._initTrail()}catch(t){dr().error(t)}this.initBackground(),this._safeMutationObserver(t=>{!this.element||!(this.element instanceof Node)||t.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const t=this.container.actualOptions,e=t.background,i=this.element;if(!i)return;const r=i.style;if(r){if(e.color){const a=ki(this._engine,e.color);r.backgroundColor=a?hn(a,e.opacity):""}else r.backgroundColor="";r.backgroundImage=e.image||"",r.backgroundPosition=e.position||"",r.backgroundRepeat=e.repeat||"",r.backgroundSize=e.size||""}}initPlugins(){this._resizePlugins=[];for(const t of this.container.plugins.values())t.resize&&this._resizePlugins.push(t),(t.particleFillColor??t.particleStrokeColor)&&this._colorPlugins.push(t)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const t of this.container.particles.updaters)t.afterDraw&&this._postDrawUpdaters.push(t),(t.getColorStyles??t.getTransformValues??t.beforeDraw)&&this._preDrawUpdaters.push(t)}loadCanvas(t){this._generated&&this.element&&this.element.remove(),this._generated=t.dataset&&sr in t.dataset?t.dataset[sr]==="true":this._generated,this.element=t,this.element.ariaHidden="true",this._originalStyle=C2(this.element.style);const e=this._standardSize;e.height=t.offsetHeight,e.width=t.offsetWidth;const i=this.container.retina.pixelRatio,r=this.size;t.height=r.height=e.height*i,t.width=r.width=e.width*i,this._context=this.element.getContext("2d"),this._safeMutationObserver(a=>a.disconnect()),this.container.retina.init(),this.initBackground(),this._safeMutationObserver(a=>{!this.element||!(this.element instanceof Node)||a.observe(this.element,{attributes:!0})})}paint(){const t=this.container.actualOptions;this.draw(e=>{t.backgroundMask.enable&&t.backgroundMask.cover?(Pd(e,this.size),this._coverImage?this._paintImage(this._coverImage.image,this._coverImage.opacity):this._coverColorStyle?this._paintBase(this._coverColorStyle):this._paintBase()):this._paintBase()})}resize(){if(!this.element)return!1;const t=this.container,e=t.canvas._standardSize,i={width:this.element.offsetWidth,height:this.element.offsetHeight},r=t.retina.pixelRatio,a={width:i.width*r,height:i.height*r};if(i.height===e.height&&i.width===e.width&&a.height===this.element.height&&a.width===this.element.width)return!1;const c={...e};e.height=i.height,e.width=i.width;const h=this.size;return this.element.width=h.width=a.width,this.element.height=h.height=a.height,this.container.started&&t.particles.setResizeFactor({width:e.width/c.width,height:e.height/c.height}),!0}stop(){this._safeMutationObserver(t=>t.disconnect()),this._mutationObserver=void 0,this.draw(t=>Pd(t,this.size))}async windowResize(){if(!this.element||!this.resize())return;const t=this.container,e=t.updateActualOptions();t.particles.setDensity(),this._applyResizePlugins(),e&&await t.refresh()}}var bo;(function(o){o.canvas="canvas",o.parent="parent",o.window="window"})(bo||(bo={}));function Oi(o,t,e,i,r){if(i){let a={passive:!0};ux(r)?a.capture=r:r!==void 0&&(a=r),o.addEventListener(t,e,a)}else{const a=r;o.removeEventListener(t,e,a)}}class Y2{constructor(t){this.container=t,this._doMouseTouchClick=e=>{const i=this.container,r=i.actualOptions;if(this._canPush){const a=i.interactivity.mouse,c=a.position;if(!c)return;a.clickPosition={...c},a.clickTime=new Date().getTime();const h=r.interactivity.events.onClick;he(h.mode,f=>this.container.handleClickMode(f))}e.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),$O)},this._handleThemeChange=e=>{const i=e,r=this.container,a=r.options,c=a.defaultThemes,h=i.matches?c.dark:c.light;a.themes.find(g=>g.name===h)?.default.auto&&r.loadTheme(h)},this._handleVisibilityChange=()=>{const e=this.container,i=e.actualOptions;this._mouseTouchFinish(),i.pauseOnBlur&&(document?.hidden?(e.pageHidden=!0,e.pause()):(e.pageHidden=!1,e.animationStatus?e.play(!0):e.draw(!0)))},this._handleWindowResize=()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout);const e=async()=>{await this.container.canvas?.windowResize()};this._resizeTimeout=setTimeout(()=>void e(),this.container.actualOptions.interactivity.events.resize.delay*Zt)},this._manageInteractivityListeners=(e,i)=>{const r=this._handlers,a=this.container,c=a.actualOptions,h=a.interactivity.element;if(!h)return;const f=h,g=a.canvas.element;g&&(g.style.pointerEvents=f===g?"initial":"none"),(c.interactivity.events.onHover.enable||c.interactivity.events.onClick.enable)&&(Oi(h,fr,r.mouseMove,i),Oi(h,wO,r.touchStart,i),Oi(h,CO,r.touchMove,i),c.interactivity.events.onClick.enable?(Oi(h,B0,r.touchEndClick,i),Oi(h,xO,r.mouseUp,i),Oi(h,_O,r.mouseDown,i)):Oi(h,B0,r.touchEnd,i),Oi(h,e,r.mouseLeave,i),Oi(h,TO,r.touchCancel,i))},this._manageListeners=e=>{const i=this._handlers,r=this.container,a=r.actualOptions,c=a.interactivity.detectsOn,h=r.canvas.element;let f=ag;c===bo.window?(r.interactivity.element=window,f=SO):c===bo.parent&&h?r.interactivity.element=h.parentElement??h.parentNode:r.interactivity.element=h,this._manageMediaMatch(e),this._manageResize(e),this._manageInteractivityListeners(f,e),document&&Oi(document,DO,i.visibilityChange,e,!1)},this._manageMediaMatch=e=>{const i=this._handlers,r=px("(prefers-color-scheme: dark)");if(r){if(r.addEventListener!==void 0){Oi(r,"change",i.themeChange,e);return}r.addListener!==void 0&&(e?r.addListener(i.oldThemeChange):r.removeListener(i.oldThemeChange))}},this._manageResize=e=>{const i=this._handlers,r=this.container;if(!r.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){Oi(window,OO,i.resize,e);return}const c=r.canvas.element;this._resizeObserver&&!e?(c&&this._resizeObserver.unobserve(c),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&e&&c&&(this._resizeObserver=new ResizeObserver(h=>{h.find(g=>g.target===c)&&this._handleWindowResize()}),this._resizeObserver.observe(c))},this._mouseDown=()=>{const{interactivity:e}=this.container;if(!e)return;const{mouse:i}=e;i.clicking=!0,i.downPosition=i.position},this._mouseTouchClick=e=>{const i=this.container,r=i.actualOptions,{mouse:a}=i.interactivity;a.inside=!0;let c=!1;const h=a.position;if(!(!h||!r.interactivity.events.onClick.enable)){for(const f of i.plugins.values())if(f.clickPositionValid&&(c=f.clickPositionValid(h),c))break;c||this._doMouseTouchClick(e),a.clicking=!1}},this._mouseTouchFinish=()=>{const e=this.container.interactivity;if(!e)return;const i=e.mouse;delete i.position,delete i.clickPosition,delete i.downPosition,e.status=ag,i.inside=!1,i.clicking=!1},this._mouseTouchMove=e=>{const i=this.container,r=i.actualOptions,a=i.interactivity,c=i.canvas.element;if(!a?.element)return;a.mouse.inside=!0;let h;if(e.type.startsWith("pointer")){this._canPush=!0;const g=e;if(a.element===window){if(c){const m=c.getBoundingClientRect();h={x:g.clientX-m.left,y:g.clientY-m.top}}}else if(r.interactivity.detectsOn===bo.parent){const m=g.target,y=g.currentTarget;if(m&&y&&c){const v=m.getBoundingClientRect(),_=y.getBoundingClientRect(),S=c.getBoundingClientRect();h={x:g.offsetX+Me*v.left-(_.left+S.left),y:g.offsetY+Me*v.top-(_.top+S.top)}}else h={x:g.offsetX??g.clientX,y:g.offsetY??g.clientY}}else g.target===c&&(h={x:g.offsetX??g.clientX,y:g.offsetY??g.clientY})}else if(this._canPush=e.type!=="touchmove",c){const g=e,m=g.touches[g.touches.length-lx],y=c.getBoundingClientRect();h={x:m.clientX-(y.left??Cu),y:m.clientY-(y.top??Cu)}}const f=i.retina.pixelRatio;h&&(h.x*=f,h.y*=f),a.mouse.position=h,a.status=fr},this._touchEnd=e=>{const i=e,r=Array.from(i.changedTouches);for(const a of r)this._touches.delete(a.identifier);this._mouseTouchFinish()},this._touchEndClick=e=>{const i=e,r=Array.from(i.changedTouches);for(const a of r)this._touches.delete(a.identifier);this._mouseTouchClick(e)},this._touchStart=e=>{const i=e,r=Array.from(i.changedTouches);for(const a of r)this._touches.set(a.identifier,performance.now());this._mouseTouchMove(e)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:e=>this._mouseTouchMove(e),mouseUp:e=>this._mouseTouchClick(e),touchStart:e=>this._touchStart(e),touchMove:e=>this._mouseTouchMove(e),touchEnd:e=>this._touchEnd(e),touchCancel:e=>this._touchEnd(e),touchEndClick:e=>this._touchEndClick(e),visibilityChange:()=>this._handleVisibilityChange(),themeChange:e=>this._handleThemeChange(e),oldThemeChange:e=>this._handleThemeChange(e),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}var He;(function(o){o.configAdded="configAdded",o.containerInit="containerInit",o.particlesSetup="particlesSetup",o.containerStarted="containerStarted",o.containerStopped="containerStopped",o.containerDestroyed="containerDestroyed",o.containerPaused="containerPaused",o.containerPlay="containerPlay",o.containerBuilt="containerBuilt",o.particleAdded="particleAdded",o.particleDestroyed="particleDestroyed",o.particleRemoved="particleRemoved"})(He||(He={}));class re{constructor(){this.value=""}static create(t,e){const i=new re;return i.load(t),e!==void 0&&(Ts(e)||Le(e)?i.load({value:e}):i.load(e)),i}load(t){G(t)||G(t.value)||(this.value=t.value)}}class V2{constructor(){this.color=new re,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(t){G(t)||(t.color!==void 0&&(this.color=re.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image),t.position!==void 0&&(this.position=t.position),t.repeat!==void 0&&(this.repeat=t.repeat),t.size!==void 0&&(this.size=t.size),t.opacity!==void 0&&(this.opacity=t.opacity))}}class N2{constructor(){this.opacity=1}load(t){G(t)||(t.color!==void 0&&(this.color=re.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image),t.opacity!==void 0&&(this.opacity=t.opacity))}}class X2{constructor(){this.composite="destination-out",this.cover=new N2,this.enable=!1}load(t){if(!G(t)){if(t.composite!==void 0&&(this.composite=t.composite),t.cover!==void 0){const e=t.cover,i=Ts(t.cover)?{color:t.cover}:t.cover;this.cover.load(e.color!==void 0||e.image!==void 0?e:{color:i})}t.enable!==void 0&&(this.enable=t.enable)}}}class q2{constructor(){this.enable=!0,this.zIndex=0}load(t){G(t)||(t.enable!==void 0&&(this.enable=t.enable),t.zIndex!==void 0&&(this.zIndex=t.zIndex))}}class G2{constructor(){this.enable=!1,this.mode=[]}load(t){G(t)||(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode))}}var Do;(function(o){o.circle="circle",o.rectangle="rectangle"})(Do||(Do={}));class sb{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type=Do.circle}load(t){G(t)||(t.selectors!==void 0&&(this.selectors=t.selectors),t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),t.type!==void 0&&(this.type=t.type))}}class I2{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(t){G(t)||(t.enable!==void 0&&(this.enable=t.enable),t.force!==void 0&&(this.force=t.force),t.smooth!==void 0&&(this.smooth=t.smooth))}}class W2{constructor(){this.enable=!1,this.mode=[],this.parallax=new I2}load(t){G(t)||(t.enable!==void 0&&(this.enable=t.enable),t.mode!==void 0&&(this.mode=t.mode),this.parallax.load(t.parallax))}}class Q2{constructor(){this.delay=.5,this.enable=!0}load(t){G(t)||(t.delay!==void 0&&(this.delay=t.delay),t.enable!==void 0&&(this.enable=t.enable))}}class Z2{constructor(){this.onClick=new G2,this.onDiv=new sb,this.onHover=new W2,this.resize=new Q2}load(t){if(G(t))return;this.onClick.load(t.onClick);const e=t.onDiv;e!==void 0&&(this.onDiv=he(e,i=>{const r=new sb;return r.load(i),r})),this.onHover.load(t.onHover),this.resize.load(t.resize)}}class K2{constructor(t,e){this._engine=t,this._container=e}load(t){if(G(t)||!this._container)return;const e=this._engine.interactors.get(this._container);if(e)for(const i of e)i.loadModeOptions&&i.loadModeOptions(this,t)}}class Ex{constructor(t,e){this.detectsOn=bo.window,this.events=new Z2,this.modes=new K2(t,e)}load(t){if(G(t))return;const e=t.detectsOn;e!==void 0&&(this.detectsOn=e),this.events.load(t.events),this.modes.load(t.modes)}}class J2{load(t){G(t)||(t.position&&(this.position={x:t.position.x??K0,y:t.position.y??K0,mode:t.position.mode??dn.percent}),t.options&&(this.options=ue({},t.options)))}}var ar;(function(o){o.screen="screen",o.canvas="canvas"})(ar||(ar={}));class $2{constructor(){this.maxWidth=1/0,this.options={},this.mode=ar.canvas}load(t){G(t)||(G(t.maxWidth)||(this.maxWidth=t.maxWidth),G(t.mode)||(t.mode===ar.screen?this.mode=ar.screen:this.mode=ar.canvas),G(t.options)||(this.options=ue({},t.options)))}}var vs;(function(o){o.any="any",o.dark="dark",o.light="light"})(vs||(vs={}));class tD{constructor(){this.auto=!1,this.mode=vs.any,this.value=!1}load(t){G(t)||(t.auto!==void 0&&(this.auto=t.auto),t.mode!==void 0&&(this.mode=t.mode),t.value!==void 0&&(this.value=t.value))}}class eD{constructor(){this.name="",this.default=new tD}load(t){G(t)||(t.name!==void 0&&(this.name=t.name),this.default.load(t.default),t.options!==void 0&&(this.options=ue({},t.options)))}}class Ng{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(t){G(t)||(t.count!==void 0&&(this.count=rt(t.count)),t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=rt(t.speed)),t.decay!==void 0&&(this.decay=rt(t.decay)),t.delay!==void 0&&(this.delay=rt(t.delay)),t.sync!==void 0&&(this.sync=t.sync))}}class Xg extends Ng{constructor(){super(),this.mode=or.auto,this.startValue=vo.random}load(t){super.load(t),!G(t)&&(t.mode!==void 0&&(this.mode=t.mode),t.startValue!==void 0&&(this.startValue=t.startValue))}}class Bd extends Ng{constructor(){super(),this.offset=0,this.sync=!0}load(t){super.load(t),!G(t)&&t.offset!==void 0&&(this.offset=rt(t.offset))}}class iD{constructor(){this.h=new Bd,this.s=new Bd,this.l=new Bd}load(t){G(t)||(this.h.load(t.h),this.s.load(t.s),this.l.load(t.l))}}class Mo extends re{constructor(){super(),this.animation=new iD}static create(t,e){const i=new Mo;return i.load(t),e!==void 0&&(Ts(e)||Le(e)?i.load({value:e}):i.load(e)),i}load(t){if(super.load(t),G(t))return;const e=t.animation;e!==void 0&&(e.enable!==void 0?this.animation.h.load(e):this.animation.load(t.animation))}}var _o;(function(o){o.absorb="absorb",o.bounce="bounce",o.destroy="destroy"})(_o||(_o={}));class nD{constructor(){this.speed=2}load(t){G(t)||t.speed!==void 0&&(this.speed=t.speed)}}class sD{constructor(){this.enable=!0,this.retries=0}load(t){G(t)||(t.enable!==void 0&&(this.enable=t.enable),t.retries!==void 0&&(this.retries=t.retries))}}class Zi{constructor(){this.value=0}load(t){G(t)||G(t.value)||(this.value=rt(t.value))}}class rD extends Zi{constructor(){super(),this.animation=new Ng}load(t){if(super.load(t),G(t))return;const e=t.animation;e!==void 0&&this.animation.load(e)}}class kx extends rD{constructor(){super(),this.animation=new Xg}load(t){super.load(t)}}class rb extends Zi{constructor(){super(),this.value=1}}class Ax{constructor(){this.horizontal=new rb,this.vertical=new rb}load(t){G(t)||(this.horizontal.load(t.horizontal),this.vertical.load(t.vertical))}}class oD{constructor(){this.absorb=new nD,this.bounce=new Ax,this.enable=!1,this.maxSpeed=50,this.mode=_o.bounce,this.overlap=new sD}load(t){G(t)||(this.absorb.load(t.absorb),this.bounce.load(t.bounce),t.enable!==void 0&&(this.enable=t.enable),t.maxSpeed!==void 0&&(this.maxSpeed=rt(t.maxSpeed)),t.mode!==void 0&&(this.mode=t.mode),this.overlap.load(t.overlap))}}class aD{constructor(){this.close=!0,this.fill=!0,this.options={},this.type=[]}load(t){if(G(t))return;const e=t.options;if(e!==void 0)for(const i in e){const r=e[i];r&&(this.options[i]=ue(this.options[i]??{},r))}t.close!==void 0&&(this.close=t.close),t.fill!==void 0&&(this.fill=t.fill),t.type!==void 0&&(this.type=t.type)}}class lD{constructor(){this.offset=0,this.value=90}load(t){G(t)||(t.offset!==void 0&&(this.offset=rt(t.offset)),t.value!==void 0&&(this.value=rt(t.value)))}}class cD{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}load(t){if(!G(t)&&(t.distance!==void 0&&(this.distance=rt(t.distance)),t.enable!==void 0&&(this.enable=t.enable),t.rotate)){const e=t.rotate.x;e!==void 0&&(this.rotate.x=e);const i=t.rotate.y;i!==void 0&&(this.rotate.y=i)}}}class uD{constructor(){this.x=50,this.y=50,this.mode=dn.percent,this.radius=0}load(t){G(t)||(t.x!==void 0&&(this.x=t.x),t.y!==void 0&&(this.y=t.y),t.mode!==void 0&&(this.mode=t.mode),t.radius!==void 0&&(this.radius=t.radius))}}class hD{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(t){G(t)||(t.acceleration!==void 0&&(this.acceleration=rt(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.inverse!==void 0&&(this.inverse=t.inverse),t.maxSpeed!==void 0&&(this.maxSpeed=rt(t.maxSpeed)))}}class fD{constructor(){this.clamp=!0,this.delay=new Zi,this.enable=!1,this.options={}}load(t){G(t)||(t.clamp!==void 0&&(this.clamp=t.clamp),this.delay.load(t.delay),t.enable!==void 0&&(this.enable=t.enable),this.generator=t.generator,t.options&&(this.options=ue(this.options,t.options)))}}class dD{load(t){G(t)||(t.color!==void 0&&(this.color=re.create(this.color,t.color)),t.image!==void 0&&(this.image=t.image))}}class gD{constructor(){this.enable=!1,this.length=10,this.fill=new dD}load(t){G(t)||(t.enable!==void 0&&(this.enable=t.enable),t.fill!==void 0&&this.fill.load(t.fill),t.length!==void 0&&(this.length=t.length))}}var ce;(function(o){o.bounce="bounce",o.none="none",o.out="out",o.destroy="destroy",o.split="split"})(ce||(ce={}));class pD{constructor(){this.default=ce.out}load(t){G(t)||(t.default!==void 0&&(this.default=t.default),this.bottom=t.bottom??t.default,this.left=t.left??t.default,this.right=t.right??t.default,this.top=t.top??t.default)}}class mD{constructor(){this.acceleration=0,this.enable=!1}load(t){G(t)||(t.acceleration!==void 0&&(this.acceleration=rt(t.acceleration)),t.enable!==void 0&&(this.enable=t.enable),t.position&&(this.position=ue({},t.position)))}}class yD{constructor(){this.angle=new lD,this.attract=new cD,this.center=new uD,this.decay=0,this.distance={},this.direction=Te.none,this.drift=0,this.enable=!1,this.gravity=new hD,this.path=new fD,this.outModes=new pD,this.random=!1,this.size=!1,this.speed=2,this.spin=new mD,this.straight=!1,this.trail=new gD,this.vibrate=!1,this.warp=!1}load(t){if(G(t))return;this.angle.load(di(t.angle)?{value:t.angle}:t.angle),this.attract.load(t.attract),this.center.load(t.center),t.decay!==void 0&&(this.decay=rt(t.decay)),t.direction!==void 0&&(this.direction=t.direction),t.distance!==void 0&&(this.distance=di(t.distance)?{horizontal:t.distance,vertical:t.distance}:{...t.distance}),t.drift!==void 0&&(this.drift=rt(t.drift)),t.enable!==void 0&&(this.enable=t.enable),this.gravity.load(t.gravity);const e=t.outModes;e!==void 0&&(uo(e)?this.outModes.load(e):this.outModes.load({default:e})),this.path.load(t.path),t.random!==void 0&&(this.random=t.random),t.size!==void 0&&(this.size=t.size),t.speed!==void 0&&(this.speed=rt(t.speed)),this.spin.load(t.spin),t.straight!==void 0&&(this.straight=t.straight),this.trail.load(t.trail),t.vibrate!==void 0&&(this.vibrate=t.vibrate),t.warp!==void 0&&(this.warp=t.warp)}}class vD extends Xg{constructor(){super(),this.destroy=Os.none,this.speed=2}load(t){super.load(t),!G(t)&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class bD extends kx{constructor(){super(),this.animation=new vD,this.value=1}load(t){if(G(t))return;super.load(t);const e=t.animation;e!==void 0&&this.animation.load(e)}}class _D{constructor(){this.enable=!1,this.width=1920,this.height=1080}load(t){if(G(t))return;t.enable!==void 0&&(this.enable=t.enable);const e=t.width;e!==void 0&&(this.width=e);const i=t.height;i!==void 0&&(this.height=i)}}var el;(function(o){o.delete="delete",o.wait="wait"})(el||(el={}));class xD{constructor(){this.mode=el.delete,this.value=0}load(t){G(t)||(t.mode!==void 0&&(this.mode=t.mode),t.value!==void 0&&(this.value=t.value))}}class SD{constructor(){this.density=new _D,this.limit=new xD,this.value=0}load(t){G(t)||(this.density.load(t.density),this.limit.load(t.limit),t.value!==void 0&&(this.value=t.value))}}class wD{constructor(){this.blur=0,this.color=new re,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(t){G(t)||(t.blur!==void 0&&(this.blur=t.blur),this.color=re.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable),t.offset!==void 0&&(t.offset.x!==void 0&&(this.offset.x=t.offset.x),t.offset.y!==void 0&&(this.offset.y=t.offset.y)))}}class CD{constructor(){this.close=!0,this.fill=!0,this.options={},this.type="circle"}load(t){if(G(t))return;const e=t.options;if(e!==void 0)for(const i in e){const r=e[i];r&&(this.options[i]=ue(this.options[i]??{},r))}t.close!==void 0&&(this.close=t.close),t.fill!==void 0&&(this.fill=t.fill),t.type!==void 0&&(this.type=t.type)}}class TD extends Xg{constructor(){super(),this.destroy=Os.none,this.speed=5}load(t){super.load(t),!G(t)&&t.destroy!==void 0&&(this.destroy=t.destroy)}}class OD extends kx{constructor(){super(),this.animation=new TD,this.value=3}load(t){if(super.load(t),G(t))return;const e=t.animation;e!==void 0&&this.animation.load(e)}}class ob{constructor(){this.width=0}load(t){G(t)||(t.color!==void 0&&(this.color=Mo.create(this.color,t.color)),t.width!==void 0&&(this.width=rt(t.width)),t.opacity!==void 0&&(this.opacity=rt(t.opacity)))}}class DD extends Zi{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(t){super.load(t),!G(t)&&(t.opacityRate!==void 0&&(this.opacityRate=t.opacityRate),t.sizeRate!==void 0&&(this.sizeRate=t.sizeRate),t.velocityRate!==void 0&&(this.velocityRate=t.velocityRate))}}class MD{constructor(t,e){this._engine=t,this._container=e,this.bounce=new Ax,this.collisions=new oD,this.color=new Mo,this.color.value="#fff",this.effect=new aD,this.groups={},this.move=new yD,this.number=new SD,this.opacity=new bD,this.reduceDuplicates=!1,this.shadow=new wD,this.shape=new CD,this.size=new OD,this.stroke=new ob,this.zIndex=new DD}load(t){if(G(t))return;if(t.groups!==void 0)for(const i of Object.keys(t.groups)){if(!Object.hasOwn(t.groups,i))continue;const r=t.groups[i];r!==void 0&&(this.groups[i]=ue(this.groups[i]??{},r))}t.reduceDuplicates!==void 0&&(this.reduceDuplicates=t.reduceDuplicates),this.bounce.load(t.bounce),this.color.load(Mo.create(this.color,t.color)),this.effect.load(t.effect),this.move.load(t.move),this.number.load(t.number),this.opacity.load(t.opacity),this.shape.load(t.shape),this.size.load(t.size),this.shadow.load(t.shadow),this.zIndex.load(t.zIndex),this.collisions.load(t.collisions),t.interactivity!==void 0&&(this.interactivity=ue({},t.interactivity));const e=t.stroke;if(e&&(this.stroke=he(e,i=>{const r=new ob;return r.load(i),r})),this._container){const i=this._engine.updaters.get(this._container);if(i)for(const a of i)a.loadOptions&&a.loadOptions(this,t);const r=this._engine.interactors.get(this._container);if(r)for(const a of r)a.loadParticlesOptions&&a.loadParticlesOptions(this,t)}}}function zx(o,...t){for(const e of t)o.load(e)}function qg(o,t,...e){const i=new MD(o,t);return zx(i,...e),i}class ED{constructor(t,e){this._findDefaultTheme=i=>this.themes.find(r=>r.default.value&&r.default.mode===i)??this.themes.find(r=>r.default.value&&r.default.mode===vs.any),this._importPreset=i=>{this.load(this._engine.getPreset(i))},this._engine=t,this._container=e,this.autoPlay=!0,this.background=new V2,this.backgroundMask=new X2,this.clear=!0,this.defaultThemes={},this.delay=0,this.fullScreen=new q2,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new Ex(t,e),this.manualParticles=[],this.particles=qg(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}load(t){if(G(t))return;t.preset!==void 0&&he(t.preset,c=>this._importPreset(c)),t.autoPlay!==void 0&&(this.autoPlay=t.autoPlay),t.clear!==void 0&&(this.clear=t.clear),t.key!==void 0&&(this.key=t.key),t.name!==void 0&&(this.name=t.name),t.delay!==void 0&&(this.delay=rt(t.delay));const e=t.detectRetina;e!==void 0&&(this.detectRetina=e),t.duration!==void 0&&(this.duration=rt(t.duration));const i=t.fpsLimit;i!==void 0&&(this.fpsLimit=i),t.pauseOnBlur!==void 0&&(this.pauseOnBlur=t.pauseOnBlur),t.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=t.pauseOnOutsideViewport),t.zLayers!==void 0&&(this.zLayers=t.zLayers),this.background.load(t.background);const r=t.fullScreen;ux(r)?this.fullScreen.enable=r:this.fullScreen.load(r),this.backgroundMask.load(t.backgroundMask),this.interactivity.load(t.interactivity),t.manualParticles&&(this.manualParticles=t.manualParticles.map(c=>{const h=new J2;return h.load(c),h})),this.particles.load(t.particles),this.style=ue(this.style,t.style),this._engine.loadOptions(this,t),t.smooth!==void 0&&(this.smooth=t.smooth);const a=this._engine.interactors.get(this._container);if(a)for(const c of a)c.loadOptions&&c.loadOptions(this,t);if(t.responsive!==void 0)for(const c of t.responsive){const h=new $2;h.load(c),this.responsive.push(h)}if(this.responsive.sort((c,h)=>c.maxWidth-h.maxWidth),t.themes!==void 0)for(const c of t.themes){const h=this.themes.find(f=>f.name===c.name);if(h)h.load(c);else{const f=new eD;f.load(c),this.themes.push(f)}}this.defaultThemes.dark=this._findDefaultTheme(vs.dark)?.name,this.defaultThemes.light=this._findDefaultTheme(vs.light)?.name}setResponsive(t,e,i){this.load(i);const r=this.responsive.find(a=>a.mode===ar.screen&&screen?a.maxWidth>screen.availWidth:a.maxWidth*e>t);return this.load(r?.options),r?.maxWidth}setTheme(t){if(t){const e=this.themes.find(i=>i.name===t);e&&this.load(e.options)}else{const e=px("(prefers-color-scheme: dark)"),i=e?.matches,r=this._findDefaultTheme(i?vs.dark:vs.light);r&&this.load(r.options)}}}var Eo;(function(o){o.external="external",o.particles="particles"})(Eo||(Eo={}));class kD{constructor(t,e){this.container=e,this._engine=t,this._interactors=[],this._externalInteractors=[],this._particleInteractors=[]}externalInteract(t){for(const e of this._externalInteractors)e.isEnabled()&&e.interact(t)}handleClickMode(t){for(const e of this._externalInteractors)e.handleClickMode?.(t)}async init(){this._interactors=await this._engine.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[];for(const t of this._interactors){switch(t.type){case Eo.external:this._externalInteractors.push(t);break;case Eo.particles:this._particleInteractors.push(t);break}t.init()}}particlesInteract(t,e){for(const i of this._externalInteractors)i.clear(t,e);for(const i of this._particleInteractors)i.isEnabled(t)&&i.interact(t,e)}reset(t){for(const e of this._externalInteractors)e.isEnabled()&&e.reset(t);for(const e of this._particleInteractors)e.isEnabled(t)&&e.reset(t)}}var Wi;(function(o){o.normal="normal",o.inside="inside",o.outside="outside"})(Wi||(Wi={}));function AD(o,t,e,i){const r=t.options[o];if(r)return ue({close:t.close,fill:t.fill},ke(r,e,i))}function zD(o,t,e,i){const r=t.options[o];if(r)return ue({close:t.close,fill:t.fill},ke(r,e,i))}function ab(o){if(!qt(o.outMode,o.checkModes))return;const t=o.radius*Me;o.coord>o.maxCoord-t?o.setCb(-o.radius):o.coord<t&&o.setCb(o.radius)}class RD{constructor(t,e){this.container=e,this._calcPosition=(i,r,a,c=F0)=>{for(const S of i.plugins.values()){const w=S.particlePosition!==void 0?S.particlePosition(r,this):void 0;if(w)return fi.create(w.x,w.y,a)}const h=i.canvas.size,f=d2({size:h,position:r}),g=fi.create(f.x,f.y,a),m=this.getRadius(),y=this.options.move.outModes,v=S=>{ab({outMode:S,checkModes:[ce.bounce],coord:g.x,maxCoord:i.canvas.size.width,setCb:w=>g.x+=w,radius:m})},_=S=>{ab({outMode:S,checkModes:[ce.bounce],coord:g.y,maxCoord:i.canvas.size.height,setCb:w=>g.y+=w,radius:m})};return v(y.left??y.default),v(y.right??y.default),_(y.top??y.default),_(y.bottom??y.default),this._checkOverlap(g,c)?this._calcPosition(i,void 0,a,c+qO):g},this._calculateVelocity=()=>{const i=f2(this.direction),r=i.copy(),a=this.options.move;if(a.direction===Te.inside||a.direction===Te.outside)return r;const c=Un(Q(a.angle.value)),h=Un(Q(a.angle.offset)),f={left:h-c*Xt,right:h+c*Xt};return a.straight||(r.angle+=Ee(rt(f.left,f.right))),a.random&&typeof a.speed=="number"&&(r.length*=ft()),r},this._checkOverlap=(i,r=F0)=>{const a=this.options.collisions,c=this.getRadius();if(!a.enable)return!1;const h=a.overlap;if(h.enable)return!1;const f=h.retries;if(f>=GO&&r>f)throw new Error(`${Ri} particle is overlapping and can't be placed`);return!!this.container.particles.find(g=>Ne(i,g.position)<c+g.getRadius())},this._getRollColor=i=>{if(!i||!this.roll||!this.backColor&&!this.roll.alter)return i;const r=this.roll.horizontal&&this.roll.vertical?Me*I0:I0,a=this.roll.horizontal?Math.PI*Xt:Tu;return Math.floor(((this.roll.angle??Tu)+a)/(Math.PI/r))%Me?this.backColor?this.backColor:this.roll.alter?U2(i,this.roll.alter.type,this.roll.alter.value):i:i},this._initPosition=i=>{const r=this.container,a=Q(this.options.zIndex.value);this.position=this._calcPosition(r,i,ji(a,IO,r.zLayers)),this.initialPosition=this.position.copy();const c=r.canvas.size;switch(this.moveCenter={...Sx(this.options.move.center,c),radius:this.options.move.center.radius??WO,mode:this.options.move.center.mode??dn.percent},this.direction=h2(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case Te.inside:this.outType=Wi.inside;break;case Te.outside:this.outType=Wi.outside;break}this.offset=Vt.origin},this._engine=t}destroy(t){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const e=this.container,i=this.pathGenerator;e.shapeDrawers.get(this.shape)?.particleDestroy?.(this);for(const a of e.plugins.values())a.particleDestroyed?.(this,t);for(const a of e.particles.updaters)a.particleDestroyed?.(this,t);i?.reset(this),this._engine.dispatchEvent(He.particleDestroyed,{container:this.container,data:{particle:this}})}draw(t){const e=this.container,i=e.canvas;for(const r of e.plugins.values())i.drawParticlePlugin(r,this,t);i.drawParticle(this,t)}getFillColor(){return this._getRollColor(this.bubble.color??ib(this.color))}getMass(){return this.getRadius()**An*Math.PI*Xt}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??ib(this.strokeColor))}init(t,e,i,r){const a=this.container,c=this._engine;this.id=t,this.group=r,this.effectClose=!0,this.effectFill=!0,this.shapeClose=!0,this.shapeFill=!0,this.pathRotation=!1,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.isRotating=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType=Wi.normal,this.ignoresResizeRatio=!0;const h=a.retina.pixelRatio,f=a.actualOptions,g=qg(this._engine,a,f.particles),{reduceDuplicates:m}=g,y=g.effect.type,v=g.shape.type;this.effect=ke(y,this.id,m),this.shape=ke(v,this.id,m);const _=g.effect,S=g.shape;if(i){if(i.effect?.type){const J=i.effect.type,Z=ke(J,this.id,m);Z&&(this.effect=Z,_.load(i.effect))}if(i.shape?.type){const J=i.shape.type,Z=ke(J,this.id,m);Z&&(this.shape=Z,S.load(i.shape))}}if(this.effect===Co){const J=[...this.container.effectDrawers.keys()];this.effect=J[Math.floor(Math.random()*J.length)]}if(this.shape===Co){const J=[...this.container.shapeDrawers.keys()];this.shape=J[Math.floor(Math.random()*J.length)]}this.effectData=AD(this.effect,_,this.id,m),this.shapeData=zD(this.shape,S,this.id,m),g.load(i);const w=this.effectData;w&&g.load(w.particles);const C=this.shapeData;C&&g.load(C.particles);const k=new Ex(c,a);k.load(a.actualOptions.interactivity),k.load(g.interactivity),this.interactivity=k,this.effectFill=w?.fill??g.effect.fill,this.effectClose=w?.close??g.effect.close,this.shapeFill=C?.fill??g.shape.fill,this.shapeClose=C?.close??g.shape.close,this.options=g;const z=this.options.move.path;this.pathDelay=Q(z.delay.value)*Zt,z.generator&&(this.pathGenerator=this._engine.getPathGenerator(z.generator),this.pathGenerator&&a.addPath(z.generator,this.pathGenerator)&&this.pathGenerator.init(a)),a.retina.initParticle(this),this.size=_x(this.options.size,h),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(e),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=ax-Q(this.options.move.decay);const Y=a.particles;Y.setLastZIndex(this.position.z),this.zIndexFactor=this.position.z/a.zLayers,this.sides=24;let U=a.effectDrawers.get(this.effect);U||(U=this._engine.getEffectDrawer(this.effect),U&&a.effectDrawers.set(this.effect,U)),U?.loadEffect&&U.loadEffect(this);let F=a.shapeDrawers.get(this.shape);F||(F=this._engine.getShapeDrawer(this.shape),F&&a.shapeDrawers.set(this.shape,F)),F?.loadShape&&F.loadShape(this);const I=F?.getSidesCount;I&&(this.sides=I(this)),this.spawning=!1,this.shadowColor=ki(this._engine,this.options.shadow.color);for(const J of Y.updaters)J.init(this);for(const J of Y.movers)J.init?.(this);U?.particleInit?.(a,this),F?.particleInit?.(a,this);for(const J of a.plugins.values())J.particleCreated?.(this)}isInsideCanvas(){const t=this.getRadius(),e=this.container.canvas.size,i=this.position;return i.x>=-t&&i.y>=-t&&i.y<=e.height+t&&i.x<=e.width+t}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const t of this.container.particles.updaters)t.reset?.(this)}}class jD{constructor(t,e){this.position=t,this.particle=e}}var xo;(function(o){o.circle="circle",o.rectangle="rectangle"})(xo||(xo={}));class Rx{constructor(t,e,i){this.position={x:t,y:e},this.type=i}}class Be extends Rx{constructor(t,e,i){super(t,e,xo.circle),this.radius=i}contains(t){return Ne(t,this.position)<=this.radius}intersects(t){const e=this.position,i=t.position,r={x:Math.abs(i.x-e.x),y:Math.abs(i.y-e.y)},a=this.radius;if(t instanceof Be||t.type===xo.circle){const c=t,h=a+c.radius,f=Math.sqrt(r.x**An+r.y**An);return h>f}else if(t instanceof Qi||t.type===xo.rectangle){const c=t,{width:h,height:f}=c.size;return Math.pow(r.x-h,An)+Math.pow(r.y-f,An)<=a**An||r.x<=a+h&&r.y<=a+f||r.x<=h||r.y<=f}return!1}}class Qi extends Rx{constructor(t,e,i,r){super(t,e,xo.rectangle),this.size={height:r,width:i}}contains(t){const e=this.size.width,i=this.size.height,r=this.position;return t.x>=r.x&&t.x<=r.x+e&&t.y>=r.y&&t.y<=r.y+i}intersects(t){if(t instanceof Be)return t.intersects(this);const e=this.size.width,i=this.size.height,r=this.position,a=t.position,c=t instanceof Qi?t.size:{width:0,height:0},h=c.width,f=c.height;return a.x<r.x+e&&a.x+h>r.x&&a.y<r.y+i&&a.y+f>r.y}}class Du{constructor(t,e){this.rectangle=t,this.capacity=e,this._subdivide=()=>{const{x:i,y:r}=this.rectangle.position,{width:a,height:c}=this.rectangle.size,{capacity:h}=this;for(let f=0;f<kO;f++){const g=f%Me;this._subs.push(new Du(new Qi(i+a*Xt*g,r+c*Xt*(Math.round(f*Xt)-g),a*Xt,c*Xt),h))}this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(t){return this.rectangle.contains(t.position)?this._points.length<this.capacity?(this._points.push(t),!0):(this._divided||this._subdivide(),this._subs.some(e=>e.insert(t))):!1}query(t,e){const i=[];if(!t.intersects(this.rectangle))return[];for(const r of this._points)!t.contains(r.position)&&Ne(t.position,r.position)>r.particle.getRadius()&&(!e||e(r.particle))||i.push(r.particle);if(this._divided)for(const r of this._subs)i.push(...r.query(t,e));return i}queryCircle(t,e,i){return this.query(new Be(t.x,t.y,e),i)}queryRectangle(t,e,i){return this.query(new Qi(t.x,t.y,e.width,e.height),i)}}const lb=o=>{const{height:t,width:e}=o;return new Qi(W0*e,W0*t,Q0*e,Q0*t)};class LD{constructor(t,e){this._addToPool=(...r)=>{this._pool.push(...r)},this._applyDensity=(r,a,c)=>{const h=r.number;if(!r.number.density?.enable){c===void 0?this._limit=h.limit.value:h.limit&&this._groupLimits.set(c,h.limit.value);return}const f=this._initDensityFactor(h.density),g=h.value,m=h.limit.value>Z0?h.limit.value:g,y=Math.min(g,m)*f+a,v=Math.min(this.count,this.filter(_=>_.group===c).length);c===void 0?this._limit=h.limit.value*f:this._groupLimits.set(c,h.limit.value*f),v<y?this.push(Math.abs(y-v),void 0,r,c):v>y&&this.removeQuantity(v-y,c)},this._initDensityFactor=r=>{const a=this._container;if(!a.canvas.element||!r.enable)return JO;const c=a.canvas.element,h=a.retina.pixelRatio;return c.width*c.height/(r.height*r.width*h**An)},this._pushParticle=(r,a,c,h)=>{try{let f=this._pool.pop();f||(f=new RD(this._engine,this._container)),f.init(this._nextId,r,a,c);let g=!0;return h&&(g=h(f)),g?(this._array.push(f),this._zArray.push(f),this._nextId++,this._engine.dispatchEvent(He.particleAdded,{container:this._container,data:{particle:f}}),f):void 0}catch(f){dr().warning(`${Ri} adding particle: ${f}`)}},this._removeParticle=(r,a,c)=>{const h=this._array[r];if(!h||h.group!==a)return!1;const f=this._zArray.indexOf(h);return this._array.splice(r,Ou),this._zArray.splice(f,Ou),h.destroy(c),this._engine.dispatchEvent(He.particleRemoved,{container:this._container,data:{particle:h}}),this._addToPool(h),!0},this._engine=t,this._container=e,this._nextId=0,this._array=[],this._zArray=[],this._pool=[],this._limit=0,this._groupLimits=new Map,this._needsSort=!1,this._lastZIndex=0,this._interactionManager=new kD(t,e),this._pluginsInitialized=!1;const i=e.canvas.size;this.quadTree=new Du(lb(i),H0),this.movers=[],this.updaters=[]}get count(){return this._array.length}addManualParticles(){const t=this._container;t.actualOptions.manualParticles.forEach(i=>this.addParticle(i.position?Sx(i.position,t.canvas.size):void 0,i.options))}addParticle(t,e,i,r){const a=this._container.actualOptions.particles.number.limit.mode,c=i===void 0?this._limit:this._groupLimits.get(i)??this._limit,h=this.count;if(c>Z0)switch(a){case el.delete:{const f=h+QO-c;f>ZO&&this.removeQuantity(f);break}case el.wait:if(h>=c)return;break}return this._pushParticle(t,e,i,r)}clear(){this._array=[],this._zArray=[],this._pluginsInitialized=!1}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}draw(t){const e=this._container,i=e.canvas;i.clear(),this.update(t);for(const r of e.plugins.values())i.drawPlugin(r,t);for(const r of this._zArray)r.draw(t)}filter(t){return this._array.filter(t)}find(t){return this._array.find(t)}get(t){return this._array[t]}handleClickMode(t){this._interactionManager.handleClickMode(t)}async init(){const t=this._container,e=t.actualOptions;this._lastZIndex=0,this._needsSort=!1,await this.initPlugins();let i=!1;for(const r of t.plugins.values())if(i=r.particlesInitialization?.()??i,i)break;if(this.addManualParticles(),!i){const r=e.particles,a=r.groups;for(const c in a){const h=a[c];for(let f=this.count,g=0;g<h.number?.value&&f<r.number.value;f++,g++)this.addParticle(void 0,h,c)}for(let c=this.count;c<r.number.value;c++)this.addParticle()}}async initPlugins(){if(this._pluginsInitialized)return;const t=this._container;this.movers=await this._engine.getMovers(t,!0),this.updaters=await this._engine.getUpdaters(t,!0),await this._interactionManager.init();for(const e of t.pathGenerators.values())e.init(t)}push(t,e,i,r){for(let a=0;a<t;a++)this.addParticle(e?.position,i,r)}async redraw(){this.clear(),await this.init(),this.draw({value:0,factor:0})}remove(t,e,i){this.removeAt(this._array.indexOf(t),void 0,e,i)}removeAt(t,e=EO,i,r){if(t<hg||t>this.count)return;let a=0;for(let c=t;a<e&&c<this.count;c++)this._removeParticle(c,i,r)&&(c--,a++)}removeQuantity(t,e){this.removeAt(hg,t,e)}setDensity(){const t=this._container.actualOptions,e=t.particles.groups;for(const i in e)this._applyDensity(e[i],KO,i);this._applyDensity(t.particles,t.manualParticles.length)}setLastZIndex(t){this._lastZIndex=t,this._needsSort=this._needsSort||this._lastZIndex<t}setResizeFactor(t){this._resizeFactor=t}update(t){const e=this._container,i=new Set;this.quadTree=new Du(lb(e.canvas.size),H0);for(const a of e.pathGenerators.values())a.update();for(const a of e.plugins.values())a.update?.(t);const r=this._resizeFactor;for(const a of this._array){r&&!a.ignoresResizeRatio&&(a.position.x*=r.width,a.position.y*=r.height,a.initialPosition.x*=r.width,a.initialPosition.y*=r.height),a.ignoresResizeRatio=!1,this._interactionManager.reset(a);for(const c of this._container.plugins.values()){if(a.destroyed)break;c.particleUpdate?.(a,t)}for(const c of this.movers)c.isEnabled(a)&&c.move(a,t);if(a.destroyed){i.add(a);continue}this.quadTree.insert(new jD(a.getPosition(),a))}if(i.size){const a=c=>!i.has(c);this._array=this.filter(a),this._zArray=this._zArray.filter(a);for(const c of i)this._engine.dispatchEvent(He.particleRemoved,{container:this._container,data:{particle:c}});this._addToPool(...i)}this._interactionManager.externalInteract(t);for(const a of this._array){for(const c of this.updaters)c.update(a,t);!a.destroyed&&!a.spawning&&this._interactionManager.particlesInteract(a,t)}if(delete this._resizeFactor,this._needsSort){const a=this._zArray;a.sort((c,h)=>h.position.z-c.position.z||c.id-h.id),this._lastZIndex=a[a.length-lx].position.z,this._needsSort=!1}}}class PD{constructor(t){this.container=t,this.pixelRatio=Y0,this.reduceFactor=V0}init(){const t=this.container,e=t.actualOptions;this.pixelRatio=!e.detectRetina||gr()?Y0:window.devicePixelRatio,this.reduceFactor=V0;const i=this.pixelRatio,r=t.canvas;if(r.element){const h=r.element;r.size.width=h.offsetWidth*i,r.size.height=h.offsetHeight*i}const a=e.particles,c=a.move;this.maxSpeed=Q(c.gravity.maxSpeed)*i,this.sizeAnimationSpeed=Q(a.size.animation.speed)*i}initParticle(t){const e=t.options,i=this.pixelRatio,r=e.move,a=r.distance,c=t.retina;c.moveDrift=Q(r.drift)*i,c.moveSpeed=Q(r.speed)*i,c.sizeAnimationSpeed=Q(e.size.animation.speed)*i;const h=c.maxDistance;h.horizontal=a.horizontal!==void 0?a.horizontal*i:void 0,h.vertical=a.vertical!==void 0?a.vertical*i:void 0,c.maxSpeed=Q(r.gravity.maxSpeed)*i}}function $t(o){return o&&!o.destroyed}function BD(o,t=Ed,e=!1){return{value:o,factor:e?Ed/t:Ed*o/Zt}}function no(o,t,...e){const i=new ED(o,t);return zx(i,...e),i}class UD{constructor(t,e,i){this._intersectionManager=r=>{if(!(!$t(this)||!this.actualOptions.pauseOnOutsideViewport))for(const a of r)a.target===this.interactivity.element&&(a.isIntersecting?this.play():this.pause())},this._nextFrame=r=>{try{if(!this._smooth&&this._lastFrameTime!==void 0&&r<this._lastFrameTime+Zt/this.fpsLimit){this.draw(!1);return}this._lastFrameTime??=r;const a=BD(r-this._lastFrameTime,this.fpsLimit,this._smooth);if(this.addLifeTime(a.value),this._lastFrameTime=r,a.value>Zt){this.draw(!1);return}if(this.particles.draw(a),!this.alive()){this.destroy();return}this.animationStatus&&this.draw(!1)}catch(a){dr().error(`${Ri} in animation loop`,a)}},this._engine=t,this.id=Symbol(e),this.fpsLimit=120,this._smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this._lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._clickHandlers=new Map,this._sourceOptions=i,this._initialSourceOptions=i,this.retina=new PD(this),this.canvas=new H2(this,this._engine),this.particles=new LD(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this._options=no(this._engine,this),this.actualOptions=no(this._engine,this),this._eventListeners=new Y2(this),this._intersectionObserver=v2(r=>this._intersectionManager(r)),this._engine.dispatchEvent(He.containerBuilt,{container:this})}get animationStatus(){return!this._paused&&!this.pageHidden&&$t(this)}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(t){if(!$t(this))return;const e=this.interactivity.element;if(!e)return;const i=(y,v,_)=>{if(!$t(this))return;const S=this.retina.pixelRatio,w={x:v.x*S,y:v.y*S},C=this.particles.quadTree.queryCircle(w,_*S);t(y,C)},r=y=>{if(!$t(this))return;const v=y,_={x:v.offsetX||v.clientX,y:v.offsetY||v.clientY};i(y,_,BO)},a=()=>{$t(this)&&(g=!0,m=!1)},c=()=>{$t(this)&&(m=!0)},h=y=>{if($t(this)){if(g&&!m){const v=y;let _=v.touches[v.touches.length-G0];if(!_&&(_=v.changedTouches[v.changedTouches.length-G0],!_))return;const S=this.canvas.element,w=S?S.getBoundingClientRect():void 0,C={x:_.clientX-(w?w.left:Cu),y:_.clientY-(w?w.top:Cu)};i(y,C,Math.max(_.radiusX,_.radiusY))}g=!1,m=!1}},f=()=>{$t(this)&&(g=!1,m=!1)};let g=!1,m=!1;this._clickHandlers.set("click",r),this._clickHandlers.set("touchstart",a),this._clickHandlers.set("touchmove",c),this._clickHandlers.set("touchend",h),this._clickHandlers.set("touchcancel",f);for(const[y,v]of this._clickHandlers)e.addEventListener(y,v)}addLifeTime(t){this._lifeTime+=t}addPath(t,e,i=!1){return!$t(this)||!i&&this.pathGenerators.has(t)?!1:(this.pathGenerators.set(t,e),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}clearClickHandlers(){if($t(this)){for(const[t,e]of this._clickHandlers)this.interactivity.element?.removeEventListener(t,e);this._clickHandlers.clear()}}destroy(t=!0){if($t(this)){this.stop(),this.clearClickHandlers(),this.particles.destroy(),this.canvas.destroy();for(const e of this.effectDrawers.values())e.destroy?.(this);for(const e of this.shapeDrawers.values())e.destroy?.(this);for(const e of this.effectDrawers.keys())this.effectDrawers.delete(e);for(const e of this.shapeDrawers.keys())this.shapeDrawers.delete(e);if(this._engine.clearPlugins(this),this.destroyed=!0,t){const e=this._engine.items,i=e.findIndex(r=>r===this);i>=UO&&e.splice(i,ox)}this._engine.dispatchEvent(He.containerDestroyed,{container:this})}}draw(t){if(!$t(this))return;let e=t;const i=r=>{e&&(this._lastFrameTime=void 0,e=!1),this._nextFrame(r)};this._drawAnimationFrame=c2(r=>i(r))}async export(t,e={}){for(const i of this.plugins.values()){if(!i.export)continue;const r=await i.export(t,e);if(r.supported)return r.blob}dr().error(`${Ri} - Export plugin with type ${t} not found`)}handleClickMode(t){if($t(this)){this.particles.handleClickMode(t);for(const e of this.plugins.values())e.handleClickMode?.(t)}}async init(){if(!$t(this))return;const t=this._engine.getSupportedEffects();for(const g of t){const m=this._engine.getEffectDrawer(g);m&&this.effectDrawers.set(g,m)}const e=this._engine.getSupportedShapes();for(const g of e){const m=this._engine.getShapeDrawer(g);m&&this.shapeDrawers.set(g,m)}await this.particles.initPlugins(),this._options=no(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=no(this._engine,this,this._options);const i=await this._engine.getAvailablePlugins(this);for(const[g,m]of i)this.plugins.set(g,m);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize();const{zLayers:r,duration:a,delay:c,fpsLimit:h,smooth:f}=this.actualOptions;this.zLayers=r,this._duration=Q(a)*Zt,this._delay=Q(c)*Zt,this._lifeTime=0,this.fpsLimit=h>HO?h:FO,this._smooth=f;for(const g of this.effectDrawers.values())await g.init?.(this);for(const g of this.shapeDrawers.values())await g.init?.(this);for(const g of this.plugins.values())await g.init?.();this._engine.dispatchEvent(He.containerInit,{container:this}),await this.particles.init(),this.particles.setDensity();for(const g of this.plugins.values())g.particlesSetup?.();this._engine.dispatchEvent(He.particlesSetup,{container:this})}async loadTheme(t){$t(this)&&(this._currentTheme=t,await this.refresh())}pause(){if($t(this)&&(this._drawAnimationFrame!==void 0&&(u2(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const t of this.plugins.values())t.pause?.();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent(He.containerPaused,{container:this})}}play(t){if(!$t(this))return;const e=this._paused||t;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),e)for(const i of this.plugins.values())i.play&&i.play();this._engine.dispatchEvent(He.containerPlay,{container:this}),this.draw(e??!1)}async refresh(){if($t(this))return this.stop(),this.start()}async reset(t){if($t(this))return this._initialSourceOptions=t,this._sourceOptions=t,this._options=no(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=no(this._engine,this,this._options),this.refresh()}async start(){!$t(this)||this.started||(await this.init(),this.started=!0,await new Promise(t=>{const e=async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const i of this.plugins.values())await i.start?.();this._engine.dispatchEvent(He.containerStarted,{container:this}),this.play(),t()};this._delayTimeout=setTimeout(()=>void e(),this._delay)}))}stop(){if(!(!$t(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const t of this.plugins.values())t.stop?.();for(const t of this.plugins.keys())this.plugins.delete(t);this._sourceOptions=this._options,this._engine.dispatchEvent(He.containerStopped,{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const t=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this._responsiveMaxWidth===t?!1:(this._responsiveMaxWidth=t,!0)}}class FD{constructor(){this._listeners=new Map}addEventListener(t,e){this.removeEventListener(t,e);let i=this._listeners.get(t);i||(i=[],this._listeners.set(t,i)),i.push(e)}dispatchEvent(t,e){this._listeners.get(t)?.forEach(r=>r(e))}hasEventListener(t){return!!this._listeners.get(t)}removeAllEventListeners(t){t?this._listeners.delete(t):this._listeners=new Map}removeEventListener(t,e){const i=this._listeners.get(t);if(!i)return;const r=i.length,a=i.indexOf(e);a<hg||(r===Ou?this._listeners.delete(t):i.splice(a,Ou))}}async function Ud(o,t,e,i=!1){let r=t.get(o);return(!r||i)&&(r=await Promise.all([...e.values()].map(a=>a(o))),t.set(o,r)),r}async function HD(o){const t=ke(o.url,o.index);if(!t)return o.fallback;const e=await fetch(t);return e.ok?await e.json():(dr().error(`${Ri} ${e.status} while retrieving config file`),o.fallback)}const YD=o=>{let t;if(o instanceof HTMLCanvasElement||o.tagName.toLowerCase()===kd)t=o,t.dataset[sr]||(t.dataset[sr]=U0);else{const i=o.getElementsByTagName(kd);i.length?(t=i[YO],t.dataset[sr]=U0):(t=document.createElement(kd),t.dataset[sr]=sx,o.appendChild(t))}const e="100%";return t.style.width||(t.style.width=e),t.style.height||(t.style.height=e),t},VD=(o,t)=>{let e=t??document.getElementById(o);return e||(e=document.createElement("div"),e.id=o,e.dataset[sr]=sx,document.body.append(e),e)};class ND{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new FD,this._initialized=!1,this.plugins=[],this.colorManagers=new Map,this.easingFunctions=new Map,this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this.pathGenerators=new Map}get configs(){const t={};for(const[e,i]of this._configs)t[e]=i;return t}get items(){return this._domArray}get version(){return"3.8.1"}async addColorManager(t,e=!0){this.colorManagers.set(t.key,t),await this.refresh(e)}addConfig(t){const e=t.key??t.name??"default";this._configs.set(e,t),this._eventDispatcher.dispatchEvent(He.configAdded,{data:{name:e,config:t}})}async addEasing(t,e,i=!0){this.getEasing(t)||(this.easingFunctions.set(t,e),await this.refresh(i))}async addEffect(t,e,i=!0){he(t,r=>{this.getEffectDrawer(r)||this.effectDrawers.set(r,e)}),await this.refresh(i)}addEventListener(t,e){this._eventDispatcher.addEventListener(t,e)}async addInteractor(t,e,i=!0){this._initializers.interactors.set(t,e),await this.refresh(i)}async addMover(t,e,i=!0){this._initializers.movers.set(t,e),await this.refresh(i)}async addParticleUpdater(t,e,i=!0){this._initializers.updaters.set(t,e),await this.refresh(i)}async addPathGenerator(t,e,i=!0){this.getPathGenerator(t)||this.pathGenerators.set(t,e),await this.refresh(i)}async addPlugin(t,e=!0){this.getPlugin(t.id)||this.plugins.push(t),await this.refresh(e)}async addPreset(t,e,i=!1,r=!0){(i||!this.getPreset(t))&&this.presets.set(t,e),await this.refresh(r)}async addShape(t,e=!0){for(const i of t.validTypes)this.getShapeDrawer(i)||this.shapeDrawers.set(i,t);await this.refresh(e)}checkVersion(t){if(this.version!==t)throw new Error(`The tsParticles version is different from the loaded plugins version. Engine version: ${this.version}. Plugin version: ${t}`)}clearPlugins(t){this.updaters.delete(t),this.movers.delete(t),this.interactors.delete(t)}dispatchEvent(t,e){this._eventDispatcher.dispatchEvent(t,e)}dom(){return this.items}domItem(t){return this.item(t)}async getAvailablePlugins(t){const e=new Map;for(const i of this.plugins)i.needsPlugin(t.actualOptions)&&e.set(i.id,await i.getPlugin(t));return e}getEasing(t){return this.easingFunctions.get(t)??(e=>e)}getEffectDrawer(t){return this.effectDrawers.get(t)}async getInteractors(t,e=!1){return Ud(t,this.interactors,this._initializers.interactors,e)}async getMovers(t,e=!1){return Ud(t,this.movers,this._initializers.movers,e)}getPathGenerator(t){return this.pathGenerators.get(t)}getPlugin(t){return this.plugins.find(e=>e.id===t)}getPreset(t){return this.presets.get(t)}getShapeDrawer(t){return this.shapeDrawers.get(t)}getSupportedEffects(){return this.effectDrawers.keys()}getSupportedShapes(){return this.shapeDrawers.keys()}async getUpdaters(t,e=!1){return Ud(t,this.updaters,this._initializers.updaters,e)}init(){this._initialized||(this._initialized=!0)}item(t){const{items:e}=this,i=e[t];if(!i||i.destroyed){e.splice(t,ox);return}return i}async load(t){const e=t.id??t.element?.id??`tsparticles${Math.floor(ft()*VO)}`,{index:i,url:r}=t,a=r?await HD({fallback:t.options,url:r,index:i}):t.options,c=ke(a,i),{items:h}=this,f=h.findIndex(v=>v.id.description===e),g=new UD(this,e,c);if(f>=NO){const v=this.item(f),_=v?XO:Tu;v&&!v.destroyed&&v.destroy(!1),h.splice(f,_,g)}else h.push(g);const m=VD(e,t.element),y=YD(m);return g.canvas.loadCanvas(y),await g.start(),g}loadOptions(t,e){this.plugins.forEach(i=>i.loadOptions?.(t,e))}loadParticlesOptions(t,e,...i){const r=this.updaters.get(t);r&&r.forEach(a=>a.loadOptions?.(e,...i))}async refresh(t=!0){t&&await Promise.all(this.items.map(e=>e.refresh()))}removeEventListener(t,e){this._eventDispatcher.removeEventListener(t,e)}setOnClickHandler(t){const{items:e}=this;if(!e.length)throw new Error(`${Ri} can only set click handlers after calling tsParticles.load()`);e.forEach(i=>i.addClickHandler(t))}}function XD(){const o=new ND;return o.init(),o}class Ki{constructor(t){this.type=Eo.external,this.container=t}}class Gg{constructor(t){this.type=Eo.particles,this.container=t}}var Ve;(function(o){o.clockwise="clockwise",o.counterClockwise="counter-clockwise",o.random="random"})(Ve||(Ve={}));var cb;(function(o){o.linear="linear",o.radial="radial",o.random="random"})(cb||(cb={}));var ur;(function(o){o.easeInBack="ease-in-back",o.easeInCirc="ease-in-circ",o.easeInCubic="ease-in-cubic",o.easeInLinear="ease-in-linear",o.easeInQuad="ease-in-quad",o.easeInQuart="ease-in-quart",o.easeInQuint="ease-in-quint",o.easeInExpo="ease-in-expo",o.easeInSine="ease-in-sine",o.easeOutBack="ease-out-back",o.easeOutCirc="ease-out-circ",o.easeOutCubic="ease-out-cubic",o.easeOutLinear="ease-out-linear",o.easeOutQuad="ease-out-quad",o.easeOutQuart="ease-out-quart",o.easeOutQuint="ease-out-quint",o.easeOutExpo="ease-out-expo",o.easeOutSine="ease-out-sine",o.easeInOutBack="ease-in-out-back",o.easeInOutCirc="ease-in-out-circ",o.easeInOutCubic="ease-in-out-cubic",o.easeInOutLinear="ease-in-out-linear",o.easeInOutQuad="ease-in-out-quad",o.easeInOutQuart="ease-in-out-quart",o.easeInOutQuint="ease-in-out-quint",o.easeInOutExpo="ease-in-out-expo",o.easeInOutSine="ease-in-out-sine"})(ur||(ur={}));const Ig=XD();gr()||(window.tsParticles=Ig);const qD=o=>{const t=o.id??"tsparticles";return Mi.useEffect(()=>{let e;return Ig.load({id:t,url:o.url,options:o.options}).then(i=>{var r;e=i,(r=o.particlesLoaded)==null||r.call(o,i)}),()=>{e?.destroy()}},[t,o,o.url,o.options]),At.jsx("div",{id:t,className:o.className})};async function GD(o){await o(Ig)}class ID{constructor(){this.radius=0,this.mass=0}load(t){G(t)||(t.mass!==void 0&&(this.mass=t.mass),t.radius!==void 0&&(this.radius=t.radius))}}class WD extends Zi{constructor(){super(),this.density=5,this.value=50,this.limit=new ID}load(t){G(t)||(super.load(t),t.density!==void 0&&(this.density=t.density),di(t.limit)?this.limit.radius=t.limit:this.limit.load(t.limit))}}class Mu{constructor(){this.color=new re,this.color.value="#000000",this.draggable=!1,this.opacity=1,this.destroy=!0,this.orbits=!1,this.size=new WD}load(t){G(t)||(t.color!==void 0&&(this.color=re.create(this.color,t.color)),t.draggable!==void 0&&(this.draggable=t.draggable),this.name=t.name,t.opacity!==void 0&&(this.opacity=t.opacity),t.position!==void 0&&(this.position={},t.position.x!==void 0&&(this.position.x=rt(t.position.x)),t.position.y!==void 0&&(this.position.y=rt(t.position.y))),t.size!==void 0&&this.size.load(t.size),t.destroy!==void 0&&(this.destroy=t.destroy),t.orbits!==void 0&&(this.orbits=t.orbits))}}var Eu;(function(o){o.absorber="absorber"})(Eu||(Eu={}));const QD=2,ZD=.033,KD=0,JD=0,$D=0,tM=0,eM=2,ub=Math.PI*eM,hb=0;class iM{constructor(t,e,i,r,a){this._calcPosition=()=>{const h=dx({size:this._container.canvas.size,position:this.options.position});return Vt.create(h.x,h.y)},this._updateParticlePosition=(h,f)=>{if(h.destroyed)return;const g=this._container,m=g.canvas.size;if(h.needsNewPosition){const y=fx({size:m});h.position.setTo(y),h.velocity.setTo(h.initialVelocity),h.absorberOrbit=void 0,h.needsNewPosition=!1}if(this.options.orbits){if(h.absorberOrbit===void 0&&(h.absorberOrbit=Vt.origin,h.absorberOrbit.length=Ne(h.getPosition(),this.position),h.absorberOrbit.angle=ft()*ub),h.absorberOrbit.length<=this.size&&!this.options.destroy){const w=Math.min(m.width,m.height),C=1,k=.1,z=.2;h.absorberOrbit.length=w*(C+(ft()*z-k))}h.absorberOrbitDirection===void 0&&(h.absorberOrbitDirection=h.velocity.x>=hb?Ve.clockwise:Ve.counterClockwise);const y=h.absorberOrbit.length,v=h.absorberOrbit.angle,_=h.absorberOrbitDirection;h.velocity.setTo(Vt.origin);const S={x:_===Ve.clockwise?Math.cos:Math.sin,y:_===Ve.clockwise?Math.sin:Math.cos};h.position.x=this.position.x+y*S.x(v),h.position.y=this.position.y+y*S.y(v),h.absorberOrbit.length-=f.length,h.absorberOrbit.angle+=(h.retina.moveSpeed??hb)*g.retina.pixelRatio/De*g.retina.reduceFactor}else{const y=Vt.origin;y.length=f.length,y.angle=f.angle,h.velocity.addTo(y)}},this._absorbers=t,this._container=e,this._engine=i,this.initialPosition=a?Vt.create(a.x,a.y):void 0,r instanceof Mu?this.options=r:(this.options=new Mu,this.options.load(r)),this.dragging=!1,this.name=this.options.name,this.opacity=this.options.opacity,this.size=Q(this.options.size.value)*e.retina.pixelRatio,this.mass=this.size*this.options.size.density*e.retina.reduceFactor;const c=this.options.size.limit;this.limit={radius:c.radius*e.retina.pixelRatio*e.retina.reduceFactor,mass:c.mass},this.color=ki(this._engine,this.options.color)??{b:0,g:0,r:0},this.position=this.initialPosition?.copy()??this._calcPosition()}attract(t){const e=this._container,i=this.options;if(i.draggable){const g=e.interactivity.mouse;g.clicking&&g.downPosition?Ne(this.position,g.downPosition)<=this.size&&(this.dragging=!0):this.dragging=!1,this.dragging&&g.position&&(this.position.x=g.position.x,this.position.y=g.position.y)}const r=t.getPosition(),{dx:a,dy:c,distance:h}=Pe(this.position,r),f=Vt.create(a,c);if(f.length=this.mass/Math.pow(h,QD)*e.retina.reduceFactor,h<this.size+t.getRadius()){const g=t.getRadius()*ZD*e.retina.pixelRatio;this.size>t.getRadius()&&h<this.size-t.getRadius()||t.absorberOrbit!==void 0&&t.absorberOrbit.length<KD?i.destroy?t.destroy():(t.needsNewPosition=!0,this._updateParticlePosition(t,f)):(i.destroy&&(t.size.value-=g),this._updateParticlePosition(t,f)),(this.limit.radius<=JD||this.size<this.limit.radius)&&(this.size+=g),(this.limit.mass<=$D||this.mass<this.limit.mass)&&(this.mass+=g*this.options.size.density*e.retina.reduceFactor)}else this._updateParticlePosition(t,f)}draw(t){t.translate(this.position.x,this.position.y),t.beginPath(),t.arc(xe.x,xe.y,this.size,tM,ub,!1),t.closePath(),t.fillStyle=hn(this.color,this.opacity),t.fill()}resize(){const t=this.initialPosition;this.position=t&&ol(t,this._container.canvas.size,Vt.origin)?t:this._calcPosition()}}const fb=0;class nM{constructor(t,e){this._container=t,this._engine=e,this.array=[],this.absorbers=[],this.interactivityAbsorbers=[],t.getAbsorber=i=>i===void 0||di(i)?this.array[i??fb]:this.array.find(r=>r.name===i),t.addAbsorber=async(i,r)=>this.addAbsorber(i,r)}async addAbsorber(t,e){const i=new iM(this,this._container,this._engine,t,e);return this.array.push(i),Promise.resolve(i)}draw(t){for(const e of this.array)e.draw(t)}handleClickMode(t){const e=this.absorbers,i=this.interactivityAbsorbers;if(t===Eu.absorber){const r=ke(i),a=r??ke(e),c=this._container.interactivity.mouse.clickPosition;this.addAbsorber(a,c)}}async init(){this.absorbers=this._container.actualOptions.absorbers,this.interactivityAbsorbers=this._container.actualOptions.interactivity.modes.absorbers;const t=he(this.absorbers,async e=>{await this.addAbsorber(e)});t instanceof Array?await Promise.all(t):await t}particleUpdate(t){for(const e of this.array)if(e.attract(t),t.destroyed)break}removeAbsorber(t){const e=this.array.indexOf(t);e>=fb&&this.array.splice(e,1)}resize(){for(const t of this.array)t.resize()}stop(){this.array=[]}}class sM{constructor(t){this.id="absorbers",this._engine=t}async getPlugin(t){return Promise.resolve(new nM(t,this._engine))}loadOptions(t,e){!this.needsPlugin(t)&&!this.needsPlugin(e)||(e?.absorbers&&(t.absorbers=he(e.absorbers,i=>{const r=new Mu;return r.load(i),r})),t.interactivity.modes.absorbers=he(e?.interactivity?.modes?.absorbers,i=>{const r=new Mu;return r.load(i),r}))}needsPlugin(t){if(!t)return!1;const e=t.absorbers;return Le(e)?!!e.length:e?!0:!!(t.interactivity?.events?.onClick?.mode&&qt(Eu.absorber,t.interactivity.events.onClick.mode))}}async function rM(o,t=!0){o.checkVersion("3.8.1"),await o.addPlugin(new sM(o),t)}class oM{load(t){G(t)||(t.bottom!==void 0&&(this.bottom=rt(t.bottom)),t.left!==void 0&&(this.left=rt(t.left)),t.right!==void 0&&(this.right=rt(t.right)),t.top!==void 0&&(this.top=rt(t.top)))}}var ku;(function(o){o.none="none",o.split="split"})(ku||(ku={}));class aM extends Zi{constructor(){super(),this.value=3}}class lM extends Zi{constructor(){super(),this.value={min:4,max:9}}}class cM{constructor(){this.count=1,this.factor=new aM,this.rate=new lM,this.sizeOffset=!0}load(t){G(t)||(t.color!==void 0&&(this.color=re.create(this.color,t.color)),t.count!==void 0&&(this.count=t.count),this.factor.load(t.factor),this.rate.load(t.rate),this.particles=he(t.particles,e=>ue({},e)),t.sizeOffset!==void 0&&(this.sizeOffset=t.sizeOffset),t.colorOffset&&(this.colorOffset=this.colorOffset??{},t.colorOffset.h!==void 0&&(this.colorOffset.h=t.colorOffset.h),t.colorOffset.s!==void 0&&(this.colorOffset.s=t.colorOffset.s),t.colorOffset.l!==void 0&&(this.colorOffset.l=t.colorOffset.l)))}}class uM{constructor(){this.bounds=new oM,this.mode=ku.none,this.split=new cM}load(t){G(t)||(t.mode&&(this.mode=t.mode),t.bounds&&this.bounds.load(t.bounds),this.split.load(t.split))}}const Wc=0,hM=.5,fM=0,dM=1,gM=500,pM=0;function mM(o,t,e,i){const r=e.options.destroy;if(!r)return;const a=r.split,c=qg(o,t,e.options),h=Q(a.factor.value),f=e.getFillColor();a.color?c.color.load(a.color):a.colorOffset&&f?c.color.load({value:{hsl:{h:f.h+Q(a.colorOffset.h??Wc),s:f.s+Q(a.colorOffset.s??Wc),l:f.l+Q(a.colorOffset.l??Wc)}}}):c.color.load({value:{hsl:e.getFillColor()}}),c.move.load({center:{x:e.position.x,y:e.position.y,mode:dn.precise}}),di(c.size.value)?c.size.value/=h:(c.size.value.min/=h,c.size.value.max/=h),c.load(i);const g=a.sizeOffset?rt(-e.size.value,e.size.value):Wc,m={x:e.position.x+Ee(g),y:e.position.y+Ee(g)};return t.particles.addParticle(m,c,e.group,y=>y.size.value<hM?!1:(y.velocity.length=Ee(rt(e.velocity.length,y.velocity.length)),y.splitCount=(e.splitCount??fM)+dM,y.unbreakable=!0,setTimeout(()=>{y.unbreakable=!1},gM),!0))}function yM(o,t,e){const i=e.options.destroy;if(!i)return;const r=i.split;if(r.count>=pM&&(e.splitCount===void 0||e.splitCount++>r.count))return;const a=Q(r.rate.value),c=ke(r.particles);for(let h=0;h<a;h++)mM(o,t,e,c)}class vM{constructor(t,e){this.container=e,this.engine=t}init(t){const e=this.container,i=t.options,r=i.destroy;if(!r)return;t.splitCount=0;const a=r.bounds;t.destroyBounds||(t.destroyBounds={});const{bottom:c,left:h,right:f,top:g}=a,{destroyBounds:m}=t,y=e.canvas.size;c&&(m.bottom=Q(c)*y.height/De),h&&(m.left=Q(h)*y.width/De),f&&(m.right=Q(f)*y.width/De),g&&(m.top=Q(g)*y.height/De)}isEnabled(t){return!t.destroyed}loadOptions(t,...e){t.destroy||(t.destroy=new uM);for(const i of e)t.destroy.load(i?.destroy)}particleDestroyed(t,e){if(e)return;const i=t.options.destroy;i&&i.mode===ku.split&&yM(this.engine,this.container,t)}update(t){if(!this.isEnabled(t))return;const e=t.getPosition(),i=t.destroyBounds;i&&(i.bottom!==void 0&&e.y>=i.bottom||i.left!==void 0&&e.x<=i.left||i.right!==void 0&&e.x>=i.right||i.top!==void 0&&e.y<=i.top)&&t.destroy()}}async function bM(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("destroy",e=>Promise.resolve(new vM(o,e)),t)}class _M{constructor(){this.wait=!1}load(t){G(t)||(t.count!==void 0&&(this.count=t.count),t.delay!==void 0&&(this.delay=rt(t.delay)),t.duration!==void 0&&(this.duration=rt(t.duration)),t.wait!==void 0&&(this.wait=t.wait))}}class xM{constructor(){this.quantity=1,this.delay=.1}load(t){G(t)||(t.quantity!==void 0&&(this.quantity=rt(t.quantity)),t.delay!==void 0&&(this.delay=rt(t.delay)))}}class SM{constructor(){this.color=!1,this.opacity=!1}load(t){G(t)||(t.color!==void 0&&(this.color=t.color),t.opacity!==void 0&&(this.opacity=t.opacity))}}class wM{constructor(){this.options={},this.replace=new SM,this.type="square"}load(t){G(t)||(t.options!==void 0&&(this.options=ue({},t.options??{})),this.replace.load(t.replace),t.type!==void 0&&(this.type=t.type))}}class jx{constructor(){this.mode=dn.percent,this.height=0,this.width=0}load(t){G(t)||(t.mode!==void 0&&(this.mode=t.mode),t.height!==void 0&&(this.height=t.height),t.width!==void 0&&(this.width=t.width))}}class bs{constructor(){this.autoPlay=!0,this.fill=!0,this.life=new _M,this.rate=new xM,this.shape=new wM,this.startCount=0}load(t){G(t)||(t.autoPlay!==void 0&&(this.autoPlay=t.autoPlay),t.size!==void 0&&(this.size||(this.size=new jx),this.size.load(t.size)),t.direction!==void 0&&(this.direction=t.direction),this.domId=t.domId,t.fill!==void 0&&(this.fill=t.fill),this.life.load(t.life),this.name=t.name,this.particles=he(t.particles,e=>ue({},e)),this.rate.load(t.rate),this.shape.load(t.shape),t.position!==void 0&&(this.position={},t.position.x!==void 0&&(this.position.x=rt(t.position.x)),t.position.y!==void 0&&(this.position.y=rt(t.position.y))),t.spawnColor!==void 0&&(this.spawnColor===void 0&&(this.spawnColor=new Mo),this.spawnColor.load(t.spawnColor)),t.startCount!==void 0&&(this.startCount=t.startCount))}}var Au;(function(o){o.emitter="emitter"})(Au||(Au={}));const db=.5,gb=0,Qc=0,pb=0,CM=0,TM=-1,OM=1;function mb(o,t){o.color?o.color.value=t:o.color={value:t}}class DM{constructor(t,e,i,r,a){this.emitters=e,this.container=i,this._destroy=()=>{this._mutationObserver?.disconnect(),this._mutationObserver=void 0,this._resizeObserver?.disconnect(),this._resizeObserver=void 0,this.emitters.removeEmitter(this),this._engine.dispatchEvent("emitterDestroyed",{container:this.container,data:{emitter:this}})},this._prepareToDie=()=>{if(this._paused)return;const g=this.options.life?.duration!==void 0?Q(this.options.life.duration):void 0;this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal)&&g!==void 0&&g>0&&(this._duration=g*Zt)},this._setColorAnimation=(g,m,y,v=OM)=>{const _=this.container;if(!g.enable)return m;const S=Ee(g.offset),w=Q(this.options.rate.delay),C=w*Zt/_.retina.reduceFactor,k=0,z=Q(g.speed??k);return(m+z*_.fpsLimit/C+S*v)%y},this._engine=t,this._currentDuration=0,this._currentEmitDelay=0,this._currentSpawnDelay=0,this._initialPosition=a,r instanceof bs?this.options=r:(this.options=new bs,this.options.load(r)),this._spawnDelay=Q(this.options.life.delay??gb)*Zt/this.container.retina.reduceFactor,this.position=this._initialPosition??this._calcPosition(),this.name=this.options.name,this.fill=this.options.fill,this._firstSpawn=!this.options.life.wait,this._startParticlesAdded=!1;let c=ue({},this.options.particles);if(c??={},c.move??={},c.move.direction??=this.options.direction,this.options.spawnColor&&(this.spawnColor=Ds(this._engine,this.options.spawnColor)),this._paused=!this.options.autoPlay,this._particlesOptions=c,this._size=this._calcSize(),this.size=eb(this._size,this.container.canvas.size),this._lifeCount=this.options.life.count??TM,this._immortal=this._lifeCount<=Qc,this.options.domId){const g=document.getElementById(this.options.domId);g&&(this._mutationObserver=new MutationObserver(()=>{this.resize()}),this._resizeObserver=new ResizeObserver(()=>{this.resize()}),this._mutationObserver.observe(g,{attributes:!0,attributeFilter:["style","width","height"]}),this._resizeObserver.observe(g))}const h=this.options.shape,f=this._engine.emitterShapeManager?.getShapeGenerator(h.type);f&&(this._shape=f.generate(this.position,this.size,this.fill,h.options)),this._engine.dispatchEvent("emitterCreated",{container:i,data:{emitter:this}}),this.play()}externalPause(){this._paused=!0,this.pause()}externalPlay(){this._paused=!1,this.play()}async init(){await this._shape?.init()}pause(){this._paused||delete this._emitDelay}play(){if(!this._paused&&this.container.retina.reduceFactor&&(this._lifeCount>Qc||this._immortal||!this.options.life.count)&&(this._firstSpawn||this._currentSpawnDelay>=(this._spawnDelay??pb))){if(this._emitDelay===void 0){const t=Q(this.options.rate.delay);this._emitDelay=t*Zt/this.container.retina.reduceFactor}(this._lifeCount>Qc||this._immortal)&&this._prepareToDie()}}resize(){const t=this._initialPosition;this.position=t&&ol(t,this.container.canvas.size,Vt.origin)?t:this._calcPosition(),this._size=this._calcSize(),this.size=eb(this._size,this.container.canvas.size),this._shape?.resize(this.position,this.size)}update(t){this._paused||(this._firstSpawn&&(this._firstSpawn=!1,this._currentSpawnDelay=this._spawnDelay??pb,this._currentEmitDelay=this._emitDelay??CM),this._startParticlesAdded||(this._startParticlesAdded=!0,this._emitParticles(this.options.startCount)),this._duration!==void 0&&(this._currentDuration+=t.value,this._currentDuration>=this._duration&&(this.pause(),this._spawnDelay!==void 0&&delete this._spawnDelay,this._immortal||this._lifeCount--,this._lifeCount>Qc||this._immortal?(this.position=this._calcPosition(),this._shape?.resize(this.position,this.size),this._spawnDelay=Q(this.options.life.delay??gb)*Zt/this.container.retina.reduceFactor):this._destroy(),this._currentDuration-=this._duration,delete this._duration)),this._spawnDelay!==void 0&&(this._currentSpawnDelay+=t.value,this._currentSpawnDelay>=this._spawnDelay&&(this._engine.dispatchEvent("emitterPlay",{container:this.container}),this.play(),this._currentSpawnDelay-=this._currentSpawnDelay,delete this._spawnDelay)),this._emitDelay!==void 0&&(this._currentEmitDelay+=t.value,this._currentEmitDelay>=this._emitDelay&&(this._emit(),this._currentEmitDelay-=this._emitDelay)))}_calcPosition(){if(this.options.domId){const t=document.getElementById(this.options.domId);if(t){const e=t.getBoundingClientRect(),i=this.container.retina.pixelRatio;return{x:(e.x+e.width*db)*i,y:(e.y+e.height*db)*i}}}return dx({size:this.container.canvas.size,position:this.options.position})}_calcSize(){const t=this.container;if(this.options.domId){const e=document.getElementById(this.options.domId);if(e){const i=e.getBoundingClientRect();return{width:i.width*t.retina.pixelRatio,height:i.height*t.retina.pixelRatio,mode:dn.precise}}}return this.options.size??(()=>{const e=new jx;return e.load({height:0,mode:dn.percent,width:0}),e})()}_emit(){if(this._paused)return;const t=Q(this.options.rate.quantity);this._emitParticles(t)}_emitParticles(t){const e=ke(this._particlesOptions);for(let i=0;i<t;i++){const r=ue({},e);if(this.spawnColor){const h=this.options.spawnColor?.animation;if(h){const f={h:360,s:100,l:100},g=3.6;this.spawnColor.h=this._setColorAnimation(h.h,this.spawnColor.h,f.h,g),this.spawnColor.s=this._setColorAnimation(h.s,this.spawnColor.s,f.s),this.spawnColor.l=this._setColorAnimation(h.l,this.spawnColor.l,f.l)}mb(r,this.spawnColor)}const a=this.options.shape;let c=this.position;if(this._shape){const h=this._shape.randomPosition();if(h){c=h.position;const f=a.replace;f.color&&h.color&&mb(r,h.color),f.opacity&&(r.opacity?r.opacity.value=h.opacity:r.opacity={value:h.opacity})}else c=null}c&&this.container.particles.addParticle(c,r)}}}class MM{constructor(t,e){this.container=e,this._engine=t,this.array=[],this.emitters=[],this.interactivityEmitters={random:{count:1,enable:!1},value:[]};const i=0;e.getEmitter=r=>r===void 0||di(r)?this.array[r??i]:this.array.find(a=>a.name===r),e.addEmitter=async(r,a)=>this.addEmitter(r,a),e.removeEmitter=r=>{const a=e.getEmitter(r);a&&this.removeEmitter(a)},e.playEmitter=r=>{const a=e.getEmitter(r);a&&a.externalPlay()},e.pauseEmitter=r=>{const a=e.getEmitter(r);a&&a.externalPause()}}async addEmitter(t,e){const i=new bs;i.load(t);const r=new DM(this._engine,this,this.container,i,e);return await r.init(),this.array.push(r),r}handleClickMode(t){const e=this.emitters,i=this.interactivityEmitters;if(t!==Au.emitter)return;let r;if(i&&Le(i.value))if(i.value.length>0&&i.random.enable){r=[];const f=[];for(let g=0;g<i.random.count;g++){const m=mx(i.value);if(f.includes(m)&&f.length<i.value.length){g--;continue}f.push(m),r.push(rl(i.value,m))}}else r=i.value;else r=i?.value;const a=r??e,c=this.container.interactivity.mouse.clickPosition;he(a,async h=>{await this.addEmitter(h,c)})}async init(){if(this.emitters=this.container.actualOptions.emitters,this.interactivityEmitters=this.container.actualOptions.interactivity.modes.emitters,!!this.emitters)if(Le(this.emitters))for(const t of this.emitters)await this.addEmitter(t);else await this.addEmitter(this.emitters)}pause(){for(const t of this.array)t.pause()}play(){for(const t of this.array)t.play()}removeEmitter(t){const e=this.array.indexOf(t);e>=0&&this.array.splice(e,1)}resize(){for(const t of this.array)t.resize()}stop(){this.array=[]}update(t){for(const e of this.array)e.update(t)}}class EM{constructor(t){this._engine=t,this.id="emitters"}getPlugin(t){return Promise.resolve(new MM(this._engine,t))}loadOptions(t,e){if(!this.needsPlugin(t)&&!this.needsPlugin(e))return;e?.emitters&&(t.emitters=he(e.emitters,r=>{const a=new bs;return a.load(r),a}));const i=e?.interactivity?.modes?.emitters;if(i)if(Le(i))t.interactivity.modes.emitters={random:{count:1,enable:!0},value:i.map(r=>{const a=new bs;return a.load(r),a})};else{const r=i;if(r.value!==void 0)if(Le(r.value))t.interactivity.modes.emitters={random:{count:r.random.count??1,enable:r.random.enable??!1},value:r.value.map(c=>{const h=new bs;return h.load(c),h})};else{const c=new bs;c.load(r.value),t.interactivity.modes.emitters={random:{count:r.random.count??1,enable:r.random.enable??!1},value:c}}else(t.interactivity.modes.emitters={random:{count:1,enable:!1},value:new bs}).value.load(i)}}needsPlugin(t){if(!t)return!1;const e=t.emitters;return Le(e)&&!!e.length||e!==void 0||!!t.interactivity?.events?.onClick?.mode&&qt(Au.emitter,t.interactivity.events.onClick.mode)}}const Fd=new Map;class kM{constructor(t){this._engine=t}addShapeGenerator(t,e){this.getShapeGenerator(t)||Fd.set(t,e)}getShapeGenerator(t){return Fd.get(t)}getSupportedShapeGenerators(){return Fd.keys()}}class Lx{constructor(t,e,i,r){this.position=t,this.size=e,this.fill=i,this.options=r}resize(t,e){this.position=t,this.size=e}}async function AM(o,t=!0){o.checkVersion("3.8.1"),o.emitterShapeManager||(o.emitterShapeManager=new kM(o)),o.addEmitterShapeGenerator||(o.addEmitterShapeGenerator=(i,r)=>{o.emitterShapeManager?.addShapeGenerator(i,r)});const e=new EM(o);await o.addPlugin(e,t)}const Fa=.25,mg=2,zM=Math.PI*mg,yb=2,vb=.5;class RM extends Lx{constructor(t,e,i,r){super(t,e,i,r)}async init(){}randomPosition(){const t=this.size,e=this.fill,i=this.position,r=(y,v)=>{const _=ft()*Fa,S=Math.atan(v/y*Math.tan(zM*_)),w=ft();return w<Fa?S:w<mg*Fa?Math.PI-S:w<mg*Fa+Fa?Math.PI+S:-S},a=(y,v,_)=>y*v/Math.sqrt((v*Math.cos(_))**yb+(y*Math.sin(_))**yb),[c,h]=[t.width*vb,t.height*vb],f=r(c,h),g=a(c,h,f),m=e?g*Math.sqrt(ft()):g;return{position:{x:i.x+m*Math.cos(f),y:i.y+m*Math.sin(f)}}}}class jM{generate(t,e,i,r){return new RM(t,e,i,r)}}async function LM(o,t=!0){const e=o;e.checkVersion("3.8.1"),e.addEmitterShapeGenerator?.("circle",new jM),await e.refresh(t)}const PM=4;var ho;(function(o){o[o.TopLeft=0]="TopLeft",o[o.TopRight=1]="TopRight",o[o.BottomRight=2]="BottomRight",o[o.BottomLeft=3]="BottomLeft"})(ho||(ho={}));function bb(o,t){return o+t*(ft()-Xt)}class BM extends Lx{constructor(t,e,i,r){super(t,e,i,r)}async init(){}randomPosition(){const t=this.fill,e=this.position,i=this.size;if(t)return{position:{x:bb(e.x,i.width),y:bb(e.y,i.height)}};{const r=i.width*Xt,a=i.height*Xt,c=Math.floor(ft()*PM),h=(ft()-Xt)*Me;switch(c){case ho.TopLeft:return{position:{x:e.x+h*r,y:e.y-a}};case ho.TopRight:return{position:{x:e.x-r,y:e.y+h*a}};case ho.BottomRight:return{position:{x:e.x+h*r,y:e.y+a}};case ho.BottomLeft:default:return{position:{x:e.x+r,y:e.y+h*a}}}}}}class UM{generate(t,e,i,r){return new BM(t,e,i,r)}}async function FM(o,t=!0){const e=o;e.checkVersion("3.8.1"),e.addEmitterShapeGenerator?.("square",new UM),await e.refresh(t)}class HM{constructor(){this.delay=1,this.pauseOnStop=!1,this.quantity=1}load(t){G(t)||(t.delay!==void 0&&(this.delay=t.delay),t.quantity!==void 0&&(this.quantity=t.quantity),t.particles!==void 0&&(this.particles=ue({},t.particles)),t.pauseOnStop!==void 0&&(this.pauseOnStop=t.pauseOnStop))}}const _b="trail";class YM extends Ki{constructor(t){super(t),this._delay=0}clear(){}init(){}interact(t){const e=this.container,{interactivity:i}=e;if(!e.retina.reduceFactor)return;const r=e.actualOptions,a=r.interactivity.modes.trail;if(!a)return;const c=a.delay*Zt/this.container.retina.reduceFactor;if(this._delay<c&&(this._delay+=t.value),this._delay<c)return;const h=!(a.pauseOnStop&&(i.mouse.position===this._lastPosition||i.mouse.position?.x===this._lastPosition?.x&&i.mouse.position?.y===this._lastPosition?.y)),f=e.interactivity.mouse.position;f?this._lastPosition={...f}:delete this._lastPosition,h&&e.particles.push(a.quantity,e.interactivity.mouse,a.particles),this._delay-=c}isEnabled(t){const e=this.container,i=e.actualOptions,r=e.interactivity.mouse,a=(t?.interactivity??i.interactivity).events;return r.clicking&&r.inside&&!!r.position&&qt(_b,a.onClick.mode)||r.inside&&!!r.position&&qt(_b,a.onHover.mode)}loadModeOptions(t,...e){t.trail||(t.trail=new HM);for(const i of e)t.trail.load(i?.trail)}reset(){}}async function VM(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("externalTrail",e=>Promise.resolve(new YM(e)),t)}var lr;(function(o){o.both="both",o.horizontal="horizontal",o.vertical="vertical"})(lr||(lr={}));const NM=2,Px=Math.PI*NM,XM=360;function qM(o,t){const e=t.options.roll;if(!e?.enable){t.roll={enable:!1,horizontal:!1,vertical:!1,angle:0,speed:0};return}if(t.roll={enable:e.enable,horizontal:e.mode===lr.horizontal||e.mode===lr.both,vertical:e.mode===lr.vertical||e.mode===lr.both,angle:ft()*Px,speed:Q(e.speed)/XM},e.backColor)t.backColor=Ds(o,e.backColor);else if(e.darken.enable&&e.enlighten.enable){const i=ft()>=Xt?ys.darken:ys.enlighten;t.roll.alter={type:i,value:Q(i===ys.darken?e.darken.value:e.enlighten.value)}}else e.darken.enable?t.roll.alter={type:ys.darken,value:Q(e.darken.value)}:e.enlighten.enable&&(t.roll.alter={type:ys.enlighten,value:Q(e.enlighten.value)})}function GM(o,t){const e=o.options.roll,i=o.roll;if(!i||!e?.enable)return;const r=i.speed*t.factor,a=Px;i.angle+=r,i.angle>a&&(i.angle-=a)}class xb{constructor(){this.enable=!1,this.value=0}load(t){G(t)||(t.enable!==void 0&&(this.enable=t.enable),t.value!==void 0&&(this.value=rt(t.value)))}}class IM{constructor(){this.darken=new xb,this.enable=!1,this.enlighten=new xb,this.mode=lr.vertical,this.speed=25}load(t){G(t)||(t.backColor!==void 0&&(this.backColor=re.create(this.backColor,t.backColor)),this.darken.load(t.darken),t.enable!==void 0&&(this.enable=t.enable),this.enlighten.load(t.enlighten),t.mode!==void 0&&(this.mode=t.mode),t.speed!==void 0&&(this.speed=rt(t.speed)))}}class WM{constructor(t){this._engine=t}getTransformValues(t){const e=t.roll?.enable&&t.roll,i=e&&e.horizontal,r=e&&e.vertical;return{a:i?Math.cos(e.angle):void 0,d:r?Math.sin(e.angle):void 0}}init(t){qM(this._engine,t)}isEnabled(t){const e=t.options.roll;return!t.destroyed&&!t.spawning&&!!e?.enable}loadOptions(t,...e){t.roll||(t.roll=new IM);for(const i of e)t.roll.load(i?.roll)}update(t,e){this.isEnabled(t)&&GM(t,e)}}async function QM(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("roll",()=>Promise.resolve(new WM(o)),t)}const yg=.5,ZM=2,Ss=0,Gi=1,Sb=60,wb=0,KM=.01,JM=Math.PI*ZM;function $M(o){const t=o.initialPosition,{dx:e,dy:i}=Pe(t,o.position),r=Math.abs(e),a=Math.abs(i),{maxDistance:c}=o.retina,h=c.horizontal,f=c.vertical;if(!h&&!f)return;const g=(h&&r>=h)??!1,m=(f&&a>=f)??!1;if((g||m)&&!o.misplaced)o.misplaced=!!h&&r>h||!!f&&a>f,h&&(o.velocity.x=o.velocity.y*yg-o.velocity.x),f&&(o.velocity.y=o.velocity.x*yg-o.velocity.y);else if((!h||r<h)&&(!f||a<f)&&o.misplaced)o.misplaced=!1;else if(o.misplaced){const y=o.position,v=o.velocity;h&&(y.x<t.x&&v.x<Ss||y.x>t.x&&v.x>Ss)&&(v.x*=-ft()),f&&(y.y<t.y&&v.y<Ss||y.y>t.y&&v.y>Ss)&&(v.y*=-ft())}}function tE(o,t,e,i,r,a){iE(o,a);const c=o.gravity,h=c?.enable&&c.inverse?-Gi:Gi;r&&e&&(o.velocity.x+=r*a.factor/(Sb*e)),c?.enable&&e&&(o.velocity.y+=h*(c.acceleration*a.factor)/(Sb*e));const f=o.moveDecay;o.velocity.multTo(f);const g=o.velocity.mult(e);c?.enable&&i>Ss&&(!c.inverse&&g.y>=Ss&&g.y>=i||c.inverse&&g.y<=Ss&&g.y<=-i)&&(g.y=h*i,e&&(o.velocity.y=g.y/e));const m=o.options.zIndex,y=(Gi-o.zIndexFactor)**m.velocityRate;g.multTo(y);const{position:v}=o;v.addTo(g),t.vibrate&&(v.x+=Math.sin(v.x*Math.cos(v.y)),v.y+=Math.cos(v.y*Math.sin(v.x)))}function eE(o,t){const e=o.container;if(!o.spin)return;const i=o.spin.direction===Ve.clockwise,r={x:i?Math.cos:Math.sin,y:i?Math.sin:Math.cos};o.position.x=o.spin.center.x+o.spin.radius*r.x(o.spin.angle),o.position.y=o.spin.center.y+o.spin.radius*r.y(o.spin.angle),o.spin.radius+=o.spin.acceleration;const a=Math.max(e.canvas.size.width,e.canvas.size.height),c=a*yg;o.spin.radius>c?(o.spin.radius=c,o.spin.acceleration*=-Gi):o.spin.radius<wb&&(o.spin.radius=wb,o.spin.acceleration*=-Gi),o.spin.angle+=t*KM*(Gi-o.spin.radius/a)}function iE(o,t){const e=o.options,i=e.move.path;if(!i.enable)return;if(o.lastPathTime<=o.pathDelay){o.lastPathTime+=t.value;return}const a=o.pathGenerator?.generate(o,t);a&&o.velocity.addTo(a),i.clamp&&(o.velocity.x=ji(o.velocity.x,-Gi,Gi),o.velocity.y=ji(o.velocity.y,-Gi,Gi)),o.lastPathTime-=o.pathDelay}function nE(o){return o.slow.inRange?o.slow.factor:Gi}function sE(o){const t=o.container,e=o.options,i=e.move.spin;if(!i.enable)return;const r=i.position??{x:50,y:50},a=.01,c={x:r.x*a*t.canvas.size.width,y:r.y*a*t.canvas.size.height},h=o.getPosition(),f=Ne(h,c),g=Q(i.acceleration);o.retina.spinAcceleration=g*t.retina.pixelRatio,o.spin={center:c,direction:o.velocity.x>=Ss?Ve.clockwise:Ve.counterClockwise,angle:ft()*JM,radius:f,acceleration:o.retina.spinAcceleration}}const rE=2,oE=1,aE=1;class lE{init(t){const e=t.options,i=e.move.gravity;t.gravity={enable:i.enable,acceleration:Q(i.acceleration),inverse:i.inverse},sE(t)}isEnabled(t){return!t.destroyed&&t.options.move.enable}move(t,e){const i=t.options,r=i.move;if(!r.enable)return;const a=t.container,c=a.retina.pixelRatio;t.retina.moveSpeed??=Q(r.speed)*c,t.retina.moveDrift??=Q(t.options.move.drift)*c;const h=nE(t),f=t.retina.moveSpeed*a.retina.reduceFactor,g=t.retina.moveDrift,m=un(i.size.value)*c,y=r.size?t.getRadius()/m:oE,v=e.factor||aE,_=f*y*h*v/rE,S=t.retina.maxSpeed??a.retina.maxSpeed;r.spin.enable?eE(t,_):tE(t,r,_,S,g,e),$M(t)}}async function cE(o,t=!0){o.checkVersion("3.8.1"),await o.addMover("base",()=>Promise.resolve(new lE),t)}const uE=2,hE=Math.PI*uE,fE=0,Cb={x:0,y:0};function dE(o){const{context:t,particle:e,radius:i}=o;e.circleRange||(e.circleRange={min:fE,max:hE});const r=e.circleRange;t.arc(Cb.x,Cb.y,i,r.min,r.max,!1)}const gE=12,pE=360,Tb=0;class mE{constructor(){this.validTypes=["circle"]}draw(t){dE(t)}getSidesCount(){return gE}particleInit(t,e){const i=e.shapeData,r=i?.angle??{max:pE,min:Tb};e.circleRange=uo(r)?{min:Un(r.min),max:Un(r.max)}:{min:Tb,max:Un(r)}}}async function yE(o,t=!0){o.checkVersion("3.8.1"),await o.addShape(new mE,t)}class vE{constructor(t,e){this._container=t,this._engine=e}init(t){const e=Ds(this._engine,t.options.color,t.id,t.options.reduceDuplicates);e&&(t.color=Dx(e,t.options.color.animation,this._container.retina.reduceFactor))}isEnabled(t){const{h:e,s:i,l:r}=t.options.color.animation,{color:a}=t;return!t.destroyed&&!t.spawning&&(a?.h.value!==void 0&&e.enable||a?.s.value!==void 0&&i.enable||a?.l.value!==void 0&&r.enable)}update(t,e){Mx(t.color,e)}}async function bE(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("color",e=>Promise.resolve(new vE(e,o)),t)}var er;(function(o){o[o.r=1]="r",o[o.g=2]="g",o[o.b=3]="b",o[o.a=4]="a"})(er||(er={}));const _E=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,xE=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,Zc=16,SE=1,wE=255;class CE{constructor(){this.key="hex",this.stringPrefix="#"}handleColor(t){return this._parseString(t.value)}handleRangeColor(t){return this._parseString(t.value)}parseString(t){return this._parseString(t)}_parseString(t){if(typeof t!="string"||!t?.startsWith(this.stringPrefix))return;const e=t.replace(_E,(r,a,c,h,f)=>a+a+c+c+h+h+(f!==void 0?f+f:"")),i=xE.exec(e);return i?{a:i[er.a]!==void 0?parseInt(i[er.a],Zc)/wE:SE,b:parseInt(i[er.b],Zc),g:parseInt(i[er.g],Zc),r:parseInt(i[er.r],Zc)}:void 0}}async function TE(o,t=!0){o.checkVersion("3.8.1"),await o.addColorManager(new CE,t)}var fo;(function(o){o[o.h=1]="h",o[o.s=2]="s",o[o.l=3]="l",o[o.a=5]="a"})(fo||(fo={}));class OE{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(t){const e=t.value,i=e.hsl??t.value;if(i.h!==void 0&&i.s!==void 0&&i.l!==void 0)return To(i)}handleRangeColor(t){const e=t.value,i=e.hsl??t.value;if(i.h!==void 0&&i.l!==void 0)return To({h:Q(i.h),l:Q(i.l),s:Q(i.s)})}parseString(t){if(!t.startsWith("hsl"))return;const e=/hsla?\(\s*(\d+)\s*[\s,]\s*(\d+)%\s*[\s,]\s*(\d+)%\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,i=e.exec(t),r=4,a=1,c=10;return i?E2({a:i.length>r?gx(i[fo.a]):a,h:parseInt(i[fo.h],c),l:parseInt(i[fo.l],c),s:parseInt(i[fo.s],c)}):void 0}}async function DE(o,t=!0){o.checkVersion("3.8.1"),await o.addColorManager(new OE,t)}class ME{constructor(t){this.container=t}init(t){const e=t.options.opacity,i=1;t.opacity=_x(e,i);const r=e.animation;r.enable&&(t.opacity.velocity=Q(r.speed)/De*this.container.retina.reduceFactor,r.sync||(t.opacity.velocity*=ft()))}isEnabled(t){return!t.destroyed&&!t.spawning&&!!t.opacity&&t.opacity.enable&&((t.opacity.maxLoops??0)<=0||(t.opacity.maxLoops??0)>0&&(t.opacity.loops??0)<(t.opacity.maxLoops??0))}reset(t){t.opacity&&(t.opacity.time=0,t.opacity.loops=0)}update(t,e){!this.isEnabled(t)||!t.opacity||Iu(t,t.opacity,!0,t.options.opacity.animation.destroy,e)}}async function EE(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("opacity",e=>Promise.resolve(new ME(e)),t)}const zu=0,So=0;function kE(o){if(o.outMode!==ce.bounce&&o.outMode!==ce.split||o.direction!==Ct.left&&o.direction!==Ct.right)return;o.bounds.right<So&&o.direction===Ct.left?o.particle.position.x=o.size+o.offset.x:o.bounds.left>o.canvasSize.width&&o.direction===Ct.right&&(o.particle.position.x=o.canvasSize.width-o.size-o.offset.x);const t=o.particle.velocity.x;let e=!1;if(o.direction===Ct.right&&o.bounds.right>=o.canvasSize.width&&t>zu||o.direction===Ct.left&&o.bounds.left<=So&&t<zu){const r=Q(o.particle.options.bounce.horizontal.value);o.particle.velocity.x*=-r,e=!0}if(!e)return;const i=o.offset.x+o.size;o.bounds.right>=o.canvasSize.width&&o.direction===Ct.right?o.particle.position.x=o.canvasSize.width-i:o.bounds.left<=So&&o.direction===Ct.left&&(o.particle.position.x=i),o.outMode===ce.split&&o.particle.destroy()}function AE(o){if(o.outMode!==ce.bounce&&o.outMode!==ce.split||o.direction!==Ct.bottom&&o.direction!==Ct.top)return;o.bounds.bottom<So&&o.direction===Ct.top?o.particle.position.y=o.size+o.offset.y:o.bounds.top>o.canvasSize.height&&o.direction===Ct.bottom&&(o.particle.position.y=o.canvasSize.height-o.size-o.offset.y);const t=o.particle.velocity.y;let e=!1;if(o.direction===Ct.bottom&&o.bounds.bottom>=o.canvasSize.height&&t>zu||o.direction===Ct.top&&o.bounds.top<=So&&t<zu){const r=Q(o.particle.options.bounce.vertical.value);o.particle.velocity.y*=-r,e=!0}if(!e)return;const i=o.offset.y+o.size;o.bounds.bottom>=o.canvasSize.height&&o.direction===Ct.bottom?o.particle.position.y=o.canvasSize.height-i:o.bounds.top<=So&&o.direction===Ct.top&&(o.particle.position.y=i),o.outMode===ce.split&&o.particle.destroy()}class zE{constructor(t){this.container=t,this.modes=[ce.bounce,ce.split]}update(t,e,i,r){if(!this.modes.includes(r))return;const a=this.container;let c=!1;for(const v of a.plugins.values())if(v.particleBounce!==void 0&&(c=v.particleBounce(t,i,e)),c)break;if(c)return;const h=t.getPosition(),f=t.offset,g=t.getRadius(),m=al(h,g),y=a.canvas.size;kE({particle:t,outMode:r,direction:e,bounds:m,canvasSize:y,offset:f,size:g}),AE({particle:t,outMode:r,direction:e,bounds:m,canvasSize:y,offset:f,size:g})}}const Kc=0;class RE{constructor(t){this.container=t,this.modes=[ce.destroy]}update(t,e,i,r){if(!this.modes.includes(r))return;const a=this.container;switch(t.outType){case Wi.normal:case Wi.outside:if(ol(t.position,a.canvas.size,Vt.origin,t.getRadius(),e))return;break;case Wi.inside:{const{dx:c,dy:h}=Pe(t.position,t.moveCenter),{x:f,y:g}=t.velocity;if(f<Kc&&c>t.moveCenter.radius||g<Kc&&h>t.moveCenter.radius||f>=Kc&&c<-t.moveCenter.radius||g>=Kc&&h<-t.moveCenter.radius)return;break}}a.particles.remove(t,t.group,!0)}}const Jc=0;class jE{constructor(t){this.container=t,this.modes=[ce.none]}update(t,e,i,r){if(!this.modes.includes(r)||((t.options.move.distance.horizontal&&(e===Ct.left||e===Ct.right))??(t.options.move.distance.vertical&&(e===Ct.top||e===Ct.bottom))))return;const a=t.options.move.gravity,c=this.container,h=c.canvas.size,f=t.getRadius();if(a.enable){const g=t.position;(!a.inverse&&g.y>h.height+f&&e===Ct.bottom||a.inverse&&g.y<-f&&e===Ct.top)&&c.particles.remove(t)}else{if(t.velocity.y>Jc&&t.position.y<=h.height+f||t.velocity.y<Jc&&t.position.y>=-f||t.velocity.x>Jc&&t.position.x<=h.width+f||t.velocity.x<Jc&&t.position.x>=-f)return;ol(t.position,c.canvas.size,Vt.origin,f,e)||c.particles.remove(t)}}}const $c=0,tu=0;class LE{constructor(t){this.container=t,this.modes=[ce.out]}update(t,e,i,r){if(!this.modes.includes(r))return;const a=this.container;switch(t.outType){case Wi.inside:{const{x:c,y:h}=t.velocity,f=Vt.origin;f.length=t.moveCenter.radius,f.angle=t.velocity.angle+Math.PI,f.addTo(Vt.create(t.moveCenter));const{dx:g,dy:m}=Pe(t.position,f);if(c<=$c&&g>=tu||h<=$c&&m>=tu||c>=$c&&g<=tu||h>=$c&&m<=tu)return;t.position.x=Math.floor(Ee({min:0,max:a.canvas.size.width})),t.position.y=Math.floor(Ee({min:0,max:a.canvas.size.height}));const{dx:y,dy:v}=Pe(t.position,t.moveCenter);t.direction=Math.atan2(-v,-y),t.velocity.angle=t.direction;break}default:{if(ol(t.position,a.canvas.size,Vt.origin,t.getRadius(),e))return;switch(t.outType){case Wi.outside:{t.position.x=Math.floor(Ee({min:-t.moveCenter.radius,max:t.moveCenter.radius}))+t.moveCenter.x,t.position.y=Math.floor(Ee({min:-t.moveCenter.radius,max:t.moveCenter.radius}))+t.moveCenter.y;const{dx:c,dy:h}=Pe(t.position,t.moveCenter);t.moveCenter.radius&&(t.direction=Math.atan2(h,c),t.velocity.angle=t.direction);break}case Wi.normal:{const c=t.options.move.warp,h=a.canvas.size,f={bottom:h.height+t.getRadius()+t.offset.y,left:-t.getRadius()-t.offset.x,right:h.width+t.getRadius()+t.offset.x,top:-t.getRadius()-t.offset.y},g=t.getRadius(),m=al(t.position,g);e===Ct.right&&m.left>h.width+t.offset.x?(t.position.x=f.left,t.initialPosition.x=t.position.x,c||(t.position.y=ft()*h.height,t.initialPosition.y=t.position.y)):e===Ct.left&&m.right<-t.offset.x&&(t.position.x=f.right,t.initialPosition.x=t.position.x,c||(t.position.y=ft()*h.height,t.initialPosition.y=t.position.y)),e===Ct.bottom&&m.top>h.height+t.offset.y?(c||(t.position.x=ft()*h.width,t.initialPosition.x=t.position.x),t.position.y=f.top,t.initialPosition.y=t.position.y):e===Ct.top&&m.bottom<-t.offset.y&&(c||(t.position.x=ft()*h.width,t.initialPosition.x=t.position.x),t.position.y=f.bottom,t.initialPosition.y=t.position.y);break}}break}}}}const PE=(o,t)=>o.default===t||o.bottom===t||o.left===t||o.right===t||o.top===t;class BE{constructor(t){this._addUpdaterIfMissing=(e,i,r)=>{const a=e.options.move.outModes;!this.updaters.has(i)&&PE(a,i)&&this.updaters.set(i,r(this.container))},this._updateOutMode=(e,i,r,a)=>{for(const c of this.updaters.values())c.update(e,a,i,r)},this.container=t,this.updaters=new Map}init(t){this._addUpdaterIfMissing(t,ce.bounce,e=>new zE(e)),this._addUpdaterIfMissing(t,ce.out,e=>new LE(e)),this._addUpdaterIfMissing(t,ce.destroy,e=>new RE(e)),this._addUpdaterIfMissing(t,ce.none,e=>new jE(e))}isEnabled(t){return!t.destroyed&&!t.spawning}update(t,e){const i=t.options.move.outModes;this._updateOutMode(t,e,i.bottom??i.default,Ct.bottom),this._updateOutMode(t,e,i.left??i.default,Ct.left),this._updateOutMode(t,e,i.right??i.default,Ct.right),this._updateOutMode(t,e,i.top??i.default,Ct.top)}}async function UE(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("outModes",e=>Promise.resolve(new BE(e)),t)}var go;(function(o){o[o.r=1]="r",o[o.g=2]="g",o[o.b=3]="b",o[o.a=5]="a"})(go||(go={}));class FE{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(t){const e=t.value,i=e.rgb??t.value;if(i.r!==void 0)return i}handleRangeColor(t){const e=t.value,i=e.rgb??t.value;if(i.r!==void 0)return{r:Q(i.r),g:Q(i.g),b:Q(i.b)}}parseString(t){if(!t.startsWith(this.stringPrefix))return;const e=/rgba?\(\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,i=e.exec(t),r=10;return i?{a:i.length>4?gx(i[go.a]):1,b:parseInt(i[go.b],r),g:parseInt(i[go.g],r),r:parseInt(i[go.r],r)}:void 0}}async function HE(o,t=!0){o.checkVersion("3.8.1"),await o.addColorManager(new FE,t)}const Ws=0;class YE{init(t){const e=t.container,i=t.options.size,r=i.animation;r.enable&&(t.size.velocity=(t.retina.sizeAnimationSpeed??e.retina.sizeAnimationSpeed)/De*e.retina.reduceFactor,r.sync||(t.size.velocity*=ft()))}isEnabled(t){return!t.destroyed&&!t.spawning&&t.size.enable&&((t.size.maxLoops??Ws)<=Ws||(t.size.maxLoops??Ws)>Ws&&(t.size.loops??Ws)<(t.size.maxLoops??Ws))}reset(t){t.size.loops=Ws}update(t,e){this.isEnabled(t)&&Iu(t,t.size,!0,t.options.size.animation.destroy,e)}}async function VE(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("size",()=>Promise.resolve(new YE),t)}async function NE(o,t=!0){o.checkVersion("3.8.1"),await TE(o,!1),await DE(o,!1),await HE(o,!1),await cE(o,!1),await yE(o,!1),await bE(o,!1),await EE(o,!1),await UE(o,!1),await VE(o,!1),await o.refresh(t)}async function XE(o,t=!0){o.checkVersion("3.8.1"),await o.addEasing(ur.easeInQuad,e=>e**2,!1),await o.addEasing(ur.easeOutQuad,e=>1-(1-e)**2,!1),await o.addEasing(ur.easeInOutQuad,e=>e<.5?2*e**2:1-(-2*e+2)**2/2,!1),await o.refresh(t)}function qE(o,t){const{context:e,opacity:i}=o,r=.5,a=e.globalAlpha;if(!t)return;const c=t.width,h=c*r;e.globalAlpha=i,e.drawImage(t,-h,-h,c,c),e.globalAlpha=a}const Hd='"Twemoji Mozilla", Apple Color Emoji, "Segoe UI Emoji", "Noto Color Emoji", "EmojiOne Color"',Ob=0;class GE{constructor(){this.validTypes=["emoji"],this._emojiShapeDict=new Map}destroy(){for(const[t,e]of this._emojiShapeDict)e instanceof ImageBitmap&&e?.close(),this._emojiShapeDict.delete(t)}draw(t){const e=t.particle.emojiDataKey;if(!e)return;const i=this._emojiShapeDict.get(e);i&&qE(t,i)}async init(t){const e=t.actualOptions,{validTypes:i}=this;if(!i.find(c=>qt(c,e.particles.shape.type)))return;const r=[dg(Hd)],a=i.map(c=>e.particles.shape.options[c]).find(c=>!!c);a&&he(a,c=>{c.font&&r.push(dg(c.font))}),await Promise.all(r)}particleDestroy(t){t.emojiDataKey=void 0}particleInit(t,e){const r=e.shapeData;if(!r?.value)return;const a=ke(r.value,e.randomIndexData);if(!a)return;const c=typeof a=="string"?{font:r.font??Hd,padding:r.padding??Ob,value:a}:{font:Hd,padding:Ob,...r,...a},h=c.font,f=c.value,g=`${f}_${h}`;if(this._emojiShapeDict.has(g)){e.emojiDataKey=g;return}const m=c.padding*2,y=un(e.size.value),v=y+m,_=v*2;let S;if(typeof OffscreenCanvas<"u"){const w=new OffscreenCanvas(_,_),C=w.getContext("2d");if(!C)return;C.font=`400 ${y*2}px ${h}`,C.textBaseline="middle",C.textAlign="center",C.fillText(f,v,v),S=w.transferToImageBitmap()}else{const w=document.createElement("canvas");w.width=_,w.height=_;const C=w.getContext("2d");if(!C)return;C.font=`400 ${y*2}px ${h}`,C.textBaseline="middle",C.textAlign="center",C.fillText(f,v,v),S=w}this._emojiShapeDict.set(g,S),e.emojiDataKey=g}}async function IE(o,t=!0){o.checkVersion("3.8.1"),await o.addShape(new GE,t)}const WE=1,QE=1,Bx=0;function Ux(o,t,e,i,r,a){const c=t.actualOptions.interactivity.modes.attract;if(!c)return;const h=t.particles.quadTree.query(r,a);for(const f of h){const{dx:g,dy:m,distance:y}=Pe(f.position,e),v=c.speed*c.factor,_=ji(o.getEasing(c.easing)(QE-y/i)*v,WE,c.maxSpeed),S=Vt.create(y?g/y*_:v,y?m/y*_:v);f.position.subFrom(S)}}function ZE(o,t,e){t.attract||(t.attract={particles:[]});const{attract:i}=t;if(i.finish||(i.count||(i.count=0),i.count++,i.count===t.particles.count&&(i.finish=!0)),i.clicking){const r=t.interactivity.mouse.clickPosition,a=t.retina.attractModeDistance;if(!a||a<Bx||!r)return;Ux(o,t,r,a,new Be(r.x,r.y,a),c=>e(c))}else i.clicking===!1&&(i.particles=[])}function KE(o,t,e){const i=t.interactivity.mouse.position,r=t.retina.attractModeDistance;!r||r<Bx||!i||Ux(o,t,i,r,new Be(i.x,i.y,r),a=>e(a))}class JE{constructor(){this.distance=200,this.duration=.4,this.easing=ur.easeOutQuad,this.factor=1,this.maxSpeed=50,this.speed=1}load(t){G(t)||(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed),t.speed!==void 0&&(this.speed=t.speed))}}const Ha="attract";let $E=class extends Ki{constructor(t,e){super(e),this._engine=t,e.attract||(e.attract={particles:[]}),this.handleClickMode=i=>{const r=this.container.actualOptions,a=r.interactivity.modes.attract;if(!(!a||i!==Ha)){e.attract||(e.attract={particles:[]}),e.attract.clicking=!0,e.attract.count=0;for(const c of e.attract.particles)this.isEnabled(c)&&c.velocity.setTo(c.initialVelocity);e.attract.particles=[],e.attract.finish=!1,setTimeout(()=>{e.destroyed||(e.attract||(e.attract={particles:[]}),e.attract.clicking=!1)},a.duration*Zt)}}}clear(){}init(){const t=this.container,e=t.actualOptions.interactivity.modes.attract;e&&(t.retina.attractModeDistance=e.distance*t.retina.pixelRatio)}interact(){const t=this.container,e=t.actualOptions,i=t.interactivity.status===fr,r=e.interactivity.events,{enable:a,mode:c}=r.onHover,{enable:h,mode:f}=r.onClick;i&&a&&qt(Ha,c)?KE(this._engine,this.container,g=>this.isEnabled(g)):h&&qt(Ha,f)&&ZE(this._engine,this.container,g=>this.isEnabled(g))}isEnabled(t){const e=this.container,i=e.actualOptions,r=e.interactivity.mouse,a=(t?.interactivity??i.interactivity).events;if((!r.position||!a.onHover.enable)&&(!r.clickPosition||!a.onClick.enable))return!1;const c=a.onHover.mode,h=a.onClick.mode;return qt(Ha,c)||qt(Ha,h)}loadModeOptions(t,...e){t.attract||(t.attract=new JE);for(const i of e)t.attract.load(i?.attract)}reset(){}};async function tk(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("externalAttract",e=>Promise.resolve(new $E(o,e)),t)}const ek=2,hu=.5,ik=Math.PI*hu,Db=2,Fx=10,nk=0;function Hx(o,t,e,i,r){const a=o.particles.quadTree.query(i,r);for(const c of a)i instanceof Be?vx(gg(c),{position:t,mass:e**ek*ik,velocity:Vt.origin,factor:Vt.origin}):i instanceof Qi&&S2(c,al(t,e))}function sk(o,t,e,i){const r=document.querySelectorAll(t);r.length&&r.forEach(a=>{const c=a,h=o.retina.pixelRatio,f={x:(c.offsetLeft+c.offsetWidth*hu)*h,y:(c.offsetTop+c.offsetHeight*hu)*h},g=c.offsetWidth*hu*h,m=Fx*h,y=e.type===Do.circle?new Be(f.x,f.y,g+m):new Qi(c.offsetLeft*h-m,c.offsetTop*h-m,c.offsetWidth*h+m*Db,c.offsetHeight*h+m*Db);i(f,g,y)})}function rk(o,t,e,i){Yg(e,t,(r,a)=>sk(o,r,a,(c,h,f)=>Hx(o,c,h,f,i)))}function ok(o,t){const e=o.retina.pixelRatio,i=Fx*e,r=o.interactivity.mouse.position,a=o.retina.bounceModeDistance;!a||a<nk||!r||Hx(o,r,a,new Be(r.x,r.y,a+i),t)}class ak{constructor(){this.distance=200}load(t){G(t)||t.distance!==void 0&&(this.distance=t.distance)}}const eu="bounce";class lk extends Ki{constructor(t){super(t)}clear(){}init(){const t=this.container,e=t.actualOptions.interactivity.modes.bounce;e&&(t.retina.bounceModeDistance=e.distance*t.retina.pixelRatio)}interact(){const t=this.container,e=t.actualOptions,i=e.interactivity.events,r=t.interactivity.status===fr,a=i.onHover.enable,c=i.onHover.mode,h=i.onDiv;r&&a&&qt(eu,c)?ok(this.container,f=>this.isEnabled(f)):rk(this.container,h,eu,f=>this.isEnabled(f))}isEnabled(t){const e=this.container,i=e.actualOptions,r=e.interactivity.mouse,a=(t?.interactivity??i.interactivity).events,c=a.onDiv;return!!r.position&&a.onHover.enable&&qt(eu,a.onHover.mode)||Hg(eu,c)}loadModeOptions(t,...e){t.bounce||(t.bounce=new ak);for(const i of e)t.bounce.load(i?.bounce)}reset(){}}async function ck(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("externalBounce",e=>Promise.resolve(new lk(e)),t)}class Yx{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(t){if(!G(t)){if(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.mix!==void 0&&(this.mix=t.mix),t.opacity!==void 0&&(this.opacity=t.opacity),t.color!==void 0){const e=Le(this.color)?void 0:this.color;this.color=he(t.color,i=>re.create(e,i))}t.size!==void 0&&(this.size=t.size)}}}class uk extends Yx{constructor(){super(),this.selectors=[]}load(t){super.load(t),!G(t)&&t.selectors!==void 0&&(this.selectors=t.selectors)}}class hk extends Yx{load(t){super.load(t),!G(t)&&(this.divs=he(t.divs,e=>{const i=new uk;return i.load(e),i}))}}var rn;(function(o){o.color="color",o.opacity="opacity",o.size="size"})(rn||(rn={}));function Mb(o,t,e,i){if(t>=e){const r=o+(t-e)*i;return ji(r,o,t)}else if(t<e){const r=o-(e-t)*i;return ji(r,t,o)}}const Qs="bubble",Yd=0,fk=0,dk=2,Eb=1,kb=1,gk=0,pk=0,Vd=.5,Nd=1;class mk extends Ki{constructor(t,e){super(t),this._clickBubble=()=>{const i=this.container,r=i.actualOptions,a=i.interactivity.mouse.clickPosition,c=r.interactivity.modes.bubble;if(!c||!a)return;i.bubble||(i.bubble={});const h=i.retina.bubbleModeDistance;if(!h||h<Yd)return;const f=i.particles.quadTree.queryCircle(a,h,m=>this.isEnabled(m)),{bubble:g}=i;for(const m of f){if(!g.clicking)continue;m.bubble.inRange=!g.durationEnd;const y=m.getPosition(),v=Ne(y,a),_=(new Date().getTime()-(i.interactivity.mouse.clickTime??fk))/Zt;_>c.duration&&(g.durationEnd=!0),_>c.duration*dk&&(g.clicking=!1,g.durationEnd=!1);const S={bubbleObj:{optValue:i.retina.bubbleModeSize,value:m.bubble.radius},particlesObj:{optValue:un(m.options.size.value)*i.retina.pixelRatio,value:m.size.value},type:rn.size};this._process(m,v,_,S);const w={bubbleObj:{optValue:c.opacity,value:m.bubble.opacity},particlesObj:{optValue:un(m.options.opacity.value),value:m.opacity?.value??Eb},type:rn.opacity};this._process(m,v,_,w),!g.durationEnd&&v<=h?this._hoverBubbleColor(m,v):delete m.bubble.color}},this._hoverBubble=()=>{const i=this.container,r=i.interactivity.mouse.position,a=i.retina.bubbleModeDistance;if(!a||a<Yd||!r)return;const c=i.particles.quadTree.queryCircle(r,a,h=>this.isEnabled(h));for(const h of c){h.bubble.inRange=!0;const f=h.getPosition(),g=Ne(f,r),m=kb-g/a;g<=a?m>=pk&&i.interactivity.status===fr&&(this._hoverBubbleSize(h,m),this._hoverBubbleOpacity(h,m),this._hoverBubbleColor(h,m)):this.reset(h),i.interactivity.status===ag&&this.reset(h)}},this._hoverBubbleColor=(i,r,a)=>{const c=this.container.actualOptions,h=a??c.interactivity.modes.bubble;if(h){if(!i.bubble.finalColor){const f=h.color;if(!f)return;const g=ke(f);i.bubble.finalColor=Ds(this._engine,g)}if(i.bubble.finalColor)if(h.mix){i.bubble.color=void 0;const f=i.getFillColor();i.bubble.color=f?Cx(Vg(f,i.bubble.finalColor,kb-r,r)):i.bubble.finalColor}else i.bubble.color=i.bubble.finalColor}},this._hoverBubbleOpacity=(i,r,a)=>{const c=this.container,h=c.actualOptions,f=a?.opacity??h.interactivity.modes.bubble?.opacity;if(!f)return;const g=i.options.opacity.value,m=i.opacity?.value??Eb,y=Mb(m,f,un(g),r);y!==void 0&&(i.bubble.opacity=y)},this._hoverBubbleSize=(i,r,a)=>{const c=this.container,h=a?.size?a.size*c.retina.pixelRatio:c.retina.bubbleModeSize;if(h===void 0)return;const f=un(i.options.size.value)*c.retina.pixelRatio,g=i.size.value,m=Mb(g,h,f,r);m!==void 0&&(i.bubble.radius=m)},this._process=(i,r,a,c)=>{const h=this.container,f=c.bubbleObj.optValue,g=h.actualOptions,m=g.interactivity.modes.bubble;if(!m||f===void 0)return;const y=m.duration,v=h.retina.bubbleModeDistance,_=c.particlesObj.optValue,S=c.bubbleObj.value,w=c.particlesObj.value??gk,C=c.type;if(!(!v||v<Yd||f===_))if(h.bubble||(h.bubble={}),h.bubble.durationEnd)S&&(C===rn.size&&delete i.bubble.radius,C===rn.opacity&&delete i.bubble.opacity);else if(r<=v){if((S??w)!==f){const z=w-a*(w-f)/y;C===rn.size&&(i.bubble.radius=z),C===rn.opacity&&(i.bubble.opacity=z)}}else C===rn.size&&delete i.bubble.radius,C===rn.opacity&&delete i.bubble.opacity},this._singleSelectorHover=(i,r,a)=>{const c=this.container,h=document.querySelectorAll(r),f=c.actualOptions.interactivity.modes.bubble;!f||!h.length||h.forEach(g=>{const m=g,y=c.retina.pixelRatio,v={x:(m.offsetLeft+m.offsetWidth*Vd)*y,y:(m.offsetTop+m.offsetHeight*Vd)*y},_=m.offsetWidth*Vd*y,S=a.type===Do.circle?new Be(v.x,v.y,_):new Qi(m.offsetLeft*y,m.offsetTop*y,m.offsetWidth*y,m.offsetHeight*y),w=c.particles.quadTree.query(S,C=>this.isEnabled(C));for(const C of w){if(!S.contains(C.getPosition()))continue;C.bubble.inRange=!0;const k=f.divs,z=yx(k,m);(!C.bubble.div||C.bubble.div!==m)&&(this.clear(C,i,!0),C.bubble.div=m),this._hoverBubbleSize(C,Nd,z),this._hoverBubbleOpacity(C,Nd,z),this._hoverBubbleColor(C,Nd,z)}})},this._engine=e,t.bubble||(t.bubble={}),this.handleClickMode=i=>{i===Qs&&(t.bubble||(t.bubble={}),t.bubble.clicking=!0)}}clear(t,e,i){t.bubble.inRange&&!i||(delete t.bubble.div,delete t.bubble.opacity,delete t.bubble.radius,delete t.bubble.color)}init(){const t=this.container,e=t.actualOptions.interactivity.modes.bubble;e&&(t.retina.bubbleModeDistance=e.distance*t.retina.pixelRatio,e.size!==void 0&&(t.retina.bubbleModeSize=e.size*t.retina.pixelRatio))}interact(t){const e=this.container.actualOptions,i=e.interactivity.events,r=i.onHover,a=i.onClick,c=r.enable,h=r.mode,f=a.enable,g=a.mode,m=i.onDiv;c&&qt(Qs,h)?this._hoverBubble():f&&qt(Qs,g)?this._clickBubble():Yg(Qs,m,(y,v)=>this._singleSelectorHover(t,y,v))}isEnabled(t){const e=this.container,i=e.actualOptions,r=e.interactivity.mouse,a=(t?.interactivity??i.interactivity).events,{onClick:c,onDiv:h,onHover:f}=a,g=Hg(Qs,h);return g||f.enable&&r.position||c.enable&&r.clickPosition?qt(Qs,f.mode)||qt(Qs,c.mode)||g:!1}loadModeOptions(t,...e){t.bubble||(t.bubble=new hk);for(const i of e)t.bubble.load(i?.bubble)}reset(t){t.bubble.inRange=!1}}async function yk(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("externalBubble",e=>Promise.resolve(new mk(e,o)),t)}class vk{constructor(){this.opacity=.5}load(t){G(t)||t.opacity!==void 0&&(this.opacity=t.opacity)}}class bk{constructor(){this.distance=80,this.links=new vk,this.radius=60}load(t){G(t)||(t.distance!==void 0&&(this.distance=t.distance),this.links.load(t.links),t.radius!==void 0&&(this.radius=t.radius))}}const Ab=0,zb=1,_k=0;function xk(o,t,e,i){const r=Math.floor(e.getRadius()/t.getRadius()),a=t.getFillColor(),c=e.getFillColor();if(!a||!c)return;const h=t.getPosition(),f=e.getPosition(),g=Vg(a,c,t.getRadius(),e.getRadius()),m=o.createLinearGradient(h.x,h.y,f.x,f.y);return m.addColorStop(Ab,Oo(a,i)),m.addColorStop(ji(r,Ab,zb),hn(g,i)),m.addColorStop(zb,Oo(c,i)),m}function Sk(o,t,e,i,r){Wa(o,i,r),o.lineWidth=t,o.strokeStyle=e,o.stroke()}function wk(o,t,e,i){const r=o.actualOptions,a=r.interactivity.modes.connect;if(a)return xk(t,e,i,a.links.opacity)}function Ck(o,t,e){o.canvas.draw(i=>{const r=wk(o,i,t,e);if(!r)return;const a=t.getPosition(),c=e.getPosition();Sk(i,t.retina.linksWidth??_k,r,a,c)})}const Tk="connect",Rb=0;class Ok extends Ki{constructor(t){super(t)}clear(){}init(){const t=this.container,e=t.actualOptions.interactivity.modes.connect;e&&(t.retina.connectModeDistance=e.distance*t.retina.pixelRatio,t.retina.connectModeRadius=e.radius*t.retina.pixelRatio)}interact(){const t=this.container;if(t.actualOptions.interactivity.events.onHover.enable&&t.interactivity.status==="pointermove"){const i=t.interactivity.mouse.position,{connectModeDistance:r,connectModeRadius:a}=t.retina;if(!r||r<Rb||!a||a<Rb||!i)return;const c=Math.abs(a),h=t.particles.quadTree.queryCircle(i,c,f=>this.isEnabled(f));h.forEach((f,g)=>{const m=f.getPosition(),y=1;for(const v of h.slice(g+y)){const _=v.getPosition(),S=Math.abs(r),w=Math.abs(m.x-_.x),C=Math.abs(m.y-_.y);w<S&&C<S&&Ck(t,f,v)}})}}isEnabled(t){const e=this.container,i=e.interactivity.mouse,r=(t?.interactivity??e.actualOptions.interactivity).events;return r.onHover.enable&&i.position?qt(Tk,r.onHover.mode):!1}loadModeOptions(t,...e){t.connect||(t.connect=new bk);for(const i of e)t.connect.load(i?.connect)}reset(){}}async function Dk(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("externalConnect",e=>Promise.resolve(new Ok(e)),t)}class Mk{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(t){G(t)||(t.blink!==void 0&&(this.blink=t.blink),t.color!==void 0&&(this.color=re.create(this.color,t.color)),t.consent!==void 0&&(this.consent=t.consent),t.opacity!==void 0&&(this.opacity=t.opacity))}}class Ek{constructor(){this.distance=100,this.links=new Mk}load(t){G(t)||(t.distance!==void 0&&(this.distance=t.distance),this.links.load(t.links))}}const kk=0;function Ak(o,t,e,i,r,a){Wa(o,e,i),o.strokeStyle=hn(r,a),o.lineWidth=t,o.stroke()}function zk(o,t,e,i,r){o.canvas.draw(a=>{const c=t.getPosition();Ak(a,t.retina.linksWidth??kk,c,r,e,i)})}const Rk="grab",jk=0,Lk=0;class Pk extends Ki{constructor(t,e){super(t),this._engine=e}clear(){}init(){const t=this.container,e=t.actualOptions.interactivity.modes.grab;e&&(t.retina.grabModeDistance=e.distance*t.retina.pixelRatio)}interact(){const t=this.container,e=t.actualOptions,i=e.interactivity;if(!i.modes.grab||!i.events.onHover.enable||t.interactivity.status!==fr)return;const r=t.interactivity.mouse.position;if(!r)return;const a=t.retina.grabModeDistance;if(!a||a<jk)return;const c=t.particles.quadTree.queryCircle(r,a,h=>this.isEnabled(h));for(const h of c){const f=h.getPosition(),g=Ne(f,r);if(g>a)continue;const m=i.modes.grab.links,y=m.opacity,v=y-g*y/a;if(v<=Lk)continue;const _=m.color??h.options.links?.color;if(!t.particles.grabLineColor&&_){const w=i.modes.grab.links;t.particles.grabLineColor=Ox(this._engine,_,w.blink,w.consent)}const S=pg(h,void 0,t.particles.grabLineColor);S&&zk(t,h,S,v,r)}}isEnabled(t){const e=this.container,i=e.interactivity.mouse,r=(t?.interactivity??e.actualOptions.interactivity).events;return r.onHover.enable&&!!i.position&&qt(Rk,r.onHover.mode)}loadModeOptions(t,...e){t.grab||(t.grab=new Ek);for(const i of e)t.grab.load(i?.grab)}reset(){}}async function Bk(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("externalGrab",e=>Promise.resolve(new Pk(e,o)),t)}const Uk="pause";class Fk extends Ki{constructor(t){super(t),this.handleClickMode=e=>{if(e!==Uk)return;const i=this.container;i.animationStatus?i.pause():i.play()}}clear(){}init(){}interact(){}isEnabled(){return!0}reset(){}}async function Hk(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("externalPause",e=>Promise.resolve(new Fk(e)),t)}class Yk{constructor(){this.default=!0,this.groups=[],this.quantity=4}load(t){if(G(t))return;t.default!==void 0&&(this.default=t.default),t.groups!==void 0&&(this.groups=t.groups.map(i=>i)),this.groups.length||(this.default=!0);const e=t.quantity;e!==void 0&&(this.quantity=rt(e))}}const Vk="push",Nk=0;class Xk extends Ki{constructor(t){super(t),this.handleClickMode=e=>{if(e!==Vk)return;const i=this.container,r=i.actualOptions,a=r.interactivity.modes.push;if(!a)return;const c=Q(a.quantity);if(c<=Nk)return;const h=rl([void 0,...a.groups]),f=h!==void 0?i.actualOptions.particles.groups[h]:void 0;i.particles.push(c,i.interactivity.mouse,f,h)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(t,...e){t.push||(t.push=new Yk);for(const i of e)t.push.load(i?.push)}reset(){}}async function qk(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("externalPush",e=>Promise.resolve(new Xk(e)),t)}class Gk{constructor(){this.quantity=2}load(t){if(G(t))return;const e=t.quantity;e!==void 0&&(this.quantity=rt(e))}}const Ik="remove";class Wk extends Ki{constructor(t){super(t),this.handleClickMode=e=>{const i=this.container,r=i.actualOptions;if(!r.interactivity.modes.remove||e!==Ik)return;const a=Q(r.interactivity.modes.remove.quantity);i.particles.removeQuantity(a)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(t,...e){t.remove||(t.remove=new Gk);for(const i of e)t.remove.load(i?.remove)}reset(){}}async function Qk(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("externalRemove",e=>Promise.resolve(new Wk(e)),t)}class Vx{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing=ur.easeOutQuad}load(t){G(t)||(t.distance!==void 0&&(this.distance=t.distance),t.duration!==void 0&&(this.duration=t.duration),t.easing!==void 0&&(this.easing=t.easing),t.factor!==void 0&&(this.factor=t.factor),t.speed!==void 0&&(this.speed=t.speed),t.maxSpeed!==void 0&&(this.maxSpeed=t.maxSpeed))}}class Zk extends Vx{constructor(){super(),this.selectors=[]}load(t){super.load(t),!G(t)&&t.selectors!==void 0&&(this.selectors=t.selectors)}}class Kk extends Vx{load(t){super.load(t),!G(t)&&(this.divs=he(t.divs,e=>{const i=new Zk;return i.load(e),i}))}}const Zs="repulse",Jk=0,$k=6,tA=3,eA=2,iA=0,nA=0,sA=1,Xd=.5;class rA extends Ki{constructor(t,e){super(e),this._clickRepulse=()=>{const i=this.container,r=i.actualOptions.interactivity.modes.repulse;if(!r)return;const a=i.repulse??{particles:[]};if(a.finish||(a.count||(a.count=0),a.count++,a.count===i.particles.count&&(a.finish=!0)),a.clicking){const c=i.retina.repulseModeDistance;if(!c||c<Jk)return;const h=Math.pow(c/$k,tA),f=i.interactivity.mouse.clickPosition;if(f===void 0)return;const g=new Be(f.x,f.y,h),m=i.particles.quadTree.query(g,y=>this.isEnabled(y));for(const y of m){const{dx:v,dy:_,distance:S}=Pe(f,y.position),w=S**eA,C=r.speed,k=-h*C/w;if(w<=h){a.particles.push(y);const z=Vt.create(v,_);z.length=k,y.velocity.setTo(z)}}}else if(a.clicking===!1){for(const c of a.particles)c.velocity.setTo(c.initialVelocity);a.particles=[]}},this._hoverRepulse=()=>{const i=this.container,r=i.interactivity.mouse.position,a=i.retina.repulseModeDistance;!a||a<iA||!r||this._processRepulse(r,a,new Be(r.x,r.y,a))},this._processRepulse=(i,r,a,c)=>{const h=this.container,f=h.particles.quadTree.query(a,C=>this.isEnabled(C)),g=h.actualOptions.interactivity.modes.repulse;if(!g)return;const{easing:m,speed:y,factor:v,maxSpeed:_}=g,S=this._engine.getEasing(m),w=(c?.speed??y)*v;for(const C of f){const{dx:k,dy:z,distance:Y}=Pe(C.position,i),U=ji(S(sA-Y/r)*w,nA,_),F=Vt.create(Y?k/Y*U:w,Y?z/Y*U:w);C.position.addTo(F)}},this._singleSelectorRepulse=(i,r)=>{const a=this.container,c=a.actualOptions.interactivity.modes.repulse;if(!c)return;const h=document.querySelectorAll(i);h.length&&h.forEach(f=>{const g=f,m=a.retina.pixelRatio,y={x:(g.offsetLeft+g.offsetWidth*Xd)*m,y:(g.offsetTop+g.offsetHeight*Xd)*m},v=g.offsetWidth*Xd*m,_=r.type===Do.circle?new Be(y.x,y.y,v):new Qi(g.offsetLeft*m,g.offsetTop*m,g.offsetWidth*m,g.offsetHeight*m),S=c.divs,w=yx(S,g);this._processRepulse(y,v,_,w)})},this._engine=t,e.repulse||(e.repulse={particles:[]}),this.handleClickMode=i=>{const r=this.container.actualOptions,a=r.interactivity.modes.repulse;if(!a||i!==Zs)return;e.repulse||(e.repulse={particles:[]});const c=e.repulse;c.clicking=!0,c.count=0;for(const h of e.repulse.particles)this.isEnabled(h)&&h.velocity.setTo(h.initialVelocity);c.particles=[],c.finish=!1,setTimeout(()=>{e.destroyed||(c.clicking=!1)},a.duration*Zt)}}clear(){}init(){const t=this.container,e=t.actualOptions.interactivity.modes.repulse;e&&(t.retina.repulseModeDistance=e.distance*t.retina.pixelRatio)}interact(){const t=this.container,e=t.actualOptions,i=t.interactivity.status===fr,r=e.interactivity.events,a=r.onHover,c=a.enable,h=a.mode,f=r.onClick,g=f.enable,m=f.mode,y=r.onDiv;i&&c&&qt(Zs,h)?this._hoverRepulse():g&&qt(Zs,m)?this._clickRepulse():Yg(Zs,y,(v,_)=>this._singleSelectorRepulse(v,_))}isEnabled(t){const e=this.container,i=e.actualOptions,r=e.interactivity.mouse,a=(t?.interactivity??i.interactivity).events,c=a.onDiv,h=a.onHover,f=a.onClick,g=Hg(Zs,c);if(!(g||h.enable&&r.position||f.enable&&r.clickPosition))return!1;const m=h.mode,y=f.mode;return qt(Zs,m)||qt(Zs,y)||g}loadModeOptions(t,...e){t.repulse||(t.repulse=new Kk);for(const i of e)t.repulse.load(i?.repulse)}reset(){}}async function oA(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("externalRepulse",e=>Promise.resolve(new rA(o,e)),t)}class aA{constructor(){this.factor=3,this.radius=200}load(t){G(t)||(t.factor!==void 0&&(this.factor=t.factor),t.radius!==void 0&&(this.radius=t.radius))}}const lA="slow",cA=0;class uA extends Ki{constructor(t){super(t)}clear(t,e,i){t.slow.inRange&&!i||(t.slow.factor=1)}init(){const t=this.container,e=t.actualOptions.interactivity.modes.slow;e&&(t.retina.slowModeRadius=e.radius*t.retina.pixelRatio)}interact(){}isEnabled(t){const e=this.container,i=e.interactivity.mouse,r=(t?.interactivity??e.actualOptions.interactivity).events;return r.onHover.enable&&!!i.position&&qt(lA,r.onHover.mode)}loadModeOptions(t,...e){t.slow||(t.slow=new aA);for(const i of e)t.slow.load(i?.slow)}reset(t){t.slow.inRange=!1;const e=this.container,i=e.actualOptions,r=e.interactivity.mouse.position,a=e.retina.slowModeRadius,c=i.interactivity.modes.slow;if(!c||!a||a<cA||!r)return;const h=t.getPosition(),f=Ne(r,h),g=f/a,m=c.factor,{slow:y}=t;f>a||(y.inRange=!0,y.factor=g/m)}}async function hA(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("externalSlow",e=>Promise.resolve(new uA(e)),t)}const fA=0,dA=1,gA=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function pA(o,t,e){const{svgData:i}=o;if(!i)return"";const r=Oo(t,e);if(i.includes("fill"))return i.replace(gA,()=>r);const a=i.indexOf(">");return`${i.substring(fA,a)} fill="${r}"${i.substring(a)}`}async function Wu(o){return new Promise(t=>{o.loading=!0;const e=new Image;o.element=e,e.addEventListener("load",()=>{o.loading=!1,t()}),e.addEventListener("error",()=>{o.element=void 0,o.error=!0,o.loading=!1,dr().error(`${Ri} loading image: ${o.source}`),t()}),e.src=o.source})}async function mA(o){if(o.type!=="svg"){await Wu(o);return}o.loading=!0;const t=await fetch(o.source);t.ok?o.svgData=await t.text():(dr().error(`${Ri} Image not found`),o.error=!0),o.loading=!1}function yA(o,t,e,i){const r=pA(o,e,i.opacity?.value??dA),a={color:e,gif:t.gif,data:{...o,svgData:r},loaded:!1,ratio:t.width/t.height,replaceColor:t.replaceColor,source:t.src};return new Promise(c=>{const h=new Blob([r],{type:"image/svg+xml"}),f=URL||window.URL||window.webkitURL||window,g=f.createObjectURL(h),m=new Image;m.addEventListener("load",()=>{a.loaded=!0,a.element=m,c(a),f.revokeObjectURL(g)});const y=async()=>{f.revokeObjectURL(g);const v={...o,error:!1,loading:!0};await Wu(v),a.loaded=!0,a.element=v.element,c(a)};m.addEventListener("error",()=>void y()),m.src=g})}const qd=[0,4,2,1],jb=[8,8,4,2];class vA{constructor(t){this.pos=0,this.data=new Uint8ClampedArray(t)}getString(t){const e=this.data.slice(this.pos,this.pos+t);return this.pos+=e.length,e.reduce((i,r)=>i+String.fromCharCode(r),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let t="",e=0;const i=0,r=0;do{e=this.data[this.pos++];for(let a=e;--a>=i;t+=String.fromCharCode(this.data[this.pos++]));}while(e!==r);return t}readSubBlocksBin(){let t=this.data[this.pos],e=0;const i=0,r=1;for(let c=0;t!==i;c+=t+r,t=this.data[this.pos+c])e+=t;const a=new Uint8Array(e);t=this.data[this.pos++];for(let c=0;t!==i;t=this.data[this.pos++])for(let h=t;--h>=i;a[c++]=this.data[this.pos++]);return a}skipSubBlocks(){for(const t=1,e=0;this.data[this.pos]!==e;this.pos+=this.data[this.pos]+t);this.pos++}}var Hi;(function(o){o[o.Replace=0]="Replace",o[o.Combine=1]="Combine",o[o.RestoreBackground=2]="RestoreBackground",o[o.RestorePrevious=3]="RestorePrevious",o[o.UndefinedA=4]="UndefinedA",o[o.UndefinedB=5]="UndefinedB",o[o.UndefinedC=6]="UndefinedC",o[o.UndefinedD=7]="UndefinedD"})(Hi||(Hi={}));var jn;(function(o){o[o.Extension=33]="Extension",o[o.ApplicationExtension=255]="ApplicationExtension",o[o.GraphicsControlExtension=249]="GraphicsControlExtension",o[o.PlainTextExtension=1]="PlainTextExtension",o[o.CommentExtension=254]="CommentExtension",o[o.Image=44]="Image",o[o.EndOfFile=59]="EndOfFile"})(jn||(jn={}));const Ze={x:0,y:0},bA=0,Lb=.5,_A=0,Pb=0,vg=0;function Nx(o,t){const e=[];for(let i=0;i<t;i++)e.push({r:o.data[o.pos],g:o.data[o.pos+1],b:o.data[o.pos+2]}),o.pos+=3;return e}function xA(o,t,e,i){switch(o.nextByte()){case jn.GraphicsControlExtension:{const r=t.frames[e(!1)];o.pos++;const a=o.nextByte();r.GCreserved=(a&224)>>>5,r.disposalMethod=(a&28)>>>2,r.userInputDelayFlag=(a&2)===2;const c=(a&1)===1;r.delayTime=o.nextTwoBytes()*10;const h=o.nextByte();c&&i(h),o.pos++;break}case jn.ApplicationExtension:{o.pos++;const r={identifier:o.getString(8),authenticationCode:o.getString(3),data:o.readSubBlocksBin()};t.applicationExtensions.push(r);break}case jn.CommentExtension:{t.comments.push([e(!1),o.readSubBlocks()]);break}case jn.PlainTextExtension:{if(t.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");o.pos++,t.frames[e(!1)].plainTextData={left:o.nextTwoBytes(),top:o.nextTwoBytes(),width:o.nextTwoBytes(),height:o.nextTwoBytes(),charSize:{width:o.nextTwoBytes(),height:o.nextTwoBytes()},foregroundColor:o.nextByte(),backgroundColor:o.nextByte(),text:o.readSubBlocks()};break}default:o.skipSubBlocks();break}}async function SA(o,t,e,i,r,a){const c=t.frames[i(!0)];c.left=o.nextTwoBytes(),c.top=o.nextTwoBytes(),c.width=o.nextTwoBytes(),c.height=o.nextTwoBytes();const h=o.nextByte(),f=(h&128)===128,g=(h&64)===64;c.sortFlag=(h&32)===32,c.reserved=(h&24)>>>3;const m=1<<(h&7)+1;f&&(c.localColorTable=Nx(o,m));const y=k=>{const{r:z,g:Y,b:U}=(f?c.localColorTable:t.globalColorTable)[k];return k!==r(null)?{r:z,g:Y,b:U,a:255}:{r:z,g:Y,b:U,a:e?~~((z+Y+U)/3):0}},v=(()=>{try{return new ImageData(c.width,c.height,{colorSpace:"srgb"})}catch(k){if(k instanceof DOMException&&k.name==="IndexSizeError")return null;throw k}})();if(v==null)throw new EvalError("GIF frame size is to large");const _=o.nextByte(),S=o.readSubBlocksBin(),w=1<<_,C=(k,z)=>{const Y=k>>>3,U=k&7;return(S[Y]+(S[Y+1]<<8)+(S[Y+2]<<16)&(1<<z)-1<<U)>>>U};if(g){for(let k=0,z=_+1,Y=0,U=[[0]],F=0;F<4;F++)if(qd[F]<c.height){let I=0,J=0,Z=!1;for(;!Z;){const ct=k;if(k=C(Y,z),Y+=z+1,k===w){z=_+1,U.length=w+2;for(let wt=0;wt<U.length;wt++)U[wt]=wt<w?[wt]:[]}else{k>=U.length?U.push(U[ct].concat(U[ct][0])):ct!==w&&U.push(U[ct].concat(U[k][0]));for(const wt of U[k]){const{r:Mt,g:ht,b:bt,a:dt}=y(wt);v.data.set([Mt,ht,bt,dt],qd[F]*c.width+jb[F]*J+I%(c.width*4)),I+=4}U.length===1<<z&&z<12&&z++}I===c.width*4*(J+1)&&(J++,qd[F]+jb[F]*J>=c.height&&(Z=!0))}}c.image=v,c.bitmap=await createImageBitmap(v)}else{let k=0,z=_+1,Y=0,U=-4,F=!1;const I=[[0]];for(;!F;){const J=k;if(k=C(Y,z),Y+=z,k===w){z=_+1,I.length=w+2;for(let Z=0;Z<I.length;Z++)I[Z]=Z<w?[Z]:[]}else{if(k===w+1){F=!0;break}k>=I.length?I.push(I[J].concat(I[J][0])):J!==w&&I.push(I[J].concat(I[k][0]));for(const Z of I[k]){const{r:ct,g:wt,b:Mt,a:ht}=y(Z);v.data.set([ct,wt,Mt,ht],U+=4)}I.length>=1<<z&&z<12&&z++}}c.image=v,c.bitmap=await createImageBitmap(v)}}async function wA(o,t,e,i,r,a){switch(o.nextByte()){case jn.EndOfFile:return!0;case jn.Image:await SA(o,t,e,i,r);break;case jn.Extension:xA(o,t,i,r);break;default:throw new EvalError("undefined block found")}return!1}function CA(o){for(const t of o.applicationExtensions)if(t.identifier+t.authenticationCode==="NETSCAPE2.0")return t.data[1]+(t.data[2]<<8);return NaN}async function TA(o,t,e){e||(e=!1);const i=await fetch(o);if(!i.ok&&i.status===404)throw new EvalError("file not found");const r=await i.arrayBuffer(),a={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},c=new vA(new Uint8ClampedArray(r));if(c.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");a.width=c.nextTwoBytes(),a.height=c.nextTwoBytes();const h=c.nextByte(),f=(h&128)===128;a.colorRes=(h&112)>>>4,a.sortFlag=(h&8)===8;const g=1<<(h&7)+1,m=c.nextByte();a.pixelAspectRatio=c.nextByte(),a.pixelAspectRatio!==0&&(a.pixelAspectRatio=(a.pixelAspectRatio+15)/64),f&&(a.globalColorTable=Nx(c,g));const y=(()=>{try{return new ImageData(a.width,a.height,{colorSpace:"srgb"})}catch(U){if(U instanceof DOMException&&U.name==="IndexSizeError")return null;throw U}})();if(y==null)throw new Error("GIF frame size is to large");const{r:v,g:_,b:S}=a.globalColorTable[m];y.data.set(f?[v,_,S,255]:[0,0,0,0]);for(let U=4;U<y.data.length;U*=2)y.data.copyWithin(U,0,U);a.backgroundImage=y;let w=-1,C=!0,k=-1;const z=U=>(U&&(C=!0),w),Y=U=>(U!=null&&(k=U),k);try{do C&&(a.frames.push({left:0,top:0,width:0,height:0,disposalMethod:Hi.Replace,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),w++,k=-1,C=!1);while(!await wA(c,a,e,z,Y,t));a.frames.length--;for(const U of a.frames){if(U.userInputDelayFlag&&U.delayTime===0){a.totalTime=1/0;break}a.totalTime+=U.delayTime}return a}catch(U){throw U instanceof EvalError?new Error(`error while parsing frame ${w} "${U.message}"`):U}}function OA(o){const{context:t,radius:e,particle:i,delta:r}=o,a=i.image;if(!a?.gifData||!a.gif)return;const c=new OffscreenCanvas(a.gifData.width,a.gifData.height),h=c.getContext("2d");if(!h)throw new Error("could not create offscreen canvas context");h.imageSmoothingQuality="low",h.imageSmoothingEnabled=!1,h.clearRect(Ze.x,Ze.y,c.width,c.height),i.gifLoopCount===void 0&&(i.gifLoopCount=a.gifLoopCount??vg);let f=i.gifFrame??bA;const g={x:-a.gifData.width*Lb,y:-a.gifData.height*Lb},m=a.gifData.frames[f];if(i.gifTime===void 0&&(i.gifTime=_A),!!m.bitmap){switch(t.scale(e/a.gifData.width,e/a.gifData.height),m.disposalMethod){case Hi.UndefinedA:case Hi.UndefinedB:case Hi.UndefinedC:case Hi.UndefinedD:case Hi.Replace:h.drawImage(m.bitmap,m.left,m.top),t.drawImage(c,g.x,g.y),h.clearRect(Ze.x,Ze.y,c.width,c.height);break;case Hi.Combine:h.drawImage(m.bitmap,m.left,m.top),t.drawImage(c,g.x,g.y);break;case Hi.RestoreBackground:h.drawImage(m.bitmap,m.left,m.top),t.drawImage(c,g.x,g.y),h.clearRect(Ze.x,Ze.y,c.width,c.height),a.gifData.globalColorTable.length?h.putImageData(a.gifData.backgroundImage,g.x,g.y):h.putImageData(a.gifData.frames[Pb].image,g.x+m.left,g.y+m.top);break;case Hi.RestorePrevious:{const y=h.getImageData(Ze.x,Ze.y,c.width,c.height);h.drawImage(m.bitmap,m.left,m.top),t.drawImage(c,g.x,g.y),h.clearRect(Ze.x,Ze.y,c.width,c.height),h.putImageData(y,Ze.x,Ze.y)}break}if(i.gifTime+=r.value,i.gifTime>m.delayTime){if(i.gifTime-=m.delayTime,++f>=a.gifData.frames.length){if(--i.gifLoopCount<=vg)return;f=Pb,h.clearRect(Ze.x,Ze.y,c.width,c.height)}i.gifFrame=f}t.scale(a.gifData.width/e,a.gifData.height/e)}}async function DA(o){if(o.type!=="gif"){await Wu(o);return}o.loading=!0;try{o.gifData=await TA(o.source),o.gifLoopCount=CA(o.gifData)??vg,o.gifLoopCount||(o.gifLoopCount=1/0)}catch{o.error=!0}o.loading=!1}const MA=2,EA=1,kA=12,AA=1;class zA{constructor(t){this.validTypes=["image","images"],this.loadImageShape=async e=>{if(!this._engine.loadImage)throw new Error(`${Ri} image shape not initialized`);await this._engine.loadImage({gif:e.gif,name:e.name,replaceColor:e.replaceColor??!1,src:e.src})},this._engine=t}addImage(t){this._engine.images||(this._engine.images=[]),this._engine.images.push(t)}draw(t){const{context:e,radius:i,particle:r,opacity:a}=t,c=r.image,h=c?.element;if(c){if(e.globalAlpha=a,c.gif&&c.gifData)OA(t);else if(h){const f=c.ratio,g={x:-i,y:-i},m=i*MA;e.drawImage(h,g.x,g.y,m,m/f)}e.globalAlpha=EA}}getSidesCount(){return kA}async init(t){const e=t.actualOptions;if(!(!e.preload||!this._engine.loadImage))for(const i of e.preload)await this._engine.loadImage(i)}loadShape(t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const e=t.shapeData;if(!e)return;this._engine.images.find(r=>r.name===e.name||r.source===e.src)||this.loadImageShape(e).then(()=>{this.loadShape(t)})}particleInit(t,e){if(e.shape!=="image"&&e.shape!=="images")return;this._engine.images||(this._engine.images=[]);const i=this._engine.images,r=e.shapeData;if(!r)return;const a=e.getFillColor(),c=i.find(f=>f.name===r.name||f.source===r.src);if(!c)return;const h=r.replaceColor??c.replaceColor;if(c.loading){setTimeout(()=>{this.particleInit(t,e)});return}(async()=>{let f;c.svgData&&a?f=await yA(c,r,a,e):f={color:a,data:c,element:c.element,gif:c.gif,gifData:c.gifData,gifLoopCount:c.gifLoopCount,loaded:!0,ratio:r.width&&r.height?r.width/r.height:c.ratio??AA,replaceColor:h,source:r.src},f.ratio||(f.ratio=1);const g=r.fill??e.shapeFill,m=r.close??e.shapeClose,y={image:f,fill:g,close:m};e.image=y.image,e.shapeFill=y.fill,e.shapeClose=y.close})()}}class RA{constructor(){this.src="",this.gif=!1}load(t){G(t)||(t.gif!==void 0&&(this.gif=t.gif),t.height!==void 0&&(this.height=t.height),t.name!==void 0&&(this.name=t.name),t.replaceColor!==void 0&&(this.replaceColor=t.replaceColor),t.src!==void 0&&(this.src=t.src),t.width!==void 0&&(this.width=t.width))}}class jA{constructor(t){this.id="imagePreloader",this._engine=t}async getPlugin(){return await Promise.resolve(),{}}loadOptions(t,e){if(!e?.preload)return;t.preload||(t.preload=[]);const i=t.preload;for(const r of e.preload){const a=i.find(c=>c.name===r.name||c.src===r.src);if(a)a.load(r);else{const c=new RA;c.load(r),i.push(c)}}}needsPlugin(){return!0}}const LA=3;function PA(o){o.loadImage||(o.loadImage=async t=>{if(!t.name&&!t.src)throw new Error(`${Ri} no image source provided`);if(o.images||(o.images=[]),!o.images.find(e=>e.name===t.name||e.source===t.src))try{const e={gif:t.gif??!1,name:t.name??t.src,source:t.src,type:t.src.substring(t.src.length-LA),error:!1,loading:!0,replaceColor:t.replaceColor,ratio:t.width&&t.height?t.width/t.height:void 0};o.images.push(e);let i;t.gif?i=DA:i=t.replaceColor?mA:Wu,await i(e)}catch{throw new Error(`${Ri} ${t.name??t.src} not found`)}})}async function BA(o,t=!0){o.checkVersion("3.8.1"),PA(o);const e=new jA(o);await o.addPlugin(e,t),await o.addShape(new zA(o),t)}class UA extends Zi{constructor(){super(),this.sync=!1}load(t){G(t)||(super.load(t),t.sync!==void 0&&(this.sync=t.sync))}}class FA extends Zi{constructor(){super(),this.sync=!1}load(t){G(t)||(super.load(t),t.sync!==void 0&&(this.sync=t.sync))}}class HA{constructor(){this.count=0,this.delay=new UA,this.duration=new FA}load(t){G(t)||(t.count!==void 0&&(this.count=t.count),this.delay.load(t.delay),this.duration.load(t.duration))}}const so=0,YA=-1,Bb=0,Ub=0;function VA(o,t,e){if(!o.life)return;const i=o.life;let r=!1;if(o.spawning)if(i.delayTime+=t.value,i.delayTime>=o.life.delay)r=!0,o.spawning=!1,i.delayTime=so,i.time=so;else return;if(i.duration===YA||o.spawning||(r?i.time=so:i.time+=t.value,i.time<i.duration))return;if(i.time=so,o.life.count>Bb&&o.life.count--,o.life.count===Bb){o.destroy();return}const a=rt(Ub,e.width),c=rt(Ub,e.width);o.position.x=Ee(a),o.position.y=Ee(c),o.spawning=!0,i.delayTime=so,i.time=so,o.reset();const h=o.options.life;h&&(i.delay=Q(h.delay.value)*Zt,i.duration=Q(h.duration.value)*Zt)}const Ks=0,Fb=1,Hb=-1;class NA{constructor(t){this.container=t}init(t){const e=this.container,i=t.options,r=i.life;r&&(t.life={delay:e.retina.reduceFactor?Q(r.delay.value)*(r.delay.sync?Fb:ft())/e.retina.reduceFactor*Zt:Ks,delayTime:Ks,duration:e.retina.reduceFactor?Q(r.duration.value)*(r.duration.sync?Fb:ft())/e.retina.reduceFactor*Zt:Ks,time:Ks,count:r.count},t.life.duration<=Ks&&(t.life.duration=Hb),t.life.count<=Ks&&(t.life.count=Hb),t.life&&(t.spawning=t.life.delay>Ks))}isEnabled(t){return!t.destroyed}loadOptions(t,...e){t.life||(t.life=new HA);for(const i of e)t.life.load(i?.life)}update(t,e){!this.isEnabled(t)||!t.life||VA(t,e,this.container.canvas.size)}}async function XA(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("life",async e=>Promise.resolve(new NA(e)),t)}function qA(o){const{context:t,particle:e,radius:i}=o,r=e.shapeData,a=0;t.moveTo(-i,a),t.lineTo(i,a),t.lineCap=r?.cap??"butt"}const GA=1;class IA{constructor(){this.validTypes=["line"]}draw(t){qA(t)}getSidesCount(){return GA}}async function WA(o,t=!0){o.checkVersion("3.8.1"),await o.addShape(new IA,t)}const Yb=.5;class QA{init(){}isEnabled(t){return!gr()&&!t.destroyed&&t.container.actualOptions.interactivity.events.onHover.parallax.enable}move(t){const e=t.container,i=e.actualOptions,r=i.interactivity.events.onHover.parallax;if(gr()||!r.enable)return;const a=r.force,c=e.interactivity.mouse.position;if(!c)return;const h=e.canvas.size,f={x:h.width*Yb,y:h.height*Yb},g=r.smooth,m=t.getRadius()/a,y={x:(c.x-f.x)*m,y:(c.y-f.y)*m},{offset:v}=t;v.x+=(y.x-v.x)/g,v.y+=(y.y-v.y)/g}}async function ZA(o,t=!0){o.checkVersion("3.8.1"),await o.addMover("parallax",()=>Promise.resolve(new QA),t)}const Vb=1e3,KA=1;class JA extends Gg{constructor(t){super(t)}clear(){}init(){}interact(t){const e=this.container;t.attractDistance===void 0&&(t.attractDistance=Q(t.options.move.attract.distance)*e.retina.pixelRatio);const i=t.attractDistance,r=t.getPosition(),a=e.particles.quadTree.queryCircle(r,i);for(const c of a){if(t===c||!c.options.move.attract.enable||c.destroyed||c.spawning)continue;const h=c.getPosition(),{dx:f,dy:g}=Pe(r,h),m=t.options.move.attract.rotate,y=f/(m.x*Vb),v=g/(m.y*Vb),_=c.size.value/t.size.value,S=KA/_;t.velocity.x-=y*_,t.velocity.y-=v*_,c.velocity.x+=y*S,c.velocity.y+=v*S}}isEnabled(t){return t.options.move.attract.enable}reset(){}}async function $A(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("particlesAttract",e=>Promise.resolve(new JA(e)),t)}const tz=.5,ez=10,iz=0;function Nb(o,t,e,i,r,a){const c=ji(o.options.collisions.absorb.speed*r.factor/ez,iz,i);o.size.value+=c*tz,e.size.value-=c,i<=a&&(e.size.value=0,e.destroy())}function nz(o,t,e,i){const r=o.getRadius(),a=t.getRadius();r===void 0&&a!==void 0?o.destroy():r!==void 0&&a===void 0?t.destroy():r!==void 0&&a!==void 0&&(r>=a?Nb(o,r,t,a,e,i):Nb(t,a,o,r,e,i))}const Xb=o=>{o.collisionMaxSpeed===void 0&&(o.collisionMaxSpeed=Q(o.options.collisions.maxSpeed)),o.velocity.length>o.collisionMaxSpeed&&(o.velocity.length=o.collisionMaxSpeed)};function Xx(o,t){vx(gg(o),gg(t)),Xb(o),Xb(t)}function sz(o,t){!o.unbreakable&&!t.unbreakable&&Xx(o,t),o.getRadius()===void 0&&t.getRadius()!==void 0?o.destroy():o.getRadius()!==void 0&&t.getRadius()===void 0?t.destroy():o.getRadius()!==void 0&&t.getRadius()!==void 0&&(o.getRadius()>=t.getRadius()?t:o).destroy()}function rz(o,t,e,i){switch(o.options.collisions.mode){case _o.absorb:{nz(o,t,e,i);break}case _o.bounce:{Xx(o,t);break}case _o.destroy:{sz(o,t);break}}}const oz=2;class az extends Gg{constructor(t){super(t)}clear(){}init(){}interact(t,e){if(t.destroyed||t.spawning)return;const i=this.container,r=t.getPosition(),a=t.getRadius(),c=i.particles.quadTree.queryCircle(r,a*oz);for(const h of c){if(t===h||!h.options.collisions.enable||t.options.collisions.mode!==h.options.collisions.mode||h.destroyed||h.spawning)continue;const f=h.getPosition(),g=h.getRadius();if(Math.abs(Math.round(r.z)-Math.round(f.z))>a+g)continue;const m=Ne(r,f),y=a+g;m>y||rz(t,h,e,i.retina.pixelRatio)}}isEnabled(t){return t.options.collisions.enable}reset(){}}async function lz(o,t=!0){o.checkVersion("3.8.1"),await o.addInteractor("particlesCollisions",e=>Promise.resolve(new az(e)),t)}const Gd=2;class cz extends Be{constructor(t,e,i,r){super(t,e,i),this.canvasSize=r,this.canvasSize={...r}}contains(t){const{width:e,height:i}=this.canvasSize,{x:r,y:a}=t;return super.contains(t)||super.contains({x:r-e,y:a})||super.contains({x:r-e,y:a-i})||super.contains({x:r,y:a-i})}intersects(t){if(super.intersects(t))return!0;const e=t,i=t,r={x:t.position.x-this.canvasSize.width,y:t.position.y-this.canvasSize.height};if(i.radius!==void 0){const a=new Be(r.x,r.y,i.radius*Gd);return super.intersects(a)}else if(e.size!==void 0){const a=new Qi(r.x,r.y,e.size.width*Gd,e.size.height*Gd);return super.intersects(a)}return!1}}class uz{constructor(){this.blur=5,this.color=new re,this.color.value="#000",this.enable=!1}load(t){G(t)||(t.blur!==void 0&&(this.blur=t.blur),this.color=re.create(this.color,t.color),t.enable!==void 0&&(this.enable=t.enable))}}class hz{constructor(){this.enable=!1,this.frequency=1}load(t){G(t)||(t.color!==void 0&&(this.color=re.create(this.color,t.color)),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity))}}class fz{constructor(){this.blink=!1,this.color=new re,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new uz,this.triangles=new hz,this.width=1,this.warp=!1}load(t){G(t)||(t.id!==void 0&&(this.id=t.id),t.blink!==void 0&&(this.blink=t.blink),this.color=re.create(this.color,t.color),t.consent!==void 0&&(this.consent=t.consent),t.distance!==void 0&&(this.distance=t.distance),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=t.opacity),this.shadow.load(t.shadow),this.triangles.load(t.triangles),t.width!==void 0&&(this.width=t.width),t.warp!==void 0&&(this.warp=t.warp))}}const qb=2,dz=1,iu={x:0,y:0},gz=0;function pz(o,t,e,i,r){const{dx:a,dy:c,distance:h}=Pe(o,t);if(!r||h<=e)return h;const f={x:Math.abs(a),y:Math.abs(c)},g={x:Math.min(f.x,i.width-f.x),y:Math.min(f.y,i.height-f.y)};return Math.sqrt(g.x**qb+g.y**qb)}class mz extends Gg{constructor(t,e){super(t),this._setColor=i=>{if(!i.options.links)return;const r=this._linkContainer,a=i.options.links;let c=a.id===void 0?r.particles.linksColor:r.particles.linksColors.get(a.id);if(c)return;const h=a.color;c=Ox(this._engine,h,a.blink,a.consent),a.id===void 0?r.particles.linksColor=c:r.particles.linksColors.set(a.id,c)},this._linkContainer=t,this._engine=e}clear(){}init(){this._linkContainer.particles.linksColor=void 0,this._linkContainer.particles.linksColors=new Map}interact(t){if(!t.options.links)return;t.links=[];const e=t.getPosition(),i=this.container,r=i.canvas.size;if(e.x<iu.x||e.y<iu.y||e.x>r.width||e.y>r.height)return;const a=t.options.links,c=a.opacity,h=t.retina.linksDistance??gz,f=a.warp;let g;f?g=new cz(e.x,e.y,h,r):g=new Be(e.x,e.y,h);const m=i.particles.quadTree.query(g);for(const y of m){const v=y.options.links;if(t===y||!v?.enable||a.id!==v.id||y.spawning||y.destroyed||!y.links||t.links.some(C=>C.destination===y)||y.links.some(C=>C.destination===t))continue;const _=y.getPosition();if(_.x<iu.x||_.y<iu.y||_.x>r.width||_.y>r.height)continue;const S=pz(e,_,h,r,f&&v.warp);if(S>h)continue;const w=(dz-S/h)*c;this._setColor(t),t.links.push({destination:y,opacity:w})}}isEnabled(t){return!!t.options.links?.enable}loadParticlesOptions(t,...e){t.links||(t.links=new fz);for(const i of e)t.links.load(i?.links)}reset(){}}async function yz(o,t=!0){await o.addInteractor("particlesLinks",async e=>Promise.resolve(new mz(e,o)),t)}function vz(o,t,e,i){o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(e.x,e.y),o.lineTo(i.x,i.y),o.closePath()}function bz(o){let t=!1;const{begin:e,end:i,engine:r,maxDistance:a,context:c,canvasSize:h,width:f,backgroundMask:g,colorLine:m,opacity:y,links:v}=o;if(Ne(e,i)<=a)Wa(c,e,i),t=!0;else if(v.warp){let S,w;const C={x:i.x-h.width,y:i.y},k=Pe(e,C);if(k.distance<=a){const z=e.y-k.dy/k.dx*e.x;S={x:0,y:z},w={x:h.width,y:z}}else{const z={x:i.x,y:i.y-h.height},Y=Pe(e,z);if(Y.distance<=a){const F=-(e.y-Y.dy/Y.dx*e.x)/(Y.dy/Y.dx);S={x:F,y:0},w={x:F,y:h.height}}else{const U={x:i.x-h.width,y:i.y-h.height},F=Pe(e,U);if(F.distance<=a){const I=e.y-F.dy/F.dx*e.x;S={x:-I/(F.dy/F.dx),y:I},w={x:S.x+h.width,y:S.y+h.height}}}}S&&w&&(Wa(c,e,S),Wa(c,i,w),t=!0)}if(!t)return;c.lineWidth=f,g.enable&&(c.globalCompositeOperation=g.composite),c.strokeStyle=hn(m,y);const{shadow:_}=v;if(_.enable){const S=ki(r,_.color);S&&(c.shadowBlur=_.blur,c.shadowColor=hn(S))}c.stroke()}function _z(o){const{context:t,pos1:e,pos2:i,pos3:r,backgroundMask:a,colorTriangle:c,opacityTriangle:h}=o;vz(t,e,i,r),a.enable&&(t.globalCompositeOperation=a.composite),t.fillStyle=hn(c,h),t.fill()}function xz(o){return o.sort((t,e)=>t-e),o.join("_")}function Gb(o,t){const e=xz(o.map(r=>r.id));let i=t.get(e);return i===void 0&&(i=ft(),t.set(e,i)),i}const Ib=0,Id=0,Wb=0,Sz=.5,wz=1;class Cz{constructor(t,e){this._drawLinkLine=(i,r)=>{const a=i.options.links;if(!a?.enable)return;const c=this._container,h=c.actualOptions,f=r.destination,g=i.getPosition(),m=f.getPosition();let y=r.opacity;c.canvas.draw(v=>{let _;const S=i.options.twinkle?.lines;if(S?.enable){const z=S.frequency,Y=ki(this._engine,S.color);ft()<z&&Y&&(_=Y,y=Q(S.opacity))}if(!_){const z=a.id!==void 0?c.particles.linksColors.get(a.id):c.particles.linksColor;_=pg(i,f,z)}if(!_)return;const w=i.retina.linksWidth??Id,C=i.retina.linksDistance??Wb,{backgroundMask:k}=h;bz({context:v,width:w,begin:g,end:m,engine:this._engine,maxDistance:C,canvasSize:c.canvas.size,links:a,backgroundMask:k,colorLine:_,opacity:y})})},this._drawLinkTriangle=(i,r,a)=>{const c=i.options.links;if(!c?.enable)return;const h=c.triangles;if(!h.enable)return;const f=this._container,g=f.actualOptions,m=r.destination,y=a.destination,v=h.opacity??(r.opacity+a.opacity)*Sz;v<=Ib||f.canvas.draw(_=>{const S=i.getPosition(),w=m.getPosition(),C=y.getPosition(),k=i.retina.linksDistance??Wb;if(Ne(S,w)>k||Ne(C,w)>k||Ne(C,S)>k)return;let z=ki(this._engine,h.color);if(!z){const Y=c.id!==void 0?f.particles.linksColors.get(c.id):f.particles.linksColor;z=pg(i,m,Y)}z&&_z({context:_,pos1:S,pos2:w,pos3:C,backgroundMask:g.backgroundMask,colorTriangle:z,opacityTriangle:v})})},this._drawTriangles=(i,r,a,c)=>{const h=a.destination;if(!(i.links?.triangles.enable&&h.options.links?.triangles.enable))return;const f=h.links?.filter(g=>{const m=this._getLinkFrequency(h,g.destination);return h.options.links&&m<=h.options.links.frequency&&c.findIndex(v=>v.destination===g.destination)>=0});if(f?.length)for(const g of f){const m=g.destination;this._getTriangleFrequency(r,h,m)>i.links.triangles.frequency||this._drawLinkTriangle(r,a,g)}},this._getLinkFrequency=(i,r)=>Gb([i,r],this._freqs.links),this._getTriangleFrequency=(i,r,a)=>Gb([i,r,a],this._freqs.triangles),this._container=t,this._engine=e,this._freqs={links:new Map,triangles:new Map}}drawParticle(t,e){const{links:i,options:r}=e;if(!i?.length)return;const a=i.filter(c=>r.links&&(r.links.frequency>=wz||this._getLinkFrequency(e,c.destination)<=r.links.frequency));for(const c of a)this._drawTriangles(r,e,c,a),c.opacity>Ib&&(e.retina.linksWidth??Id)>Id&&this._drawLinkLine(e,c)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map,await Promise.resolve()}particleCreated(t){if(t.links=[],!t.options.links)return;const e=this._container.retina.pixelRatio,{retina:i}=t,{distance:r,width:a}=t.options.links;i.linksDistance=r*e,i.linksWidth=a*e}particleDestroyed(t){t.links=[]}}class Tz{constructor(t){this.id="links",this._engine=t}getPlugin(t){return Promise.resolve(new Cz(t,this._engine))}loadOptions(){}needsPlugin(){return!0}}async function Oz(o,t=!0){const e=new Tz(o);await o.addPlugin(e,t)}async function Dz(o,t=!0){o.checkVersion("3.8.1"),await yz(o,t),await Oz(o,t)}const Mz=180,nu={x:0,y:0},Ez=2;function kz(o,t,e){const{context:i}=o,r=e.count.numerator*e.count.denominator,a=e.count.numerator/e.count.denominator,c=Mz*(a-Ez)/a,h=Math.PI-Un(c);if(i){i.beginPath(),i.translate(t.x,t.y),i.moveTo(nu.x,nu.y);for(let f=0;f<r;f++)i.lineTo(e.length,nu.y),i.translate(e.length,nu.y),i.rotate(h)}}const Az=5;class qx{draw(t){const{particle:e,radius:i}=t,r=this.getCenter(e,i),a=this.getSidesData(e,i);kz(t,r,a)}getSidesCount(t){const e=t.shapeData;return Math.round(Q(e?.sides??Az))}}const Qb=3.5,Zb=2.66,zz=3;class Rz extends qx{constructor(){super(...arguments),this.validTypes=["polygon"]}getCenter(t,e){return{x:-e/(t.sides/Qb),y:-e/(Zb/Qb)}}getSidesData(t,e){const i=t.sides;return{count:{denominator:1,numerator:i},length:e*Zb/(i/zz)}}}const jz=1.66,Lz=3,Pz=2;class Bz extends qx{constructor(){super(...arguments),this.validTypes=["triangle"]}getCenter(t,e){return{x:-e,y:e/jz}}getSidesCount(){return Lz}getSidesData(t,e){const i=e*Pz;return{count:{denominator:2,numerator:3},length:i}}}async function Uz(o,t=!0){o.checkVersion("3.8.1"),await o.addShape(new Rz,t)}async function Fz(o,t=!0){o.checkVersion("3.8.1"),await o.addShape(new Bz,t)}async function Hz(o,t=!0){o.checkVersion("3.8.1"),await Uz(o,t),await Fz(o,t)}class Yz{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(t){G(t)||(t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=rt(t.speed)),t.decay!==void 0&&(this.decay=rt(t.decay)),t.sync!==void 0&&(this.sync=t.sync))}}class Vz extends Zi{constructor(){super(),this.animation=new Yz,this.direction=Ve.clockwise,this.path=!1,this.value=0}load(t){G(t)||(super.load(t),t.direction!==void 0&&(this.direction=t.direction),this.animation.load(t.animation),t.path!==void 0&&(this.path=t.path))}}const Gx=2,Nz=Math.PI*Gx,Xz=1,qz=360;class Gz{constructor(t){this.container=t}init(t){const e=t.options.rotate;if(!e)return;t.rotate={enable:e.animation.enable,value:Un(Q(e.value)),min:0,max:Nz},t.pathRotation=e.path;let i=e.direction;switch(i===Ve.random&&(i=Math.floor(ft()*Gx)>0?Ve.counterClockwise:Ve.clockwise),i){case Ve.counterClockwise:case"counterClockwise":t.rotate.status=te.decreasing;break;case Ve.clockwise:t.rotate.status=te.increasing;break}const r=e.animation;r.enable&&(t.rotate.decay=Xz-Q(r.decay),t.rotate.velocity=Q(r.speed)/qz*this.container.retina.reduceFactor,r.sync||(t.rotate.velocity*=ft())),t.rotation=t.rotate.value}isEnabled(t){const e=t.options.rotate;return e?!t.destroyed&&!t.spawning&&(!!e.value||e.animation.enable||e.path):!1}loadOptions(t,...e){t.rotate||(t.rotate=new Vz);for(const i of e)t.rotate.load(i?.rotate)}update(t,e){this.isEnabled(t)&&(t.isRotating=!!t.rotate,t.rotate&&(Iu(t,t.rotate,!1,Os.none,e),t.rotation=t.rotate.value))}}async function Iz(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("rotate",e=>Promise.resolve(new Gz(e)),t)}const Wz=2,Qz=Math.sqrt(Wz),Zz=2;function Kz(o){const{context:t,radius:e}=o,i=e/Qz,r=i*Zz;t.rect(-i,-i,r,r)}const Jz=4;class $z{constructor(){this.validTypes=["edge","square"]}draw(t){Kz(t)}getSidesCount(){return Jz}}async function tR(o,t=!0){o.checkVersion("3.8.1"),await o.addShape(new $z,t)}const eR=2,ro={x:0,y:0};function iR(o){const{context:t,particle:e,radius:i}=o,r=e.sides,a=e.starInset??eR;t.moveTo(ro.x,ro.y-i);for(let c=0;c<r;c++)t.rotate(Math.PI/r),t.lineTo(ro.x,ro.y-i*a),t.rotate(Math.PI/r),t.lineTo(ro.x,ro.y-i)}const nR=2,sR=5;class rR{constructor(){this.validTypes=["star"]}draw(t){iR(t)}getSidesCount(t){const e=t.shapeData;return Math.round(Q(e?.sides??sR))}particleInit(t,e){const i=e.shapeData;e.starInset=Q(i?.inset??nR)}}async function oR(o,t=!0){o.checkVersion("3.8.1"),await o.addShape(new rR,t)}const aR=1;class lR{constructor(t,e){this._container=t,this._engine=e}init(t){const e=this._container,i=t.options,r=ke(i.stroke,t.id,i.reduceDuplicates);t.strokeWidth=Q(r.width)*e.retina.pixelRatio,t.strokeOpacity=Q(r.opacity??aR),t.strokeAnimation=r.color?.animation;const a=Ds(this._engine,r.color)??t.getFillColor();a&&(t.strokeColor=Dx(a,t.strokeAnimation,e.retina.reduceFactor))}isEnabled(t){const e=t.strokeAnimation,{strokeColor:i}=t;return!t.destroyed&&!t.spawning&&!!e&&(i?.h.value!==void 0&&i.h.enable||i?.s.value!==void 0&&i.s.enable||i?.l.value!==void 0&&i.l.enable)}update(t,e){this.isEnabled(t)&&Mx(t.strokeColor,e)}}async function cR(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("strokeColor",e=>Promise.resolve(new lR(e,o)),t)}async function uR(o,t=!0){o.checkVersion("3.8.1"),await ZA(o,!1),await tk(o,!1),await ck(o,!1),await yk(o,!1),await Dk(o,!1),await Bk(o,!1),await Hk(o,!1),await qk(o,!1),await Qk(o,!1),await oA(o,!1),await hA(o,!1),await $A(o,!1),await lz(o,!1),await Dz(o,!1),await XE(o,!1),await IE(o,!1),await BA(o,!1),await WA(o,!1),await Hz(o,!1),await tR(o,!1),await oR(o,!1),await XA(o,!1),await Iz(o,!1),await cR(o,!1),await NE(o,t)}const Ix=2,Kb=.5;function hR(o){const{context:t,particle:e,radius:i,opacity:r}=o,a=e.shapeData;if(!a)return;const c=a.value;if(c===void 0)return;e.text===void 0&&(e.text=ke(c,e.randomIndexData));const h=e.text,f=a.style??"",g=a.weight??"400",m=Math.round(i)*Ix,y=a.font??"Verdana",v=e.shapeFill,_=h?.split(`
`);if(_){t.font=`${f} ${g} ${m}px "${y}"`,t.globalAlpha=r;for(let S=0;S<_.length;S++)fR(t,_[S],i,r,S,v);t.globalAlpha=1}}function fR(o,t,e,i,r,a){const c=t.length*e*Kb,h={x:-c,y:e*Kb},f=e*Ix;a?o.fillText(t,h.x,h.y+f*r):o.strokeText(t,h.x,h.y+f*r)}class dR{constructor(){this.validTypes=["text","character","char","multiline-text"]}draw(t){hR(t)}async init(t){const e=t.actualOptions,{validTypes:i}=this;if(i.find(r=>qt(r,e.particles.shape.type))){const r=i.map(c=>e.particles.shape.options[c]).find(c=>!!c),a=[];he(r,c=>{a.push(dg(c.font,c.weight))}),await Promise.all(a)}}particleInit(t,e){if(!e.shape||!this.validTypes.includes(e.shape))return;const i=e.shapeData;if(i===void 0)return;const r=i.value;r!==void 0&&(e.text=ke(r,e.randomIndexData))}}async function gR(o,t=!0){o.checkVersion("3.8.1"),await o.addShape(new dR,t)}var _s;(function(o){o.clockwise="clockwise",o.counterClockwise="counter-clockwise",o.random="random"})(_s||(_s={}));class pR{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(t){G(t)||(t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0&&(this.speed=rt(t.speed)),t.decay!==void 0&&(this.decay=rt(t.decay)),t.sync!==void 0&&(this.sync=t.sync))}}class mR extends Zi{constructor(){super(),this.animation=new pR,this.direction=_s.clockwise,this.enable=!1,this.value=0}load(t){super.load(t),!G(t)&&(this.animation.load(t.animation),t.direction!==void 0&&(this.direction=t.direction),t.enable!==void 0&&(this.enable=t.enable))}}const Ya=1,Wx=2,yR=Math.PI*Wx,vR=360;class bR{constructor(t){this.container=t}getTransformValues(t){const e=t.tilt?.enable&&t.tilt;return{b:e?Math.cos(e.value)*e.cosDirection:void 0,c:e?Math.sin(e.value)*e.sinDirection:void 0}}init(t){const e=t.options.tilt;if(!e)return;t.tilt={enable:e.enable,value:Un(Q(e.value)),sinDirection:ft()>=Xt?Ya:-Ya,cosDirection:ft()>=Xt?Ya:-Ya,min:0,max:yR};let i=e.direction;switch(i===_s.random&&(i=Math.floor(ft()*Wx)>0?_s.counterClockwise:_s.clockwise),i){case _s.counterClockwise:case"counterClockwise":t.tilt.status=te.decreasing;break;case _s.clockwise:t.tilt.status=te.increasing;break}const r=t.options.tilt?.animation;r?.enable&&(t.tilt.decay=Ya-Q(r.decay),t.tilt.velocity=Q(r.speed)/vR*this.container.retina.reduceFactor,r.sync||(t.tilt.velocity*=ft()))}isEnabled(t){const e=t.options.tilt?.animation;return!t.destroyed&&!t.spawning&&!!e?.enable}loadOptions(t,...e){t.tilt||(t.tilt=new mR);for(const i of e)t.tilt.load(i?.tilt)}async update(t,e){!this.isEnabled(t)||!t.tilt||(Iu(t,t.tilt,!1,Os.none,e),await Promise.resolve())}}async function _R(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("tilt",e=>Promise.resolve(new bR(e)),t)}class Jb{constructor(){this.enable=!1,this.frequency=.05,this.opacity=1}load(t){G(t)||(t.color!==void 0&&(this.color=re.create(this.color,t.color)),t.enable!==void 0&&(this.enable=t.enable),t.frequency!==void 0&&(this.frequency=t.frequency),t.opacity!==void 0&&(this.opacity=rt(t.opacity)))}}class xR{constructor(){this.lines=new Jb,this.particles=new Jb}load(t){G(t)||(this.lines.load(t.lines),this.particles.load(t.particles))}}class SR{constructor(t){this._engine=t}getColorStyles(t,e,i,r){const a=t.options,c=a.twinkle;if(!c)return{};const h=c.particles,f=h.enable&&ft()<h.frequency,g=t.options.zIndex,m=1,y=(m-t.zIndexFactor)**g.opacityRate,v=f?Q(h.opacity)*y:r,_=Ds(this._engine,h.color),S=_?Oo(_,v):void 0,w={},C=f&&S;return w.fill=C?S:void 0,w.stroke=C?S:void 0,w}async init(){await Promise.resolve()}isEnabled(t){const e=t.options,i=e.twinkle;return i?i.particles.enable:!1}loadOptions(t,...e){t.twinkle||(t.twinkle=new xR);for(const i of e)t.twinkle.load(i?.twinkle)}async update(){await Promise.resolve()}}async function wR(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("twinkle",()=>Promise.resolve(new SR(o)),t)}class CR{constructor(){this.angle=50,this.move=10}load(t){G(t)||(t.angle!==void 0&&(this.angle=rt(t.angle)),t.move!==void 0&&(this.move=rt(t.move)))}}class TR{constructor(){this.distance=5,this.enable=!1,this.speed=new CR}load(t){if(!G(t)&&(t.distance!==void 0&&(this.distance=rt(t.distance)),t.enable!==void 0&&(this.enable=t.enable),t.speed!==void 0))if(di(t.speed))this.speed.load({angle:t.speed});else{const e=t.speed;e.min!==void 0?this.speed.load({angle:e}):this.speed.load(t.speed)}}}const OR=0,DR=2,MR=Math.PI*DR,ER=60;function kR(o,t){const{wobble:e}=o.options,{wobble:i}=o;if(!e?.enable||!i)return;const r=i.angleSpeed*t.factor,a=i.moveSpeed*t.factor,c=a*((o.retina.wobbleDistance??OR)*t.factor)/(Zt/ER),h=MR,{position:f}=o;i.angle+=r,i.angle>h&&(i.angle-=h),f.x+=c*Math.cos(i.angle),f.y+=c*Math.abs(Math.sin(i.angle))}const AR=2,zR=Math.PI*AR,RR=360,jR=10,LR=0;class PR{constructor(t){this.container=t}init(t){const e=t.options.wobble;e?.enable?t.wobble={angle:ft()*zR,angleSpeed:Q(e.speed.angle)/RR,moveSpeed:Q(e.speed.move)/jR}:t.wobble={angle:0,angleSpeed:0,moveSpeed:0},t.retina.wobbleDistance=Q(e?.distance??LR)*this.container.retina.pixelRatio}isEnabled(t){return!t.destroyed&&!t.spawning&&!!t.options.wobble?.enable}loadOptions(t,...e){t.wobble||(t.wobble=new TR);for(const i of e)t.wobble.load(i?.wobble)}update(t,e){this.isEnabled(t)&&kR(t,e)}}async function BR(o,t=!0){o.checkVersion("3.8.1"),await o.addParticleUpdater("wobble",e=>Promise.resolve(new PR(e)),t)}async function UR(o,t=!0){o.checkVersion("3.8.1"),await bM(o,!1),await QM(o,!1),await _R(o,!1),await wR(o,!1),await BR(o,!1),await gR(o,!1),await VM(o,!1),await rM(o,!1),await AM(o,!1),await LM(o,!1),await FM(o,!1),await uR(o,t)}var Qx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$b=Ln.createContext&&Ln.createContext(Qx),FR=["attr","size","title"];function HR(o,t){if(o==null)return{};var e=YR(o,t),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(r=0;r<a.length;r++)i=a[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(o,i)&&(e[i]=o[i])}return e}function YR(o,t){if(o==null)return{};var e={};for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){if(t.indexOf(i)>=0)continue;e[i]=o[i]}return e}function Ru(){return Ru=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(o[i]=e[i])}return o},Ru.apply(this,arguments)}function t_(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),e.push.apply(e,i)}return e}function ju(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?t_(Object(e),!0).forEach(function(i){VR(o,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):t_(Object(e)).forEach(function(i){Object.defineProperty(o,i,Object.getOwnPropertyDescriptor(e,i))})}return o}function VR(o,t,e){return t=NR(t),t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}function NR(o){var t=XR(o,"string");return typeof t=="symbol"?t:t+""}function XR(o,t){if(typeof o!="object"||!o)return o;var e=o[Symbol.toPrimitive];if(e!==void 0){var i=e.call(o,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(o)}function Zx(o){return o&&o.map((t,e)=>Ln.createElement(t.tag,ju({key:e},t.attr),Zx(t.child)))}function Bo(o){return t=>Ln.createElement(qR,Ru({attr:ju({},o.attr)},t),Zx(o.child))}function qR(o){var t=e=>{var{attr:i,size:r,title:a}=o,c=HR(o,FR),h=r||e.size||"1em",f;return e.className&&(f=e.className),o.className&&(f=(f?f+" ":"")+o.className),Ln.createElement("svg",Ru({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,c,{className:f,style:ju(ju({color:o.color||e.color},e.style),o.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),a&&Ln.createElement("title",null,a),o.children)};return $b!==void 0?Ln.createElement($b.Consumer,null,e=>t(e)):t(Qx)}function GR(o){return Bo({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(o)}function IR(o){return Bo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(o)}function WR(o){return Bo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"},child:[]}]})(o)}function QR(o){return Bo({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V86c0-3.3 2.7-6 6-6h340c3.3 0 6 2.7 6 6v340c0 3.3-2.7 6-6 6z"},child:[]}]})(o)}function ZR(o){return Bo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"},child:[]}]})(o)}function KR(o){return Bo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"},child:[]}]})(o)}function JR(){const[o,t]=Mi.useState(!1),[e,i]=Mi.useState([]),r=Mi.useRef(null),a=Mi.useRef(null);Mi.useEffect(()=>{GD(async g=>{await UR(g)}).then(()=>{t(!0)})},[]);const c=Mi.useCallback(g=>{const m={...g,timestamp:new Date().toLocaleTimeString()};i(y=>[m,...y]),a.current&&(a.current.scrollTop=0)},[]),h=g=>{r.current&&r.current.addShape(g)},f=()=>{r.current&&r.current.deleteSelected()};return o?At.jsxs("div",{className:"main-container",children:[At.jsx(qD,{id:"tsparticles",options:{background:{color:{value:"#121212"}},fpsLimit:120,interactivity:{events:{onHover:{enable:!0,mode:"grab"},resize:!0},modes:{grab:{distance:140,links:{opacity:1}}}},particles:{color:{value:"#ffffff"},links:{color:"#ffffff",distance:150,enable:!0,opacity:.5,width:1},move:{direction:"none",enable:!0,outModes:{default:"bounce"},random:!1,speed:2,straight:!1},number:{density:{enable:!0,area:800},value:80},opacity:{value:.5},shape:{type:"circle"},size:{value:{min:1,max:5}}},detectRetina:!0}}),At.jsxs("div",{children:[At.jsx("h1",{children:"🎨 Fabric.js Creative Canvas"}),At.jsx("p",{children:"Design your canvas by adding, moving, and deleting shapes."}),At.jsxs("div",{className:"controls",children:[At.jsxs("button",{onClick:()=>h("rectangle"),children:[At.jsx(QR,{})," Rectangle"]}),At.jsxs("button",{onClick:()=>h("circle"),children:[At.jsx(WR,{})," Circle"]}),At.jsxs("button",{onClick:()=>h("triangle"),children:[At.jsx(KR,{})," Triangle"]}),At.jsxs("button",{onClick:()=>h("ellipse"),children:[At.jsx(ZR,{})," Ellipse"]}),At.jsxs("button",{onClick:()=>h("star"),children:[At.jsx(GR,{})," Star"]}),At.jsxs("button",{onClick:f,className:"delete-button",children:[At.jsx(IR,{})," Delete"]})]}),At.jsx("div",{className:"canvas-container",children:At.jsx(bO,{ref:r,onObjectClicked:c})}),At.jsxs("div",{className:"event-log-container",children:[At.jsx("h2",{children:"🖱️ Click Event Log"}),At.jsx("div",{className:"event-log",ref:a,children:e.length===0?At.jsx("p",{children:"Click a shape to begin..."}):e.map((g,m)=>At.jsxs("p",{children:["[",g.timestamp,"] - Clicked a ",At.jsx("span",{children:g.type})," at position (X: ",g.left,", Y: ",g.top,")"]},m))})]})]})]}):null}E1.createRoot(document.getElementById("root")).render(At.jsx(Mi.StrictMode,{children:At.jsx(JR,{})}));
